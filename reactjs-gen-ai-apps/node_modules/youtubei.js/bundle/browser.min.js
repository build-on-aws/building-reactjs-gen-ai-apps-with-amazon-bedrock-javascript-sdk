/* eslint-disable */
var wx=Object.defineProperty;var n=(t,e)=>wx(t,"name",{value:e,configurable:!0});var U=(t,e)=>{for(var i in e)wx(t,i,{get:e[i],enumerable:!0})};function Sx(t,e,i){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:i?"".concat(i," ",e):e})}n(Sx,"__setFunctionName");function x(t,e,i,o){function s(r){return r instanceof i?r:new i(function(c){c(r)})}return n(s,"adopt"),new(i||(i=Promise))(function(r,c){function p(_){try{m(o.next(_))}catch(b){c(b)}}n(p,"fulfilled");function f(_){try{m(o.throw(_))}catch(b){c(b)}}n(f,"rejected");function m(_){_.done?r(_.value):s(_.value).then(p,f)}n(m,"step"),m((o=o.apply(t,e||[])).next())})}n(x,"__awaiter");function Tx(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}n(Tx,"__values");function ao(t){return this instanceof ao?(this.v=t,this):new ao(t)}n(ao,"__await");function Ix(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=i.apply(t,e||[]),s,r=[];return s={},c("next"),c("throw"),c("return"),s[Symbol.asyncIterator]=function(){return this},s;function c(w){o[w]&&(s[w]=function(T){return new Promise(function(I,C){r.push([w,T,I,C])>1||p(w,T)})})}function p(w,T){try{f(o[w](T))}catch(I){b(r[0][3],I)}}function f(w){w.value instanceof ao?Promise.resolve(w.value.v).then(m,_):b(r[0][2],w)}function m(w){p("next",w)}function _(w){p("throw",w)}function b(w,T){w(T),r.shift(),r.length&&p(r[0][0],r[0][1])}}n(Ix,"__asyncGenerator");function kx(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],i;return e?e.call(t):(t=typeof Tx=="function"?Tx(t):t[Symbol.iterator](),i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i);function o(r){i[r]=t[r]&&function(c){return new Promise(function(p,f){c=t[r](c),s(p,f,c.done,c.value)})}}function s(r,c,p,f){Promise.resolve(f).then(function(m){r({value:m,done:p})},c)}}n(kx,"__asyncValues");function u(t,e,i,o){if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?o:i==="a"?o.call(t):o?o.value:e.get(t)}n(u,"__classPrivateFieldGet");function S(t,e,i,o,s){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?s.call(t,i):s?s.value=i:e.set(t,i),i}n(S,"__classPrivateFieldSet");var Yg={};U(Yg,{ChannelError:()=>ns,InnertubeError:()=>g,MissingParamError:()=>$o,OAuthError:()=>ui,ParsingError:()=>pt,Platform:()=>B,PlayerError:()=>gt,SessionError:()=>Ps,base64ToU8:()=>_g,concatMemos:()=>Sg,debugFetch:()=>uS,deepCompare:()=>vh,escapeStringRegexp:()=>Lg,generateRandomString:()=>It,generateSidAuth:()=>Fg,getRandomUserAgent:()=>qo,getStringBetweenStrings:()=>$e,hasKeys:()=>aS,isTextRun:()=>Qe,streamToIterable:()=>Ag,throwIfMissing:()=>re,timeToSeconds:()=>ze,u8ToBase64:()=>Tt});var ug={};U(ug,{Maybe:()=>lo,Memo:()=>Ni,SuperParsedResult:()=>Xt,YTNode:()=>a,observe:()=>pe});var ag,Cx,Oe,he,qt,pi,uo,Ex=Symbol("ObservedArray.isObserved"),a=class{constructor(){ag.add(this),this.type=this.constructor.type}is(...e){return e.some(i=>u(this,ag,"m",Cx).call(this,i))}as(...e){if(!this.is(...e))throw new pt(`Cannot cast ${this.type} to one of ${e.map(i=>i.type).join(", ")}`);return this}hasKey(e){return Reflect.has(this,e)}key(e){if(!this.hasKey(e))throw new pt(`Missing key ${e}`);return new lo(this[e])}};n(a,"YTNode");ag=new WeakSet,Cx=n(function(e){return this.type===e.type},"_YTNode_is");a.type="YTNode";var lo=class{constructor(e){Oe.add(this),he.set(this,void 0),S(this,he,e,"f")}get typeof(){return typeof u(this,he,"f")}string(){return u(this,Oe,"m",pi).call(this,"string")}isString(){return u(this,Oe,"m",qt).call(this,"string")}number(){return u(this,Oe,"m",pi).call(this,"number")}isNumber(){return u(this,Oe,"m",qt).call(this,"number")}bigint(){return u(this,Oe,"m",pi).call(this,"bigint")}isBigint(){return u(this,Oe,"m",qt).call(this,"bigint")}boolean(){return u(this,Oe,"m",pi).call(this,"boolean")}isBoolean(){return u(this,Oe,"m",qt).call(this,"boolean")}symbol(){return u(this,Oe,"m",pi).call(this,"symbol")}isSymbol(){return u(this,Oe,"m",qt).call(this,"symbol")}undefined(){return u(this,Oe,"m",pi).call(this,"undefined")}isUndefined(){return u(this,Oe,"m",qt).call(this,"undefined")}null(){if(u(this,he,"f")!==null)throw new TypeError(`Expected null, got ${typeof u(this,he,"f")}`);return u(this,he,"f")}isNull(){return u(this,he,"f")===null}object(){return u(this,Oe,"m",pi).call(this,"object")}isObject(){return u(this,Oe,"m",qt).call(this,"object")}function(){return u(this,Oe,"m",pi).call(this,"function")}isFunction(){return u(this,Oe,"m",qt).call(this,"function")}array(){if(!Array.isArray(u(this,he,"f")))throw new TypeError(`Expected array, got ${typeof u(this,he,"f")}`);return u(this,he,"f")}arrayOfMaybe(){let e=[];return new Proxy(this.array(),{get(i,o){return Reflect.has(e,o)?Reflect.get(i,o):new lo(Reflect.get(i,o))}})}isArray(){return Array.isArray(u(this,he,"f"))}node(){if(!(u(this,he,"f")instanceof a))throw new TypeError(`Expected YTNode, got ${u(this,he,"f").constructor.name}`);return u(this,he,"f")}isNode(){return u(this,he,"f")instanceof a}nodeOfType(...e){return this.node().as(...e)}isNodeOfType(...e){return this.isNode()&&this.node().is(...e)}observed(){if(!this.isObserved())throw new TypeError(`Expected ObservedArray, got ${typeof u(this,he,"f")}`);return u(this,he,"f")}isObserved(){var e;return(e=u(this,he,"f"))===null||e===void 0?void 0:e[Ex]}parsed(){if(!(u(this,he,"f")instanceof Xt))throw new TypeError(`Expected SuperParsedResult, got ${typeof u(this,he,"f")}`);return u(this,he,"f")}isParsed(){return u(this,he,"f")instanceof Xt}any(){return console.warn("This call is not meant to be used outside of debugging. Please use the specific type getter instead."),u(this,he,"f")}instanceof(e){if(!this.isInstanceof(e))throw new TypeError(`Expected instance of ${e.name}, got ${u(this,he,"f").constructor.name}`);return u(this,he,"f")}isInstanceof(e){return u(this,he,"f")instanceof e}};n(lo,"Maybe");he=new WeakMap,Oe=new WeakSet,qt=n(function(e){return typeof u(this,he,"f")===e},"_Maybe_checkPrimative"),pi=n(function(e){if(!u(this,Oe,"m",qt).call(this,e))throw new TypeError(`Expected ${e}, got ${this.typeof}`);return u(this,he,"f")},"_Maybe_assertPrimative");var Xt=class{constructor(e){uo.set(this,void 0),S(this,uo,e,"f")}get is_null(){return u(this,uo,"f")===null}get is_array(){return!this.is_null&&Array.isArray(u(this,uo,"f"))}get is_node(){return!this.is_array}array(){if(!this.is_array)throw new TypeError("Expected an array, got a node");return u(this,uo,"f")}item(){if(!this.is_node)throw new TypeError("Expected a node, got an array");return u(this,uo,"f")}};n(Xt,"SuperParsedResult");uo=new WeakMap;function pe(t){return new Proxy(t,{get(e,i){return i=="get"?(o,s)=>e.find((r,c)=>{let p=vh(o,r);return p&&s&&e.splice(c,1),p}):i==Ex?!0:i=="getAll"?(o,s)=>e.filter((r,c)=>{let p=vh(o,r);return p&&s&&e.splice(c,1),p}):i=="matchCondition"?o=>e.find(s=>o(s)):i=="filterType"?(...o)=>pe(e.filter(s=>!!s.is(...o))):i=="firstOfType"?(...o)=>e.find(s=>!!s.is(...o)):i=="first"?()=>e[0]:i=="as"?(...o)=>pe(e.map(s=>{if(s.is(...o))return s;throw new pt(`Expected node of any type ${o.map(r=>r.type).join(", ")}, got ${s.type}`)})):i=="remove"?o=>e.splice(o,1):Reflect.get(e,i)}})}n(pe,"observe");var Ni=class extends Map{getType(...e){return e=e.flat(),pe(e.flatMap(i=>this.get(i.type)||[]))}};n(Ni,"Memo");var Bg={};U(Bg,{Author:()=>F,ChildElement:()=>Tm,EmojiRun:()=>Ri,Format:()=>Vi,Text:()=>l,TextRun:()=>Mi,Thumbnail:()=>y,VideoDetails:()=>Oi});var ft={};U(ft,{CLIENTS:()=>Q,INNERTUBE_HEADERS_BASE:()=>O1,OAUTH:()=>Ai,STREAM_HEADERS:()=>wn,URLS:()=>_e});var _e=Object.freeze({YT_BASE:"https://www.youtube.com",YT_MUSIC_BASE:"https://music.youtube.com",YT_SUGGESTIONS:"https://suggestqueries.google.com/complete/",YT_UPLOAD:"https://upload.youtube.com/",API:Object.freeze({BASE:"https://youtubei.googleapis.com",PRODUCTION_1:"https://www.youtube.com/youtubei/",PRODUCTION_2:"https://youtubei.googleapis.com/youtubei/",STAGING:"https://green-youtubei.sandbox.googleapis.com/youtubei/",RELEASE:"https://release-youtubei.sandbox.googleapis.com/youtubei/",TEST:"https://test-youtubei.sandbox.googleapis.com/youtubei/",CAMI:"http://cami-youtubei.sandbox.googleapis.com/youtubei/",UYTFE:"https://uytfe.sandbox.google.com/youtubei/"})}),Ai=Object.freeze({SCOPE:"http://gdata.youtube.com https://www.googleapis.com/auth/youtube-paid-content",GRANT_TYPE:"http://oauth.net/grant_type/device/1.0",MODEL_NAME:"ytlr::",HEADERS:Object.freeze({accept:"*/*",origin:"https://www.youtube.com","user-agent":"Mozilla/5.0 (ChromiumStylePlatform) Cobalt/Version","content-type":"application/json",referer:"https://www.youtube.com/tv","accept-language":"en-US"}),REGEX:Object.freeze({AUTH_SCRIPT:/<script id="base-js" src="(.*?)" nonce=".*?"><\/script>/,CLIENT_IDENTITY:new RegExp('var .+?={clientId:"(?<client_id>.+?)",.+?:"(?<client_secret>.+?)".+?}')})}),Q=Object.freeze({WEB:{NAME:"WEB",VERSION:"2.20230622.06.00",API_KEY:"AIzaSyAO_FJ2SlqU8Q4STEHLGCilw_Y9_11qcW8",API_VERSION:"v1",STATIC_VISITOR_ID:"6zpwvWUNAco"},WEB_KIDS:{NAME:"WEB_KIDS",VERSION:"2.20230111.00.00"},YTMUSIC:{NAME:"WEB_REMIX",VERSION:"1.20211213.00.00"},ANDROID:{NAME:"ANDROID",VERSION:"18.06.35",SDK_VERSION:"29",USER_AGENT:"com.google.android.youtube/18.06.35 (Linux; U; Android 10; US)"},YTSTUDIO_ANDROID:{NAME:"ANDROID_CREATOR",VERSION:"22.43.101"},YTMUSIC_ANDROID:{NAME:"ANDROID_MUSIC",VERSION:"5.34.51"},TV_EMBEDDED:{NAME:"TVHTML5_SIMPLY_EMBEDDED_PLAYER",VERSION:"2.0"}}),wn=Object.freeze({accept:"*/*",origin:"https://www.youtube.com",referer:"https://www.youtube.com",DNT:"?1"}),O1=Object.freeze({accept:"*/*","accept-encoding":"gzip, deflate","content-type":"application/json"});var wr=class extends a{constructor(e){super(),this.audio_only_availability=e.audioOnlyAvailability}};n(wr,"AudioOnlyPlayability");wr.type="AudioOnlyPlayability";var gh=wr;var Tr=class extends a{constructor(e){super(),Reflect.has(e,"text")&&(this.text=new l(e.text).toString()),Reflect.has(e,"accessibility")&&Reflect.has(e.accessibility,"label")&&(this.label=e.accessibility.label),Reflect.has(e,"tooltip")&&(this.tooltip=e.tooltip),Reflect.has(e,"icon")&&Reflect.has(e.icon,"iconType")&&(this.icon_type=e.icon.iconType),Reflect.has(e,"isDisabled")&&(this.is_disabled=e.isDisabled),this.endpoint=new v(e.navigationEndpoint||e.serviceEndpoint||e.command)}};n(Tr,"Button");Tr.type="Button";var k=Tr;var Sr=class extends a{constructor(e){var i;super(),this.label=new l(e.label).toString(),this.selected=!!e.isSelected,Reflect.has(e,"int32Value")?this.value=e.int32Value:e.stringValue&&(this.value=e.stringValue),Reflect.has(e,"onSelectCommand")&&(this.endpoint=new v(e.onSelectCommand)),Reflect.has(e,"icon")&&(this.icon_type=(i=e.icon)===null||i===void 0?void 0:i.iconType),Reflect.has(e,"descriptionText")&&(this.description=new l(e.descriptionText))}};n(Sr,"DropdownItem");Sr.type="DropdownItem";var xh=Sr;var Ir=class extends a{constructor(e){super(),this.label=e.label||"",this.entries=d.parseArray(e.entries,xh)}};n(Ir,"Dropdown");Ir.type="Dropdown";var Tn=Ir;var kr=class extends a{constructor(e){super(),this.title=new l(e.dialogTitle).toString(),this.title_placeholder=e.titlePlaceholder||"",this.privacy_option=d.parseItem(e.privacyOption,Tn),this.create_button=d.parseItem(e.cancelButton,k),this.cancel_button=d.parseItem(e.cancelButton,k)}};n(kr,"CreatePlaylistDialog");kr.type="CreatePlaylistDialog";var bh=kr;var Cr=class extends a{constructor(e){super(),this.popup=d.parseItem(e.popup),this.popup_type=e.popupType}};n(Cr,"OpenPopupAction");Cr.type="OpenPopupAction";var yh=Cr;var Er=class extends a{constructor(e){var i,o,s,r,c,p,f,m;super(),Reflect.has(e||{},"innertubeCommand")&&(e=e.innertubeCommand),Reflect.has(e||{},"openPopupAction")&&(this.open_popup=new yh(e.openPopupAction));let _=Object.keys(e||{}).find(b=>b.endsWith("Endpoint")||b.endsWith("Command"));this.payload=_?Reflect.get(e,_):{},(Reflect.has(this.payload,"dialog")||Reflect.has(this.payload,"content"))&&(this.dialog=d.parseItem(this.payload.dialog||this.payload.content)),e!=null&&e.serviceEndpoint&&(e=e.serviceEndpoint),this.metadata={},!((o=(i=e==null?void 0:e.commandMetadata)===null||i===void 0?void 0:i.webCommandMetadata)===null||o===void 0)&&o.url&&(this.metadata.url=e.commandMetadata.webCommandMetadata.url),!((r=(s=e==null?void 0:e.commandMetadata)===null||s===void 0?void 0:s.webCommandMetadata)===null||r===void 0)&&r.webPageType&&(this.metadata.page_type=e.commandMetadata.webCommandMetadata.webPageType),!((p=(c=e==null?void 0:e.commandMetadata)===null||c===void 0?void 0:c.webCommandMetadata)===null||p===void 0)&&p.apiUrl?this.metadata.api_url=e.commandMetadata.webCommandMetadata.apiUrl.replace("/youtubei/v1/",""):_&&(this.metadata.api_url=this.getEndpoint(_)),!((m=(f=e==null?void 0:e.commandMetadata)===null||f===void 0?void 0:f.webCommandMetadata)===null||m===void 0)&&m.sendPost&&(this.metadata.send_post=e.commandMetadata.webCommandMetadata.sendPost),e!=null&&e.createPlaylistEndpoint&&e!=null&&e.createPlaylistEndpoint.createPlaylistDialog&&(this.dialog=d.parseItem(e==null?void 0:e.createPlaylistEndpoint.createPlaylistDialog,bh))}getEndpoint(e){switch(e){case"browseEndpoint":return"/browse";case"watchEndpoint":return"/player";case"searchEndpoint":return"/search";case"watchPlaylistEndpoint":return"/next";case"liveChatItemContextMenuEndpoint":return"live_chat/get_item_context_menu"}}call(e,i){if(!e)throw new Error("An active caller must be provided");if(!this.metadata.api_url)throw new Error("Expected an api_url, but none was found, this is a bug.");return e.execute(this.metadata.api_url,Object.assign(Object.assign({},this.payload),i))}toURL(){if(!!this.metadata.url&&!!this.metadata.page_type)return this.metadata.page_type==="WEB_PAGE_TYPE_UNKNOWN"?this.metadata.url:`https://www.youtube.com${this.metadata.url}`}};n(Er,"NavigationEndpoint");Er.type="NavigationEndpoint";var v=Er;var y=class{constructor(e){this.url=e.url,this.width=e.width,this.height=e.height}static fromResponse(e){return!e||!e.thumbnails?[]:e.thumbnails.map(i=>new y(i)).sort((i,o)=>o.width-i.width)}};n(y,"Thumbnail");var Ri=class{constructor(e){var i,o,s,r,c,p;this.text=((i=e.emoji)===null||i===void 0?void 0:i.emojiId)||((s=(o=e.emoji)===null||o===void 0?void 0:o.shortcuts)===null||s===void 0?void 0:s[0])||"",this.emoji={emoji_id:e.emoji.emojiId,shortcuts:((r=e.emoji)===null||r===void 0?void 0:r.shortcuts)||[],search_terms:((c=e.emoji)===null||c===void 0?void 0:c.searchTerms)||[],image:y.fromResponse(e.emoji.image),is_custom:!!(!((p=e.emoji)===null||p===void 0)&&p.isCustomEmoji)}}toString(){return this.text}toHTML(){let e=wh(this.text);return`<img src="${this.emoji.image[0].url}" alt="${e}" title="${e}" style="display: inline-block; vertical-align: text-top; height: var(--yt-emoji-size, 1rem); width: var(--yt-emoji-size, 1rem);" loading="lazy" crossorigin="anonymous" />`}};n(Ri,"EmojiRun");var Mi=class{constructor(e){this.text=e.text,this.bold=Boolean(e.bold),this.italics=Boolean(e.italics),this.strikethrough=Boolean(e.strikethrough),Reflect.has(e,"navigationEndpoint")&&(this.endpoint=new v(e.navigationEndpoint)),this.attachment=e.attachment}toString(){return this.text}toHTML(){let e=[];this.bold&&e.push("b"),this.italics&&e.push("i"),this.strikethrough&&e.push("s");let i=wh(this.text),s=`<span style="white-space: pre-wrap;">${e.map(r=>`<${r}>`).join("")+i+e.map(r=>`</${r}>`).join("")}</span>`;if(this.attachment&&this.attachment.element.type.imageType.image.sources.length){let{url:r}=this.attachment.element.type.imageType.image.sources[0];if(this.endpoint){let c=this.endpoint.toURL();if(c)return`<a href="${c}" class="yt-ch-link" display: block; width: fit-content; font-size: small;><img src="${r}" style="vertical-align: middle; height: ${this.attachment.element.properties.layoutProperties.height.value}px; width: ${this.attachment.element.properties.layoutProperties.width.value}px;">${s}</a>`}}if(this.endpoint){let r=this.endpoint.toURL();if(r)return`<a href="${r}">${s}</a>`}return s}};n(Mi,"TextRun");function wh(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}n(wh,"escape");var l=class{constructor(e){var i,o,s,r;typeof e=="object"&&e!==null&&Reflect.has(e,"runs")&&Array.isArray(e.runs)?(this.runs=e.runs.map(c=>c.emoji?new Ri(c):new Mi(c)),this.text=this.runs.map(c=>c.text).join("")):this.text=e==null?void 0:e.simpleText,typeof e=="object"&&e!==null&&Reflect.has(e,"navigationEndpoint")&&(this.endpoint=new v(e.navigationEndpoint)),typeof e=="object"&&e!==null&&Reflect.has(e,"titleNavigationEndpoint")&&(this.endpoint=new v(e.titleNavigationEndpoint)),this.endpoint||!((o=(i=this.runs)===null||i===void 0?void 0:i[0])===null||o===void 0)&&o.endpoint&&(this.endpoint=(r=(s=this.runs)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.endpoint)}toHTML(){return this.runs?this.runs.map(e=>e.toHTML()).join(""):this.text}isEmpty(){return this.text===void 0}toString(){return this.text||"N/A"}};n(l,"Text");var Pr=class extends a{constructor(e){super(),this.cards=d.parseArray(e.cards),this.header=new l(e.headerText),this.allow_teaser_dismiss=e.allowTeaserDismiss}};n(Pr,"CardCollection");Pr.type="CardCollection";var Th=Pr;var Nr=class extends a{constructor(e){super(),this.elements=d.parseArray(e.elements),this.start_ms=e.startMs}};n(Nr,"Endscreen");Nr.type="Endscreen";var Sh=Nr;var Ar=class extends a{constructor(e){super(),Reflect.has(e,"featuredChannel")&&(this.featured_channel={start_time_ms:e.featuredChannel.startTimeMs,end_time_ms:e.featuredChannel.endTimeMs,watermark:y.fromResponse(e.featuredChannel.watermark),channel_name:e.featuredChannel.channelName,endpoint:new v(e.featuredChannel.navigationEndpoint),subscribe_button:d.parseItem(e.featuredChannel.subscribeButton)}),this.allow_swipe_dismiss=e.allowSwipeDismiss,this.annotation_id=e.annotationId}};n(Ar,"PlayerAnnotationsExpanded");Ar.type="PlayerAnnotationsExpanded";var Ih=Ar;var Rr=class extends a{constructor(e){super(),Reflect.has(e,"captionTracks")&&(this.caption_tracks=e.captionTracks.map(i=>({base_url:i.baseUrl,name:new l(i.name),vss_id:i.vssId,language_code:i.languageCode,kind:i.kind,is_translatable:i.isTranslatable}))),Reflect.has(e,"audioTracks")&&(this.audio_tracks=e.audioTracks.map(i=>({audio_track_id:i.audioTrackId,captions_initial_state:i.captionsInitialState,default_caption_track_index:i.defaultCaptionTrackIndex,has_default_track:i.hasDefaultTrack,visibility:i.visibility,caption_track_indices:i.captionTrackIndices}))),Reflect.has(e,"defaultAudioTrackIndex")&&(this.default_audio_track_index=e.defaultAudioTrackIndex),Reflect.has(e,"translationLanguages")&&(this.translation_languages=e.translationLanguages.map(i=>({language_code:i.languageCode,language_name:new l(i.languageName)})))}};n(Rr,"PlayerCaptionsTracklist");Rr.type="PlayerCaptionsTracklist";var kh=Rr;var Mr=class extends a{constructor(){super()}};n(Mr,"PlayerLiveStoryboardSpec");Mr.type="PlayerLiveStoryboardSpec";var Ch=Mr;var Vr=class extends a{constructor(e){super();let i=e.spec.split("|"),o=new URL(i.shift());this.boards=i.map((s,r)=>{let[c,p,f,m,_,b,w,T]=s.split("#");o.searchParams.set("sigh",T);let I=Math.ceil(parseInt(f,10)/(parseInt(m,10)*parseInt(_,10)));return{template_url:o.toString().replace("$L",r).replace("$N",w),thumbnail_width:parseInt(c,10),thumbnail_height:parseInt(p,10),thumbnail_count:parseInt(f,10),interval:parseInt(b,10),columns:parseInt(m,10),rows:parseInt(_,10),storyboard_count:I}})}};n(Vr,"PlayerStoryboardSpec");Vr.type="PlayerStoryboardSpec";var Sn=Vr;var Or=class extends a{constructor(e){super(),this.text=new l(e.text)}};n(Or,"Message");Or.type="Message";var Je=Or;var Dr=class extends a{constructor(e){super(),this.name=new l(e.authorName),this.photo=y.fromResponse(e.authorPhoto),this.badges=d.parseArray(e.authorBadges)}};n(Dr,"LiveChatParticipant");Dr.type="LiveChatParticipant";var Eh=Dr;var Br=class extends a{constructor(e){super(),this.title=new l(e.title),this.participants=d.parseArray(e.participants,Eh)}};n(Br,"LiveChatParticipantsList");Br.type="LiveChatParticipantsList";var Ph=Br;var Lr=class extends a{constructor(e){super(),Reflect.has(e,"title")&&(this.title=e.title),Reflect.has(e,"icon")&&(this.icon_type=e.icon.iconType),Reflect.has(e,"accessibility")&&(this.label=e.accessibility.accessibilityData.label),Reflect.has(e,"tooltip")&&(this.tooltip=e.tooltip),Reflect.has(e,"subMenuItems")&&(this.sub_menu_items=e.subMenuItems.map(i=>{var o,s;return{title:i.title,selected:i.selected,continuation:(s=(o=i.continuation)===null||o===void 0?void 0:o.reloadContinuationData)===null||s===void 0?void 0:s.continuation,endpoint:new v(i.serviceEndpoint||i.navigationEndpoint),subtitle:i.subtitle||null}}))}};n(Lr,"SortFilterSubMenu");Lr.type="SortFilterSubMenu";var fi=Lr;var Fr=class extends a{constructor(e){super(),this.items=d.parseArray(e.items),this.top_level_buttons=d.parseArray(e.topLevelButtons),Reflect.has(e,"accessibility")&&Reflect.has(e.accessibility,"accessibilityData")&&(this.label=e.accessibility.accessibilityData.label)}get contents(){return this.items}};n(Fr,"Menu");Fr.type="Menu";var H=Fr;var Yr=class extends a{constructor(e){super(),this.overflow_menu=d.parseItem(e.overflowMenu,H),this.collapse_button=d.parseItem(e.collapseButton,k),this.view_selector=d.parseItem(e.viewSelector,fi)}};n(Yr,"LiveChatHeader");Yr.type="LiveChatHeader";var Nh=Yr;var jr=class extends a{constructor(e){super(),this.max_items_to_display=e.maxItemsToDisplay,this.more_comments_below_button=d.parseItem(e.moreCommentsBelowButton,k)}};n(jr,"LiveChatItemList");jr.type="LiveChatItemList";var Ah=jr;var Ur=class extends a{constructor(e){super(),this.text=new l(e.text),this.alert_type=e.type}};n(Ur,"Alert");Ur.type="Alert";var Rh=Ur;var Wr=class extends a{constructor(e){super(),this.title=new l(e.title).toString(),this.form_item_entity_key=e.formItemEntityKey,Reflect.has(e,"selectedIcon")&&(this.selected_icon_type=e.selectedIcon.iconType),Reflect.has(e,"selectedCommand")&&(this.endpoint=new v(e.selectedCommand)),this.selected=!!this.endpoint}};n(Wr,"MusicMultiSelectMenuItem");Wr.type="MusicMultiSelectMenuItem";var Rt=Wr;var Vi=class{constructor(e){var i,o,s,r,c,p;if(this.itag=e.itag,this.mime_type=e.mimeType,this.is_type_otf=e.type==="FORMAT_STREAM_TYPE_OTF",this.bitrate=e.bitrate,this.average_bitrate=e.averageBitrate,this.width=e.width,this.height=e.height,this.init_range=e.initRange?{start:parseInt(e.initRange.start),end:parseInt(e.initRange.end)}:void 0,this.index_range=e.indexRange?{start:parseInt(e.indexRange.start),end:parseInt(e.indexRange.end)}:void 0,this.last_modified=new Date(Math.floor(parseInt(e.lastModified)/1e3)),this.content_length=parseInt(e.contentLength),this.quality=e.quality,this.quality_label=e.qualityLabel,this.fps=e.fps,this.url=e.url,this.cipher=e.cipher,this.signature_cipher=e.signatureCipher,this.audio_quality=e.audioQuality,this.approx_duration_ms=parseInt(e.approxDurationMs),this.audio_sample_rate=parseInt(e.audioSampleRate),this.audio_channels=e.audioChannels,this.loudness_db=e.loudnessDb,this.has_audio=!!e.audioBitrate||!!e.audioQuality,this.has_video=!!e.qualityLabel,this.color_info=e.colorInfo?{primaries:(i=e.colorInfo.primaries)===null||i===void 0?void 0:i.replace("COLOR_PRIMARIES_",""),transfer_characteristics:(o=e.colorInfo.transferCharacteristics)===null||o===void 0?void 0:o.replace("COLOR_TRANSFER_CHARACTERISTICS_",""),matrix_coefficients:(s=e.colorInfo.matrixCoefficients)===null||s===void 0?void 0:s.replace("COLOR_MATRIX_COEFFICIENTS_","")}:void 0,this.has_audio){let f=new URLSearchParams(this.cipher||this.signature_cipher),_=(r=new URLSearchParams(f.get("url")||this.url).get("xtags"))===null||r===void 0?void 0:r.split(":"),b=(c=_==null?void 0:_.find(w=>w.startsWith("acont=")))===null||c===void 0?void 0:c.split("=")[1];this.language=((p=_==null?void 0:_.find(w=>w.startsWith("lang=")))===null||p===void 0?void 0:p.split("=")[1])||null,this.is_dubbed=b==="dubbed",this.is_descriptive=b==="descriptive",this.is_original=b==="original"||!this.is_dubbed||!this.is_descriptive,Reflect.has(e,"audioTrack")&&(this.audio_track={audio_is_default:e.audioTrack.audioIsDefault,display_name:e.audioTrack.displayName,id:e.audioTrack.id})}}decipher(e){if(!e)throw new g("Cannot decipher format, this session appears to have no valid player.");return e.decipher(this.url,this.signature_cipher,this.cipher)}};n(Vi,"Format");var Oi=class{constructor(e){this.id=e.videoId,this.channel_id=e.channelId,this.title=e.title,this.duration=parseInt(e.lengthSeconds),this.keywords=e.keywords,this.is_owner_viewing=!!e.isOwnerViewing,this.short_description=e.shortDescription,this.thumbnail=y.fromResponse(e.thumbnail),this.allow_ratings=!!e.allowRatings,this.view_count=parseInt(e.viewCount),this.author=e.author,this.is_private=!!e.isPrivate,this.is_live=!!e.isLive,this.is_live_content=!!e.isLiveContent,this.is_upcoming=!!e.isUpcoming,this.is_post_live_dvr=!!e.isPostLiveDvr,this.is_crawlable=!!e.isCrawlable}};n(Oi,"VideoDetails");var Pf={};U(Pf,{AccountChannel:()=>Mh,AccountItemSection:()=>Oh,AccountItemSectionHeader:()=>Vh,AccountSectionList:()=>Dh,AddBannerToLiveChatCommand:()=>hy,AddChatItemAction:()=>t_,AddLiveChatTickerItemAction:()=>my,Alert:()=>Rh,AnalyticsMainAppKeyMetrics:()=>Px,AnalyticsRoot:()=>Nx,AnalyticsShortsCarouselCard:()=>Ax,AnalyticsVideo:()=>Fh,AnalyticsVodCarouselCard:()=>Rx,AnchoredSection:()=>cv,AppendContinuationItemsAction:()=>Bh,AudioOnlyPlayability:()=>gh,AuthorCommentBadge:()=>em,AutomixPreviewVideo:()=>Di,BackstageImage:()=>Yh,BackstagePost:()=>Bi,BackstagePostThread:()=>Ox,BrowseFeedActions:()=>Uh,BrowserMediaSession:()=>Dx,Button:()=>k,C4TabbedHeader:()=>kn,CallToActionButton:()=>Bx,Card:()=>Lx,CardCollection:()=>Th,CarouselHeader:()=>Jh,CarouselItem:()=>Fx,CarouselLockup:()=>zh,Channel:()=>Kh,ChannelAboutFullMetadata:()=>$h,ChannelAgeGate:()=>Yx,ChannelFeaturedContent:()=>jx,ChannelHeaderLinks:()=>Wh,ChannelMetadata:()=>qh,ChannelMobileHeader:()=>Ux,ChannelOptions:()=>Xh,ChannelSubMenu:()=>Ma,ChannelThumbnailWithLink:()=>Wx,ChannelVideoPlayer:()=>Hx,Chapter:()=>Qh,ChildVideo:()=>Jx,ChipCloud:()=>ht,ChipCloudChip:()=>be,CollaboratorInfoCardContent:()=>Gx,CollageHeroImage:()=>zx,Comment:()=>An,CommentActionButtons:()=>co,CommentDialog:()=>Bb,CommentReplies:()=>lm,CommentReplyDialog:()=>tm,CommentSimplebox:()=>fm,CommentThread:()=>hm,CommentsEntryPointHeader:()=>pm,CommentsEntryPointTeaser:()=>dm,CommentsHeader:()=>Rn,CommentsSimplebox:()=>cm,CompactChannel:()=>Lb,CompactLink:()=>Mn,CompactMix:()=>Fb,CompactPlaylist:()=>Yb,CompactStation:()=>jb,CompactVideo:()=>Cn,ConfirmDialog:()=>Ub,ContentPreviewImageView:()=>mm,ContinuationItem:()=>De,ConversationBar:()=>Wb,CopyLink:()=>_m,CreatePlaylistDialog:()=>bh,CreatorHeart:()=>jh,CtaGoToCreatorStudio:()=>Mx,DataModelSection:()=>Lh,DecoratedPlayerBar:()=>bm,DefaultPromoPanel:()=>Hb,DidYouMean:()=>ym,DimChatItemAction:()=>_y,DownloadButton:()=>Jb,Dropdown:()=>Tn,DropdownItem:()=>xh,DynamicTextView:()=>wm,Element:()=>Dn,EmergencyOnebox:()=>Gb,EmojiPicker:()=>um,EmojiPickerCategory:()=>zb,EmojiPickerCategoryButton:()=>Kb,EmojiPickerUpsellCategory:()=>$b,EndScreenPlaylist:()=>Sm,EndScreenVideo:()=>Im,Endscreen:()=>Sh,EndscreenElement:()=>qb,EngagementPanelSectionList:()=>Dm,EngagementPanelTitleHeader:()=>km,ExpandableMetadata:()=>Am,ExpandableTab:()=>Yn,ExpandableVideoDescriptionBody:()=>Pm,ExpandedShelfContents:()=>Xb,Factoid:()=>Mm,FeedFilterChipBar:()=>mi,FeedTabbedHeader:()=>Bm,GameCard:()=>Nm,GameDetails:()=>Qb,Grid:()=>go,GridChannel:()=>Lm,GridHeader:()=>Zb,GridMix:()=>ey,GridMovie:()=>ty,GridPlaylist:()=>Fm,GridShow:()=>iy,GridVideo:()=>Um,GuideCollapsibleEntry:()=>oy,GuideCollapsibleSectionEntry:()=>ny,GuideDownloadsEntry:()=>sy,GuideEntry:()=>xo,GuideSection:()=>jn,GuideSubscriptionsSection:()=>Wm,HashtagHeader:()=>Hm,HashtagTile:()=>ry,HeatMarker:()=>vm,Heatmap:()=>gm,HeroPlaylistThumbnail:()=>ay,HighlightsCarousel:()=>wl,HistorySuggestion:()=>uy,HorizontalCardList:()=>Li,HorizontalList:()=>ly,HorizontalMovieList:()=>cy,IconLink:()=>Gm,IncludingResultsFor:()=>dy,InfoPanelContainer:()=>py,InfoPanelContent:()=>zm,InfoRow:()=>Gh,InteractiveTabbedHeader:()=>Km,ItemSection:()=>ye,ItemSectionHeader:()=>$m,ItemSectionTab:()=>qm,ItemSectionTabbedHeader:()=>Xm,KidsCategoriesHeader:()=>dv,KidsCategoryTab:()=>Qn,KidsHomeScreen:()=>pv,LikeButton:()=>fy,LiveChat:()=>Qm,LiveChatActionPanel:()=>o_,LiveChatAuthorBadge:()=>jy,LiveChatAutoModMessage:()=>vy,LiveChatBanner:()=>e_,LiveChatBannerHeader:()=>Zm,LiveChatBannerPoll:()=>gy,LiveChatDialog:()=>Uy,LiveChatHeader:()=>Nh,LiveChatItemList:()=>Ah,LiveChatMembershipItem:()=>xy,LiveChatMessageInput:()=>Wy,LiveChatPaidMessage:()=>by,LiveChatPaidSticker:()=>yy,LiveChatParticipant:()=>Eh,LiveChatParticipantsList:()=>Ph,LiveChatPlaceholderItem:()=>wy,LiveChatProductItem:()=>Ty,LiveChatRestrictedParticipation:()=>Sy,LiveChatTextMessage:()=>Iy,LiveChatTickerPaidMessageItem:()=>i_,LiveChatTickerPaidStickerItem:()=>ky,LiveChatTickerSponsorItem:()=>Cy,LiveChatViewerEngagementMessage:()=>Ey,MacroMarkersInfoItem:()=>Cm,MacroMarkersList:()=>Em,MacroMarkersListItem:()=>Bn,MarkChatItemAsDeletedAction:()=>Ny,MarkChatItemsByAuthorAsDeletedAction:()=>Ay,Menu:()=>H,MenuNavigationItem:()=>Hy,MenuServiceItem:()=>Un,MenuServiceItemDownload:()=>Jy,MerchandiseItem:()=>Ky,MerchandiseShelf:()=>p_,Message:()=>Je,MetadataBadge:()=>nt,MetadataRow:()=>$y,MetadataRowContainer:()=>f_,MetadataRowHeader:()=>qy,MetadataScreen:()=>Xy,MicroformatData:()=>Zt,Mix:()=>Qy,Movie:()=>Zy,MovingThumbnail:()=>ew,MultiMarkersPlayerBar:()=>xm,MultiPageMenu:()=>Gy,MultiPageMenuNotificationSection:()=>zy,MusicCardShelf:()=>v_,MusicCardShelfHeaderBasic:()=>h_,MusicCarouselShelf:()=>Re,MusicCarouselShelfBasicHeader:()=>g_,MusicDescriptionShelf:()=>yo,MusicDetailHeader:()=>wo,MusicDownloadStateBadge:()=>lw,MusicEditablePlaylistDetailHeader:()=>y_,MusicElementHeader:()=>ad,MusicHeader:()=>ji,MusicImmersiveHeader:()=>w_,MusicInlineBadge:()=>m_,MusicItemThumbnailOverlay:()=>Fi,MusicLargeCardItemCarousel:()=>cw,MusicMenuItemDivider:()=>l_,MusicMultiSelectMenu:()=>c_,MusicMultiSelectMenuItem:()=>Rt,MusicNavigationButton:()=>Wn,MusicPlayButton:()=>__,MusicPlaylistShelf:()=>To,MusicQueue:()=>Jn,MusicResponsiveListItem:()=>Yi,MusicResponsiveListItemFixedColumn:()=>x_,MusicResponsiveListItemFlexColumn:()=>b_,MusicShelf:()=>Ie,MusicSideAlignedItem:()=>S_,MusicSortFilterButton:()=>yd,MusicTastebuilderShelf:()=>k_,MusicTastebuilderShelfThumbnail:()=>I_,MusicThumbnail:()=>ei,MusicTwoRowItem:()=>Hn,MusicVisualHeader:()=>C_,NavigationEndpoint:()=>v,Notification:()=>E_,OpenPopupAction:()=>yh,PageHeader:()=>N_,PageHeaderView:()=>P_,PageIntroduction:()=>A_,PdgCommentChip:()=>im,PlayerAnnotationsExpanded:()=>Ih,PlayerCaptionsTracklist:()=>kh,PlayerErrorMessage:()=>dw,PlayerLegacyDesktopYpcOffer:()=>pw,PlayerLegacyDesktopYpcTrailer:()=>Md,PlayerLiveStoryboardSpec:()=>Ch,PlayerMicroformat:()=>Vt,PlayerOverlay:()=>Ui,PlayerOverlayAutoplay:()=>M_,PlayerStoryboardSpec:()=>Sn,Playlist:()=>Qt,PlaylistCustomThumbnail:()=>Vn,PlaylistHeader:()=>O_,PlaylistInfoCardContent:()=>fw,PlaylistMetadata:()=>D_,PlaylistPanel:()=>ii,PlaylistPanelVideo:()=>_i,PlaylistPanelVideoWrapper:()=>T_,PlaylistSidebar:()=>hw,PlaylistSidebarPrimaryInfo:()=>B_,PlaylistSidebarSecondaryInfo:()=>L_,PlaylistVideo:()=>F_,PlaylistVideoList:()=>mw,PlaylistVideoThumbnail:()=>On,Poll:()=>_w,PollHeader:()=>Py,Post:()=>Y_,PostMultiImage:()=>vw,ProfileColumn:()=>gw,ProfileColumnStats:()=>j_,ProfileColumnStatsEntry:()=>xw,ProfileColumnUserInfo:()=>U_,Quiz:()=>bw,RecognitionShelf:()=>yw,ReelItem:()=>W_,ReelShelf:()=>H_,RelatedChipCloud:()=>J_,RemoveBannerForLiveChatCommand:()=>Ry,RemoveChatItemAction:()=>My,RemoveChatItemByAuthorAction:()=>Vy,ReplaceChatItemAction:()=>Oy,ReplayChatItemAction:()=>Dy,RichGrid:()=>Wi,RichItem:()=>ww,RichListHeader:()=>Tw,RichMetadata:()=>up,RichMetadataRow:()=>cp,RichSection:()=>Sw,RichShelf:()=>G_,SearchBox:()=>Iw,SearchFilter:()=>z_,SearchFilterGroup:()=>Gn,SearchFilterOptionsDialog:()=>kw,SearchHeader:()=>K_,SearchRefinementCard:()=>mo,SearchSubMenu:()=>$_,SearchSuggestion:()=>Jm,SearchSuggestionsSection:()=>q_,SecondarySearchContainer:()=>Cw,SectionList:()=>oe,SegmentedLikeDislikeButton:()=>So,SettingBoolean:()=>Ew,SettingsCheckbox:()=>X_,SettingsOptions:()=>Kn,SettingsSidebar:()=>Q_,SettingsSwitch:()=>zn,SharedPost:()=>Z_,Shelf:()=>$n,ShowCustomThumbnail:()=>Ym,ShowLiveChatActionPanelAction:()=>By,ShowLiveChatDialogAction:()=>Ly,ShowLiveChatTooltipCommand:()=>Fy,ShowingResultsFor:()=>ev,SimpleCardContent:()=>Pw,SimpleCardTeaser:()=>Nw,SimpleMenuHeader:()=>d_,SimpleTextSection:()=>Aw,SingleActionEmergencySupport:()=>Rw,SingleColumnBrowseResults:()=>oi,SingleColumnMusicWatchNextResults:()=>Mw,SingleHeroImage:()=>Vw,SlimOwner:()=>Ow,SlimVideoMetadata:()=>tv,SortFilterSubMenu:()=>fi,SponsorCommentBadge:()=>om,StatRow:()=>Vx,StructuredDescriptionContent:()=>vo,SubFeedOption:()=>iv,SubFeedSelector:()=>Dw,SubscribeButton:()=>Ge,SubscriptionNotificationToggleButton:()=>Hh,Tab:()=>we,Tabbed:()=>Bw,TabbedSearchResults:()=>ov,TextHeader:()=>Lw,ThumbnailLandscapePortrait:()=>Fw,ThumbnailOverlayBottomPanel:()=>jm,ThumbnailOverlayEndorsement:()=>Yw,ThumbnailOverlayHoverText:()=>jw,ThumbnailOverlayInlineUnplayable:()=>Uw,ThumbnailOverlayLoadingPreview:()=>Ww,ThumbnailOverlayNowPlaying:()=>Hw,ThumbnailOverlayPinking:()=>Jw,ThumbnailOverlayPlaybackStatus:()=>Gw,ThumbnailOverlayResumePlayback:()=>zw,ThumbnailOverlaySidePanel:()=>Kw,ThumbnailOverlayTimeStatus:()=>_o,ThumbnailOverlayToggleButton:()=>$w,TimedMarkerDecoration:()=>qw,TitleAndButtonListHeader:()=>Xw,ToggleButton:()=>Ue,ToggleMenuServiceItem:()=>Qw,Tooltip:()=>Zw,TopicChannelDetails:()=>eT,TwoColumnBrowseResults:()=>Hi,TwoColumnSearchResults:()=>nv,TwoColumnWatchNextResults:()=>qn,UniversalWatchCard:()=>rv,UpdateDateTextAction:()=>n_,UpdateDescriptionAction:()=>s_,UpdateLiveChatPollAction:()=>Yy,UpdateTitleAction:()=>r_,UpdateToggleButtonTextAction:()=>a_,UpdateViewershipAction:()=>u_,UpsellDialog:()=>tT,VerticalList:()=>iT,VerticalWatchCardList:()=>oT,Video:()=>Ln,VideoCard:()=>Rm,VideoDescriptionHeader:()=>Vm,VideoDescriptionInfocardsSection:()=>Om,VideoDescriptionMusicSection:()=>Fn,VideoInfoCardContent:()=>nT,VideoOwner:()=>Xn,VideoPrimaryInfo:()=>av,VideoSecondaryInfo:()=>xf,WatchCardCompactVideo:()=>uv,WatchCardHeroVideo:()=>rT,WatchCardRichHeader:()=>aT,WatchCardSectionSequence:()=>uT,WatchNextEndScreen:()=>V_,WatchNextTabbedResults:()=>lv,YpcTrailer:()=>R_});var Hr=class extends a{constructor(e){super(),this.title=new l(e.title),this.endpoint=new v(e.navigationEndpoint)}};n(Hr,"AccountChannel");Hr.type="AccountChannel";var Mh=Hr;var Jr=class extends a{constructor(e){super(),this.title=new l(e.title)}};n(Jr,"AccountItemSectionHeader");Jr.type="AccountItemSectionHeader";var Vh=Jr;var Gr=class extends a{constructor(e){super(),this.account_name=new l(e.accountName),this.account_photo=y.fromResponse(e.accountPhoto),this.is_selected=!!e.isSelected,this.is_disabled=!!e.isDisabled,this.has_channel=!!e.hasChannel,this.endpoint=new v(e.serviceEndpoint),this.account_byline=new l(e.accountByline)}};n(Gr,"AccountItem");Gr.type="AccountItem";var zr=class extends a{constructor(e){super(),this.contents=pe(e.contents.map(i=>new Gr(i.accountItem))),this.header=d.parseItem(e.header,Vh)}};n(zr,"AccountItemSection");zr.type="AccountItemSection";var Oh=zr;var Kr=class extends a{constructor(e){super(),this.contents=d.parseItem(e.contents[0],Oh),this.footers=d.parseItem(e.footers[0],Mh)}};n(Kr,"AccountSectionList");Kr.type="AccountSectionList";var Dh=Kr;var $r=class extends a{constructor(e){super(),this.items=d.parse(e.continuationItems),this.target=e.target}};n($r,"AppendContinuationItemsAction");$r.type="AppendContinuationItemsAction";var Bh=$r;var qr=class extends a{constructor(e){super(),this.title=e.title,this.subtitle=e.subtitle,this.metric_value=e.metricValue,this.comparison_indicator=e.comparisonIndicator;let i=e.seriesConfiguration.lineSeries;this.series_configuration={line_series:{lines_data:{x:i.linesData[0].x,y:i.linesData[0].y,style:{line_width:i.linesData[0].style.lineWidth,line_color:i.linesData[0].style.lineColor}},domain_axis:{tick_values:i.domainAxis.tickValues,custom_formatter:i.domainAxis.customFormatter},measure_axis:{tick_values:i.measureAxis.tickValues,custom_formatter:i.measureAxis.customFormatter}}}}};n(qr,"DataModelSection");qr.type="DataModelSection";var Lh=qr;var Xr=class extends a{constructor(e){super(),this.period=e.cardData.periodLabel;let i=e.cardData.sections[0].analyticsKeyMetricsData;this.sections=i.dataModel.sections.map(o=>new Lh(o))}};n(Xr,"AnalyticsMainAppKeyMetrics");Xr.type="AnalyticsMainAppKeyMetrics";var Px=Xr;var Qr=class extends a{constructor(e){super();let i=e.analyticsTableCarouselData.data.tableCards;this.title=e.analyticsTableCarouselData.carouselTitle,this.selected_card_index_key=e.analyticsTableCarouselData.selectedCardIndexKey,this.table_cards=i.map(o=>({title:o.cardData.title,rows:o.cardData.rows.map(s=>({label:s.label,display_value:s.displayValue,display_value_a11y:s.displayValueA11y,bar_ratio:s.barRatio,bar_color:s.barColor,bar_opacity:s.barOpacity}))})),this.use_main_app_specs=e.analyticsTableCarouselData.useMainAppSpecs}};n(Qr,"AnalyticsRoot");Qr.type="AnalyticsRoot";var Nx=Qr;var Zr=class extends a{constructor(e){super(),this.title=e.title,this.shorts=e.shortsCarouselData.shorts.map(i=>({description:i.shortsDescription,thumbnail_url:i.thumbnailUrl,endpoint:new v(i.videoEndpoint)}))}};n(Zr,"AnalyticsShortsCarouselCard");Zr.type="AnalyticsShortsCarouselCard";var Ax=Zr;var ea=class extends a{constructor(e){super(),this.title=e.videoTitle,this.metadata={views:e.videoDescription.split("\xB7")[0].trim(),published:e.videoDescription.split("\xB7")[1].trim(),thumbnails:y.fromResponse(e.thumbnailDetails),duration:e.formattedLength,is_short:e.isShort}}};n(ea,"AnalyticsVideo");ea.type="AnalyticsVideo";var Fh=ea;var ta=class extends a{constructor(e){super(),this.title=e.title,Reflect.has(e,"noDataMessage")&&(this.no_data_message=e.noDataMessage),Reflect.has(e,"videoCarouselData")&&Reflect.has(e.videoCarouselData,"videos")&&(this.videos=e.videoCarouselData.videos.map(i=>new Fh(i)))}};n(ta,"AnalyticsVodCarouselCard");ta.type="AnalyticsVodCarouselCard";var Rx=ta;var ia=class extends a{constructor(e){super(),this.title=e.buttonLabel,this.use_new_specs=e.useNewSpecs}};n(ia,"CtaGoToCreatorStudio");ia.type="CtaGoToCreatorStudio";var Mx=ia;var oa=class extends a{constructor(e){super(),this.title=new l(e.title),this.contents=new l(e.contents)}};n(oa,"StatRow");oa.type="StatRow";var Vx=oa;var na=class extends a{constructor(e){var i,o;super(),!((o=(i=e==null?void 0:e.content)===null||i===void 0?void 0:i.automixPlaylistVideoRenderer)===null||o===void 0)&&o.navigationEndpoint&&(this.playlist_video={endpoint:new v(e.content.automixPlaylistVideoRenderer.navigationEndpoint)})}};n(na,"AutomixPreviewVideo");na.type="AutomixPreviewVideo";var Di=na;var sa=class extends a{constructor(e){super(),this.image=y.fromResponse(e.image),this.endpoint=new v(e.command)}};n(sa,"BackstageImage");sa.type="BackstageImage";var Yh=sa;var ra=class extends a{constructor(e){var i,o,s,r,c,p,f,m;super(),this.text=new l(e.defaultText),this.toggled_text=new l(e.toggledText),this.tooltip=e.defaultTooltip,this.toggled_tooltip=e.toggledTooltip,this.is_toggled=e.isToggled,this.is_disabled=e.isDisabled,this.icon_type=e.defaultIcon.iconType;let _=((s=(o=(i=e==null?void 0:e.defaultText)===null||i===void 0?void 0:i.accessibility)===null||o===void 0?void 0:o.accessibilityData)===null||s===void 0?void 0:s.label)||((c=(r=e==null?void 0:e.accessibilityData)===null||r===void 0?void 0:r.accessibilityData)===null||c===void 0?void 0:c.label)||((p=e==null?void 0:e.accessibility)===null||p===void 0?void 0:p.label);this.icon_type=="LIKE"&&(this.like_count=parseInt(_.replace(/\D/g,"")),this.short_like_count=new l(e.defaultText).toString()),this.endpoint=!((m=(f=e.defaultServiceEndpoint)===null||f===void 0?void 0:f.commandExecutorCommand)===null||m===void 0)&&m.commands?new v(e.defaultServiceEndpoint.commandExecutorCommand.commands.pop()):new v(e.defaultServiceEndpoint),this.toggled_endpoint=new v(e.toggledServiceEndpoint),Reflect.has(e,"toggleButtonSupportedData")&&Reflect.has(e.toggleButtonSupportedData,"toggleButtonIdData")&&(this.button_id=e.toggleButtonSupportedData.toggleButtonIdData.id),Reflect.has(e,"targetId")&&(this.target_id=e.targetId)}};n(ra,"ToggleButton");ra.type="ToggleButton";var Ue=ra;var aa=class extends a{constructor(e){var i,o;super(),this.creator_thumbnail=y.fromResponse(e.creatorThumbnail),Reflect.has(e,"heartIcon")&&Reflect.has(e.heartIcon,"iconType")&&(this.heart_icon_type=e.heartIcon.iconType),this.heart_color={basic_color_palette_data:{foreground_title_color:(o=(i=e.heartColor)===null||i===void 0?void 0:i.basicColorPaletteData)===null||o===void 0?void 0:o.foregroundTitleColor}},this.hearted_tooltip=e.heartedTooltip,this.is_hearted=e.isHearted,this.is_enabled=e.isEnabled,this.kennedy_heart_color_string=e.kennedyHeartColorString}};n(aa,"CreatorHeart");aa.type="CreatorHeart";var jh=aa;var ua=class extends a{constructor(e){super(),this.like_button=d.parseItem(e.likeButton,Ue),this.dislike_button=d.parseItem(e.dislikeButton,Ue),this.reply_button=d.parseItem(e.replyButton,k),this.creator_heart=d.parseItem(e.creatorHeart,jh)}};n(ua,"CommentActionButtons");ua.type="CommentActionButtons";var co=ua;var la=class extends a{constructor(e){super(),this.id=e.postId,this.author=new F(Object.assign(Object.assign({},e.authorText),{navigationEndpoint:e.authorEndpoint}),null,e.authorThumbnail),this.content=new l(e.contentText),this.published=new l(e.publishedTimeText),Reflect.has(e,"pollStatus")&&(this.poll_status=e.pollStatus),Reflect.has(e,"voteStatus")&&(this.vote_status=e.voteStatus),Reflect.has(e,"voteCount")&&(this.vote_count=new l(e.voteCount)),Reflect.has(e,"actionMenu")&&(this.menu=d.parseItem(e.actionMenu,H)),Reflect.has(e,"actionButtons")&&(this.action_buttons=d.parseItem(e.actionButtons,co)),Reflect.has(e,"voteButton")&&(this.vote_button=d.parseItem(e.voteButton,co)),Reflect.has(e,"navigationEndpoint")&&(this.endpoint=new v(e.navigationEndpoint)),Reflect.has(e,"backstageAttachment")&&(this.attachment=d.parseItem(e.backstageAttachment)),this.surface=e.surface}};n(la,"BackstagePost");la.type="BackstagePost";var Bi=la;var ca=class extends a{constructor(e){super(),this.post=d.parseItem(e.post)}};n(ca,"BackstagePostThread");ca.type="BackstagePostThread";var Ox=ca;var da=class extends a{constructor(e){super(),this.contents=d.parseArray(e.contents)}};n(da,"BrowseFeedActions");da.type="BrowseFeedActions";var Uh=da;var pa=class extends a{constructor(e){super(),this.album=new l(e.album),this.thumbnails=y.fromResponse(e.thumbnailDetails)}};n(pa,"BrowserMediaSession");pa.type="BrowserMediaSession";var Dx=pa;var In=class extends a{constructor(e){super(),this.endpoint=new v(e.navigationEndpoint),this.icon=y.fromResponse(e.icon),this.title=new l(e.title)}};n(In,"HeaderLink");In.type="HeaderLink";var fa=class extends a{constructor(e){var i,o;super(),this.primary=pe(((i=e.primaryLinks)===null||i===void 0?void 0:i.map(s=>new In(s)))||[]),this.secondary=pe(((o=e.secondaryLinks)===null||o===void 0?void 0:o.map(s=>new In(s)))||[])}};n(fa,"ChannelHeaderLinks");fa.type="ChannelHeaderLinks";var Wh=fa;var ha=class extends a{constructor(e){super(),this.states=e.states.map(i=>({id:i.stateId,next_id:i.nextStateId,state:d.parse(i.state)})),this.current_state_id=e.currentStateId,this.target_id=e.targetId}};n(ha,"SubscriptionNotificationToggleButton");ha.type="SubscriptionNotificationToggleButton";var Hh=ha;var ma=class extends a{constructor(e){var i,o;super(),this.title=new l(e.buttonText),this.subscribed=e.subscribed,this.enabled=e.enabled,this.item_type=e.type,this.channel_id=e.channelId,this.show_preferences=e.showPreferences,this.subscribed_text=new l(e.subscribedButtonText),this.unsubscribed_text=new l(e.unsubscribedButtonText),this.notification_preference_button=d.parseItem(e.notificationPreferenceButton,Hh),this.endpoint=new v(((i=e.serviceEndpoints)===null||i===void 0?void 0:i[0])||((o=e.onSubscribeEndpoints)===null||o===void 0?void 0:o[0]))}};n(ma,"SubscribeButton");ma.type="SubscribeButton";var Ge=ma;var _a=class extends a{constructor(e){super(),this.author=new F({simpleText:e.title,navigationEndpoint:e.navigationEndpoint},e.badges,e.avatar),Reflect.has(e,"banner")&&(this.banner=y.fromResponse(e.banner)),Reflect.has(e,"tv_banner")&&(this.tv_banner=y.fromResponse(e.tvBanner)),Reflect.has(e,"mobile_banner")&&(this.mobile_banner=y.fromResponse(e.mobileBanner)),Reflect.has(e,"subscriberCountText")&&(this.subscribers=new l(e.subscriberCountText)),Reflect.has(e,"videosCountText")&&(this.videos_count=new l(e.videosCountText)),Reflect.has(e,"sponsorButton")&&(this.sponsor_button=d.parseItem(e.sponsorButton,k)),Reflect.has(e,"subscribeButton")&&(this.subscribe_button=d.parseItem(e.subscribeButton,[Ge,k])),Reflect.has(e,"headerLinks")&&(this.header_links=d.parseItem(e.headerLinks,Wh)),Reflect.has(e,"channelHandleText")&&(this.channel_handle=new l(e.channelHandleText)),Reflect.has(e,"channelId")&&(this.channel_id=e.channelId)}};n(_a,"C4TabbedHeader");_a.type="C4TabbedHeader";var kn=_a;var va=class extends a{constructor(e){super(),this.label=new l(e.label),this.icon_type=e.icon.iconType,this.style=e.style}};n(va,"CallToActionButton");va.type="CallToActionButton";var Bx=va;var ga=class extends a{constructor(e){super(),this.teaser=d.parseItem(e.teaser),this.content=d.parseItem(e.content),Reflect.has(e,"cardId")&&(this.card_id=e.cardId),Reflect.has(e,"feature")&&(this.feature=e.feature),this.cue_ranges=e.cueRanges.map(i=>({start_card_active_ms:i.startCardActiveMs,end_card_active_ms:i.endCardActiveMs,teaser_duration_ms:i.teaserDurationMs,icon_after_teaser_ms:i.iconAfterTeaserMs}))}};n(ga,"Card");ga.type="Card";var Lx=ga;var xa=class extends a{constructor(e){super(),this.contents=d.parseArray(e.contents)}};n(xa,"CarouselHeader");xa.type="CarouselHeader";var Jh=xa;var ba=class extends a{constructor(e){super(),this.items=d.parseArray(e.carouselItems),this.background_color=e.backgroundColor,this.layout_style=e.layoutStyle,this.pagination_thumbnails=y.fromResponse(e.paginationThumbnails),this.paginator_alignment=e.paginatorAlignment}get contents(){return this.items}};n(ba,"CarouselItem");ba.type="CarouselItem";var Fx=ba;var ya=class extends a{constructor(e){super(),this.title=new l(e.title),Reflect.has(e,"defaultMetadata")&&(this.default_metadata=new l(e.defaultMetadata)),Reflect.has(e,"expandedMetadata")&&(this.expanded_metadata=new l(e.expandedMetadata)),Reflect.has(e,"infoRowExpandStatusKey")&&(this.info_row_expand_status_key=e.infoRowExpandStatusKey)}};n(ya,"InfoRow");ya.type="InfoRow";var Gh=ya;var wa=class extends a{constructor(e){super(),Reflect.has(e,"icon")&&(this.icon_type=e.icon.iconType),Reflect.has(e,"style")&&(this.style=e.style),Reflect.has(e,"label")&&(this.label=e.label),(Reflect.has(e,"tooltip")||Reflect.has(e,"iconTooltip"))&&(this.tooltip=e.tooltip||e.iconTooltip)}};n(wa,"MetadataBadge");wa.type="MetadataBadge";var nt=wa;var Ta=class extends a{constructor(e){super(),this.id=e.videoId,this.thumbnails=y.fromResponse(e.thumbnail)||null,Reflect.has(e,"richThumbnail")&&(this.rich_thumbnail=d.parse(e.richThumbnail)),this.title=new l(e.title),this.author=new F(e.longBylineText,e.ownerBadges,e.channelThumbnail),this.view_count=new l(e.viewCountText),this.short_view_count=new l(e.shortViewCountText),this.published=new l(e.publishedTimeText),this.badges=d.parseArray(e.badges,nt),this.duration={text:new l(e.lengthText).toString(),seconds:ze(new l(e.lengthText).toString())},this.thumbnail_overlays=d.parseArray(e.thumbnailOverlays),this.endpoint=new v(e.navigationEndpoint),this.menu=d.parseItem(e.menu,H)}get best_thumbnail(){return this.thumbnails[0]}get is_fundraiser(){return this.badges.some(e=>e.label==="Fundraiser")}get is_live(){return this.badges.some(e=>{if(e.style==="BADGE_STYLE_TYPE_LIVE_NOW"||e.label==="LIVE")return!0})}get is_new(){return this.badges.some(e=>e.label==="New")}get is_premiere(){return this.badges.some(e=>e.style==="PREMIERE")}};n(Ta,"CompactVideo");Ta.type="CompactVideo";var Cn=Ta;var Sa=class extends a{constructor(e){super(),this.info_rows=d.parseArray(e.infoRows,Gh),this.video_lockup=d.parseItem(e.videoLockup,Cn)}};n(Sa,"CarouselLockup");Sa.type="CarouselLockup";var zh=Sa;var Ia=class extends a{constructor(e){super(),this.id=e.channelId,this.author=new F(Object.assign(Object.assign({},e.title),{navigationEndpoint:e.navigationEndpoint}),e.ownerBadges,e.thumbnail),this.subscriber_count=new l(e.subscriberCountText),this.video_count=new l(e.videoCountText),this.long_byline=new l(e.longBylineText),this.short_byline=new l(e.shortBylineText),this.endpoint=new v(e.navigationEndpoint),this.subscribe_button=d.parseItem(e.subscribeButton,[Ge,k]),this.description_snippet=new l(e.descriptionSnippet)}get subscribers(){return this.subscriber_count}get videos(){return this.video_count}};n(Ia,"Channel");Ia.type="Channel";var Kh=Ia;var ka=class extends a{constructor(e){var i,o;super(),this.id=e.channelId,this.name=new l(e.title),this.avatar=y.fromResponse(e.avatar),this.canonical_channel_url=e.canonicalChannelUrl,this.primary_links=(o=(i=e.primaryLinks)===null||i===void 0?void 0:i.map(s=>({endpoint:new v(s.navigationEndpoint),icon:y.fromResponse(s.icon),title:new l(s.title)})))!==null&&o!==void 0?o:[],this.view_count=new l(e.viewCountText),this.joined_date=new l(e.joinedDateText),this.description=new l(e.description),this.email_reveal=new v(e.onBusinessEmailRevealClickCommand),this.can_reveal_email=!e.signInForBusinessEmail,this.country=new l(e.country),this.buttons=d.parseArray(e.actionButtons,k)}get views(){return this.view_count}get joined(){return this.joined_date}};n(ka,"ChannelAboutFullMetadata");ka.type="ChannelAboutFullMetadata";var $h=ka;var Ca=class extends a{constructor(e){super(),this.channel_title=e.channelTitle,this.avatar=y.fromResponse(e.avatar),this.header=new l(e.header),this.main_text=new l(e.mainText),this.sign_in_button=W.parseItem(e.signInButton,k),this.secondary_text=new l(e.secondaryText)}};n(Ca,"ChannelAgeGate");Ca.type="ChannelAgeGate";var Yx=Ca;var Ea=class extends a{constructor(e){super(),this.title=new l(e.title),this.items=d.parseArray(e.items)}};n(Ea,"ChannelFeaturedContent");Ea.type="ChannelFeaturedContent";var jx=Ea;var Pa=class extends a{constructor(e){super(),this.title=e.title,this.description=e.description,this.url=e.channelUrl,this.rss_url=e.rssUrl,this.vanity_channel_url=e.vanityChannelUrl,this.external_id=e.externalId,this.is_family_safe=e.isFamilySafe,this.keywords=e.keywords,this.avatar=y.fromResponse(e.avatar),this.available_countries=e.availableCountryCodes,this.android_deep_link=e.androidDeepLink,this.android_appindexing_link=e.androidAppindexingLink,this.ios_appindexing_link=e.iosAppindexingLink}};n(Pa,"ChannelMetadata");Pa.type="ChannelMetadata";var qh=Pa;var Na=class extends a{constructor(e){super(),this.title=new l(e.title)}};n(Na,"ChannelMobileHeader");Na.type="ChannelMobileHeader";var Ux=Na;var Aa=class extends a{constructor(e){super(),this.avatar=y.fromResponse(e.avatar),this.endpoint=new v(e.avatarEndpoint),this.name=e.name,this.links=e.links.map(i=>new l(i))}};n(Aa,"ChannelOptions");Aa.type="ChannelOptions";var Xh=Aa;var Ra=class extends a{constructor(e){super(),this.content_type_sub_menu_items=e.contentTypeSubMenuItems.map(i=>({endpoint:new v(i.navigationEndpoint||i.endpoint),selected:i.selected,title:i.title})),this.sort_setting=d.parseItem(e.sortSetting)}};n(Ra,"ChannelSubMenu");Ra.type="ChannelSubMenu";var Ma=Ra;var Va=class extends a{constructor(e){var i,o;super(),this.thumbnails=y.fromResponse(e.thumbnail),this.endpoint=new v(e.navigationEndpoint),this.label=(o=(i=e.accessibility)===null||i===void 0?void 0:i.accessibilityData)===null||o===void 0?void 0:o.label}};n(Va,"ChannelThumbnailWithLink");Va.type="ChannelThumbnailWithLink";var Wx=Va;var Oa=class extends a{constructor(e){super(),this.id=e.videoId,this.title=new l(e.title),this.description=new l(e.description),this.view_count=new l(e.viewCountText),this.published_time=new l(e.publishedTimeText)}get views(){return this.view_count}get published(){return this.published_time}};n(Oa,"ChannelVideoPlayer");Oa.type="ChannelVideoPlayer";var Hx=Oa;var Da=class extends a{constructor(e){super(),this.title=new l(e.title),this.time_range_start_millis=e.timeRangeStartMillis,this.thumbnail=y.fromResponse(e.thumbnail)}};n(Da,"Chapter");Da.type="Chapter";var Qh=Da;var Ba=class extends a{constructor(e){super(),this.id=e.videoId,this.title=new l(e.title),this.duration={text:e.lengthText.simpleText,seconds:ze(e.lengthText.simpleText)},this.endpoint=new v(e.navigationEndpoint)}};n(Ba,"ChildVideo");Ba.type="ChildVideo";var Jx=Ba;var La=class extends a{constructor(e){super(),this.is_selected=e.isSelected,Reflect.has(e,"navigationEndpoint")&&(this.endpoint=new v(e.navigationEndpoint)),this.text=new l(e.text).toString()}};n(La,"ChipCloudChip");La.type="ChipCloudChip";var be=La;var Fa=class extends a{constructor(e){super(),this.chips=d.parseArray(e.chips,be),this.next_button=d.parseItem(e.nextButton,k),this.previous_button=d.parseItem(e.previousButton,k),this.horizontal_scrollable=e.horizontalScrollable}};n(Fa,"ChipCloud");Fa.type="ChipCloud";var ht=Fa;var Ya=class extends a{constructor(e){super(),this.channel_avatar=y.fromResponse(e.channelAvatar),this.custom_text=new l(e.customText),this.channel_name=new l(e.channelName),this.subscriber_count=new l(e.subscriberCountText),this.endpoint=new v(e.endpoint)}};n(Ya,"CollaboratorInfoCardContent");Ya.type="CollaboratorInfoCardContent";var Gx=Ya;var ja=class extends a{constructor(e){super(),this.left=y.fromResponse(e.leftThumbnail),this.top_right=y.fromResponse(e.topRightThumbnail),this.bottom_right=y.fromResponse(e.bottomRightThumbnail),this.endpoint=new v(e.navigationEndpoint)}};n(ja,"CollageHeroImage");ja.type="CollageHeroImage";var zx=ja;var Zh,Ua=class extends a{constructor(e){super(),Zh.set(this,void 0),Reflect.has(e,"icon")&&Reflect.has(e.icon,"iconType")&&(this.icon_type=e.icon.iconType),this.tooltip=e.iconTooltip,this.tooltip==="Verified"&&(this.style="BADGE_STYLE_TYPE_VERIFIED")&&(e.style="BADGE_STYLE_TYPE_VERIFIED"),S(this,Zh,e,"f")}get orig_badge(){return u(this,Zh,"f")}};n(Ua,"AuthorCommentBadge");Zh=new WeakMap;Ua.type="AuthorCommentBadge";var em=Ua;var Wa=class extends a{constructor(e){super(),this.reply_button=d.parseItem(e.replyButton,k),this.cancel_button=d.parseItem(e.cancelButton,k),this.author_thumbnail=y.fromResponse(e.authorThumbnail),this.placeholder=new l(e.placeholderText),this.error_message=new l(e.errorMessage)}};n(Wa,"CommentReplyDialog");Wa.type="CommentReplyDialog";var tm=Wa;var Ha=class extends a{constructor(e){var i,o;super(),this.text=new l(e.chipText),this.color_pallette={background_color:(i=e.chipColorPalette)===null||i===void 0?void 0:i.backgroundColor,foreground_title_color:(o=e.chipColorPalette)===null||o===void 0?void 0:o.foregroundTitleColor},Reflect.has(e,"chipIcon")&&Reflect.has(e.chipIcon,"iconType")&&(this.icon_type=e.chipIcon.iconType)}};n(Ha,"PdgCommentChip");Ha.type="PdgCommentChip";var im=Ha;var Ja=class extends a{constructor(e){super(),this.custom_badge=y.fromResponse(e.customBadge),this.tooltip=e.tooltip}};n(Ja,"SponsorCommentBadge");Ja.type="SponsorCommentBadge";var om=Ja;var N;(function(t){t[t.Varint=0]="Varint",t[t.Fixed64=1]="Fixed64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Fixed32=5]="Fixed32"})(N||(N={}));var Y=class extends Uint32Array{constructor(e=0,i=0){super([e,i])}toString(e=!0){let[i,o]=this;if(i===0&&o===0)return"0";if(e&&o>2147483647)return"-"+sm(lg(this),nm).toString(!1);let s=[],r=new Y(i,o);for(;L1(r,D1);){let[c,p]=B1(r);s.push(p),r=c}return s.reverse().join("")}static parse(e){let i=parseInt(e,10),o=i<0;if(Number.isNaN(i))return new Y(0);if(e.length<10)return i<0?sm(lg(new Y(-i)),nm):new Y(i);let s=new Y,r=nm;for(let c of e.split("").reverse())parseInt(c)&&(s=sm(s,Kx(new Y(parseInt(c)),r))),r=Kx(r,new Y(10));return o?sm(lg(s),nm):s}};n(Y,"Long");var D1=new Y(0),nm=new Y(1);function rm(t){let[e,i]=t;return[e&65535,e>>>16,i&65535,i>>>16]}n(rm,"makeChunk");function sm(t,e){let[i,o,s,r]=rm(t),[c,p,f,m]=rm(e),_=0,b=0,w=0,T=0;return T+=i+c,w+=T>>>16,T&=65535,w+=o+p,b+=w>>>16,w&=65535,b+=s+f,_+=b>>>16,b&=65535,_+=r+m,_&=65535,new Y(w<<16|T,_<<16|b)}n(sm,"add");function Kx(t,e){let[i,o,s,r]=rm(t),[c,p,f,m]=rm(e),_=0,b=0,w=0,T=0;return T+=i*c,w+=T>>>16,T&=65535,w+=i*p+o*c,b+=w>>>16,w&=65535,b+=i*f+s*c+o*p,_+=b>>>16,b&=65535,_+=i*m+o*f+s*p+r*c,_&=65535,new Y(w<<16|T,_<<16|b)}n(Kx,"mul");function B1(t){let[e,i]=t;return[new Y((i%10*(4294967295+1)+e)/10|0,i/10|0),(i%10*(4294967295+1)+e)%10]}n(B1,"divByTen");function L1(t,e){let[i,o]=t,[s,r]=e;return o!==r?o-r:i-s}n(L1,"compare");function lg(t){let[e,i]=t;return new Y(~e,~i)}n(lg,"negate");function En(t){let e=[],s=typeof t=="number"?new Y(t):t;for(;s[0]||s[1];){let[r,c]=s,p=r&127,f=c>>>7,m=r>>>7|(c&127)<<32-7;s=new Y(m,f);let _=s[0]||s[1]?p|128:p;e.push(_)}return e.length<1?new Uint8Array(1):Uint8Array.from(e)}n(En,"encode");function Pn(t){let e=new Y(0),i=0;for(;;){let o=t.getUint8(i);if(e=F1(e,Y1(new Y(o&127),i*7)),++i,!(o>>>7))return[i,e]}}n(Pn,"decode");function F1(t,e){return new Y(t[0]|e[0],t[1]|e[1])}n(F1,"or");function Y1(t,e){return e===0?t:e>=32?new Y(0,t[0]<<e-32):new Y(t[0]<<e,t[1]<<e|t[0]>>>32-e)}n(Y1,"leftshift");function M(t){let e=[];return t.forEach(([i,o])=>{switch(e.push(En(i<<3|o.type)),o.type){case N.Varint:e.push(En(o.value));break;case N.Fixed64:{let s=new Uint8Array(8),r=new DataView(s.buffer);r.setUint32(0,o.value[0],!0),r.setUint32(4,o.value[1],!0),e.push(s);break}case N.LengthDelimited:e.push(En(o.value.byteLength)),e.push(o.value);break;case N.Fixed32:{let s=new Uint8Array(4);new DataView(s.buffer).setUint32(0,o.value,!0),e.push(s);break}}}),cg(e)}n(M,"serialize");function cg(t){let e=t.reduce((o,s)=>o+s.byteLength,0),i=new Uint8Array(e);return t.reduce((o,s)=>(i.set(s,o),o+s.byteLength),0),i}n(cg,"concat");function dg(t){if(t instanceof Y){let e=new Y(t[0]<<1,t[1]<<1|t[0]>>>31),i=t[1]>>>31?new Y(4294967295,4294967295):new Y;return new Y(e[0]^i[0],e[1]^i[1])}return(t*2^t>>31)>>>0}n(dg,"encode");function pg(t){if(t instanceof Y){let e=new Y(t[0]>>>1|t[1]<<31,t[1]>>>1),i=t[0]&1?new Y(4294967295,4294967295):new Y;return new Y(e[0]^i[0],e[1]^i[1])}return t>>>1^-(t&1)}n(pg,"decode");var fg={int32:t=>t[0]|0,int64:t=>t.toString(!0),uint32:t=>t[0]>>>0,uint64:t=>t.toString(!1),sint32:t=>pg(t[0]),sint64:t=>pg(t).toString(!0),bool:t=>t[0]!==0},hg={int32:t=>new Y(t),int64:t=>Y.parse(t),uint32:t=>new Y(t),uint64:t=>Y.parse(t),sint32:t=>dg(new Y(t)),sint64:t=>dg(Y.parse(t)),bool:t=>new Y(+t)},j1=Object.fromEntries(Object.entries(fg).map(([t,e])=>[t,i=>{if(i.type===N.Varint)return e(i.value)}])),U1=Object.fromEntries(Object.entries(hg).map(([t,e])=>[t,i=>({type:N.Varint,value:e(i)})])),$=Object.assign(Object.assign({},j1),{double:t=>t.type!==N.Fixed64?void 0:new DataView(t.value.buffer).getFloat64(0,!0),float:t=>t.type!==N.Fixed32?void 0:new DataView(new Uint32Array([t.value]).buffer).getFloat32(0,!0),fixed32:t=>{if(t.type===N.Fixed32)return t.value>>>0},fixed64:t=>{if(t.type===N.Fixed64)return t.value.toString(!1)},sfixed32:t=>{if(t.type===N.Fixed32)return t.value|0},sfixed64:t=>{if(t.type===N.Fixed64)return t.value.toString(!0)},string:t=>t.type!==N.LengthDelimited?void 0:new TextDecoder().decode(t.value),bytes:t=>{if(t.type===N.LengthDelimited)return t.value}}),E=Object.assign(Object.assign({},U1),{double:t=>{let e=new Y;return new DataView(e.buffer).setFloat64(0,t,!0),{type:N.Fixed64,value:e}},float:t=>{let e=new Uint32Array(1),i=new DataView(e.buffer);return i.setFloat32(0,t,!0),{type:N.Fixed32,value:i.getUint32(0,!0)}},fixed32:t=>({type:N.Fixed32,value:t>>>0}),fixed64:t=>({type:N.Fixed64,value:Y.parse(t)}),sfixed32:t=>({type:N.Fixed32,value:t|0}),sfixed64:t=>({type:N.Fixed64,value:Y.parse(t)}),string:t=>{let e=new TextEncoder;return{type:N.LengthDelimited,value:e.encode(t)}},bytes:t=>({type:N.LengthDelimited,value:t})}),W1=Object.fromEntries(Object.keys(fg).map(t=>[t,function*(e){for(let i of e){let o=$[t](i);if(o!=null)yield o;else for(let s of z1(i))yield fg[t](s)}}])),cR=Object.assign(Object.assign({},W1),{*double(t){for(let e of t){let i=$.double(e);i!=null?yield i:yield*J1(e)}},*float(t){for(let e of t){let i=$.float(e);i!=null?yield i:yield*G1(e)}},*fixed32(t){for(let e of t){let i=$.fixed32(e);if(i!=null)yield i;else for(let o of $x(e))yield o>>>0}},*fixed64(t){for(let e of t){let i=$.fixed64(e);if(i!=null)yield i;else for(let o of qx(e))yield o.toString(!1)}},*sfixed32(t){for(let e of t){let i=$.sfixed32(e);if(i!=null)yield i;else for(let o of $x(e))yield o|0}},*sfixed64(t){for(let e of t){let i=$.sfixed64(e);if(i!=null)yield i;else for(let o of qx(e))yield o.toString(!0)}}}),H1=Object.fromEntries(Object.keys(hg).map(t=>[t,function(e){return{type:N.LengthDelimited,value:cg(e.map(i=>{let o=hg[t](i);return En(o)}))}}]));function Nn(t,e){return n(function(o){let s=new Uint8Array(o.length*t),r=new DataView(s.buffer);for(let c=0;c<o.length;++c)e(r,c*t,o[c]);return{type:N.LengthDelimited,value:s}},"pack")}n(Nn,"getFixedPackFn");var dR=Object.assign(Object.assign({},H1),{double:Nn(8,(t,e,i)=>{t.setFloat64(e,i,!0)}),float:Nn(4,(t,e,i)=>{t.setFloat32(e,i,!0)}),fixed32:Nn(4,(t,e,i)=>{t.setUint32(e,i,!0)}),fixed64:Nn(8,(t,e,i)=>{let o=Y.parse(i);t.setUint32(e,o[0],!0),t.setUint32(e+4,o[1],!0)}),sfixed32:Nn(4,(t,e,i)=>{t.setInt32(e,i,!0)}),sfixed64:Nn(8,(t,e,i)=>{let o=Y.parse(i);t.setUint32(e,o[0],!0),t.setUint32(e+4,o[1],!0)})});function*J1(t){if(t.type!==N.LengthDelimited)return;let{value:e}=t,i=0,o=new DataView(e.buffer,e.byteOffset);for(;i<e.length;){let s=o.getFloat64(i,!0);i+=4,yield s}}n(J1,"unpackDouble");function*G1(t){if(t.type!==N.LengthDelimited)return;let{value:e}=t,i=0,o=new DataView(e.buffer,e.byteOffset);for(;i<e.length;){let s=o.getFloat32(i,!0);i+=4,yield s}}n(G1,"unpackFloat");function*z1(t){if(t.type!==N.LengthDelimited)return;let{value:e}=t,i=0,o=e.byteOffset;for(;i<e.length;){let s=Pn(new DataView(e.buffer,o+i));i+=s[0],yield s[1]}}n(z1,"unpackVarint");function*$x(t){if(t.type!==N.LengthDelimited)return;let{value:e}=t,i=0,o=new DataView(e.buffer,e.byteOffset);for(;i<e.length;){let s=o.getUint32(i,!0);i+=4,yield s}}n($x,"unpackFixed32");function*qx(t){if(t.type!==N.LengthDelimited)return;let{value:e}=t,i=0,o=new DataView(e.buffer,e.byteOffset);for(;i<e.length;){let s=o.getUint32(i,!0);i+=4;let r=o.getUint32(i,!0);i+=4,yield new Y(s,r)}}n(qx,"unpackFixed64");function q(t){let e=0,i=t.byteOffset,o=[],s=new DataView(t.buffer,i);for(;e<t.length;){let r=Pn(new DataView(t.buffer,i+e)),c=r[1][0];e+=r[0];let p=c&7,f=c>>>3;switch(p){default:throw new Error(`Unknown wire type ${p}`);case N.Varint:{let[b,w]=Pn(new DataView(t.buffer,i+e));o.push([f,{type:p,value:w}]),e+=b;break}case N.Fixed64:let m=s.getUint32(e,!0),_=s.getUint32(e+=4,!0);e+=4,o.push([f,{type:p,value:new Y(m,_)}]);break;case N.LengthDelimited:{let[b,w]=Pn(new DataView(t.buffer,i+e));o.push([f,{type:p,value:t.subarray(e+=b,e+=w[0])}]);break}case N.StartGroup:case N.EndGroup:o.push([f,{type:p}]);break;case N.Fixed32:o.push([f,{type:p,value:s.getUint32(e,!0)}]),e+=4;break}}return o}n(q,"deserialize");function K1(){return{id:"",timestamp:0}}n(K1,"getDefaultValue");function Xx(t){let e=[];if(t.id!==void 0){let i=t.id;e.push([1,E.string(i)])}if(t.timestamp!==void 0){let i=t.timestamp;e.push([5,E.int32(i)])}return M(e)}n(Xx,"encodeBinary");function Qx(t){let e=K1(),i=q(t),o=new Map(i);e:{let s=o.get(1);if(s===void 0)break e;let r=$.string(s);if(r===void 0)break e;e.id=r}e:{let s=o.get(5);if(s===void 0)break e;let r=$.int32(s);if(r===void 0)break e;e.timestamp=r}return e}n(Qx,"decodeBinary");function Zx(t){let e=[];if(t.channelId!==void 0){let i=t.channelId;e.push([1001,E.string(i)])}return M(e)}n(Zx,"encodeBinary");function eb(t){let e=[];if(t.params!==void 0){let i=t.params;e.push([32,{type:N.LengthDelimited,value:Zx(i)}])}return M(e)}n(eb,"encodeBinary");function tb(t){let e=[];if(t.uploadDate!==void 0){let i=t.uploadDate;e.push([1,E.int32(i)])}if(t.type!==void 0){let i=t.type;e.push([2,E.int32(i)])}if(t.duration!==void 0){let i=t.duration;e.push([3,E.int32(i)])}if(t.featuresHd!==void 0){let i=t.featuresHd;e.push([4,E.int32(i)])}if(t.featuresSubtitles!==void 0){let i=t.featuresSubtitles;e.push([5,E.int32(i)])}if(t.featuresCreativeCommons!==void 0){let i=t.featuresCreativeCommons;e.push([6,E.int32(i)])}if(t.features3d!==void 0){let i=t.features3d;e.push([7,E.int32(i)])}if(t.featuresLive!==void 0){let i=t.featuresLive;e.push([8,E.int32(i)])}if(t.featuresPurchased!==void 0){let i=t.featuresPurchased;e.push([9,E.int32(i)])}if(t.features4k!==void 0){let i=t.features4k;e.push([14,E.int32(i)])}if(t.features360!==void 0){let i=t.features360;e.push([15,E.int32(i)])}if(t.featuresLocation!==void 0){let i=t.featuresLocation;e.push([23,E.int32(i)])}if(t.featuresHdr!==void 0){let i=t.featuresHdr;e.push([25,E.int32(i)])}if(t.featuresVr180!==void 0){let i=t.featuresVr180;e.push([26,E.int32(i)])}return M(e)}n(tb,"encodeBinary");function ib(t){let e=[];if(t.sortBy!==void 0){let i=t.sortBy;e.push([1,E.int32(i)])}if(t.filters!==void 0){let i=t.filters;e.push([2,{type:N.LengthDelimited,value:tb(i)}])}if(t.noFilter!==void 0){let i=t.noFilter;e.push([19,E.int32(i)])}return M(e)}n(ib,"encodeBinary");function ob(t){let e=[];if(t.song!==void 0){let i=t.song;e.push([1,E.int32(i)])}if(t.video!==void 0){let i=t.video;e.push([2,E.int32(i)])}if(t.album!==void 0){let i=t.album;e.push([3,E.int32(i)])}if(t.artist!==void 0){let i=t.artist;e.push([4,E.int32(i)])}if(t.playlist!==void 0){let i=t.playlist;e.push([5,E.int32(i)])}return M(e)}n(ob,"encodeBinary");function nb(t){let e=[];if(t.type!==void 0){let i=t.type;e.push([17,{type:N.LengthDelimited,value:ob(i)}])}return M(e)}n(nb,"encodeBinary");function sb(t){let e=[];if(t.filters!==void 0){let i=t.filters;e.push([2,{type:N.LengthDelimited,value:nb(i)}])}return M(e)}n(sb,"encodeBinary");function rb(t){let e=[];if(t.channelId!==void 0){let i=t.channelId;e.push([1,E.string(i)])}if(t.videoId!==void 0){let i=t.videoId;e.push([2,E.string(i)])}return M(e)}n(rb,"encodeBinary");function ab(t){let e=[];if(t.ids!==void 0){let i=t.ids;e.push([5,{type:N.LengthDelimited,value:rb(i)}])}return M(e)}n(ab,"encodeBinary");function ub(t){let e=[];if(t.params!==void 0){let i=t.params;e.push([1,{type:N.LengthDelimited,value:ab(i)}])}if(t.number0!==void 0){let i=t.number0;e.push([2,E.int32(i)])}if(t.number1!==void 0){let i=t.number1;e.push([3,E.int32(i)])}return M(e)}n(ub,"encodeBinary");function lb(t){let e=[];if(t.videoId!==void 0){let i=t.videoId;e.push([2,E.string(i)])}return M(e)}n(lb,"encodeBinary");function cb(t){let e=[];if(t.unkParam!==void 0){let i=t.unkParam;e.push([1,E.int32(i)])}return M(e)}n(cb,"encodeBinary");function db(t){let e=[];if(t.commentId!==void 0){let i=t.commentId;e.push([2,E.string(i)])}if(t.unkopts!==void 0){let i=t.unkopts;e.push([4,{type:N.LengthDelimited,value:cb(i)}])}if(t.channelId!==void 0){let i=t.channelId;e.push([5,E.string(i)])}if(t.videoId!==void 0){let i=t.videoId;e.push([6,E.string(i)])}if(t.unkParam1!==void 0){let i=t.unkParam1;e.push([8,E.int32(i)])}if(t.unkParam2!==void 0){let i=t.unkParam2;e.push([9,E.int32(i)])}return M(e)}n(db,"encodeBinary");function pb(t){let e=[];if(t.videoId!==void 0){let i=t.videoId;e.push([4,E.string(i)])}if(t.sortBy!==void 0){let i=t.sortBy;e.push([6,E.int32(i)])}if(t.type!==void 0){let i=t.type;e.push([15,E.int32(i)])}return M(e)}n(pb,"encodeBinary");function fb(t){let e=[];if(t.unkToken!==void 0){let i=t.unkToken;e.push([1,E.string(i)])}if(t.repliesOpts!==void 0){let i=t.repliesOpts;e.push([3,{type:N.LengthDelimited,value:db(i)}])}if(t.opts!==void 0){let i=t.opts;e.push([4,{type:N.LengthDelimited,value:pb(i)}])}if(t.page!==void 0){let i=t.page;e.push([5,E.int32(i)])}if(t.target!==void 0){let i=t.target;e.push([8,E.string(i)])}return M(e)}n(fb,"encodeBinary");function hb(t){let e=[];if(t.ctx!==void 0){let i=t.ctx;e.push([2,{type:N.LengthDelimited,value:lb(i)}])}if(t.unkParam!==void 0){let i=t.unkParam;e.push([3,E.int32(i)])}if(t.params!==void 0){let i=t.params;e.push([6,{type:N.LengthDelimited,value:fb(i)}])}return M(e)}n(hb,"encodeBinary");function mb(t){let e=[];if(t.index!==void 0){let i=t.index;e.push([1,E.int32(i)])}return M(e)}n(mb,"encodeBinary");function _b(t){let e=[];if(t.videoId!==void 0){let i=t.videoId;e.push([2,E.string(i)])}if(t.params!==void 0){let i=t.params;e.push([5,{type:N.LengthDelimited,value:mb(i)}])}if(t.number!==void 0){let i=t.number;e.push([10,E.int32(i)])}return M(e)}n(_b,"encodeBinary");function vb(t){let e=[];if(t.text!==void 0){let i=t.text;e.push([1,E.string(i)])}return M(e)}n(vb,"encodeBinary");function gb(t){let e=[];if(t.comment!==void 0){let i=t.comment;e.push([1,{type:N.LengthDelimited,value:vb(i)}])}return M(e)}n(gb,"encodeBinary");function xb(t){let e=[];if(t.commentId!==void 0){let i=t.commentId;e.push([2,E.string(i)])}if(t.params!==void 0){let i=t.params;e.push([3,{type:N.LengthDelimited,value:gb(i)}])}if(t.targetLanguage!==void 0){let i=t.targetLanguage;e.push([4,E.string(i)])}return M(e)}n(xb,"encodeBinary");function bb(t){let e=[];if(t.type!==void 0){let i=t.type;e.push([1,E.int32(i)])}if(t.unkNum!==void 0){let i=t.unkNum;e.push([2,E.int32(i)])}if(t.commentId!==void 0){let i=t.commentId;e.push([3,E.string(i)])}if(t.videoId!==void 0){let i=t.videoId;e.push([5,E.string(i)])}if(t.channelId!==void 0){let i=t.channelId;e.push([23,E.string(i)])}if(t.translateCommentParams!==void 0){let i=t.translateCommentParams;e.push([31,{type:N.LengthDelimited,value:xb(i)}])}return M(e)}n(bb,"encodeBinary");function yb(t){let e=[];if(t.index!==void 0){let i=t.index;e.push([1,E.int32(i)])}return M(e)}n(yb,"encodeBinary");function wb(t){let e=[];if(t.channelId!==void 0){let i=t.channelId;e.push([1,E.string(i)])}if(t.prefId!==void 0){let i=t.prefId;e.push([2,{type:N.LengthDelimited,value:yb(i)}])}if(t.number0!==void 0){let i=t.number0;e.push([3,E.int32(i)])}if(t.number1!==void 0){let i=t.number1;e.push([4,E.int32(i)])}return M(e)}n(wb,"encodeBinary");function Tb(t){let e=[];if(t.unkparam!==void 0){let i=t.unkparam;e.push([16,E.int32(i)])}if(t.clientVersion!==void 0){let i=t.clientVersion;e.push([17,E.string(i)])}if(t.clientName!==void 0){let i=t.clientName;e.push([18,E.string(i)])}return M(e)}n(Tb,"encodeBinary");function Sb(t){let e=[];if(t.client!==void 0){let i=t.client;e.push([1,{type:N.LengthDelimited,value:Tb(i)}])}return M(e)}n(Sb,"encodeBinary");function Ib(t){let e=[];if(t.text!==void 0){let i=t.text;e.push([1,E.string(i)])}return M(e)}n(Ib,"encodeBinary");function kb(t){let e=[];if(t.text!==void 0){let i=t.text;e.push([1,E.string(i)])}return M(e)}n(kb,"encodeBinary");function Cb(t){let e=[];for(let i of t.list)e.push([1,E.string(i)]);return M(e)}n(Cb,"encodeBinary");function Eb(t){let e=[];if(t.id!==void 0){let i=t.id;e.push([1,E.int32(i)])}return M(e)}n(Eb,"encodeBinary");function Pb(t){let e=[];if(t.type!==void 0){let i=t.type;e.push([1,E.string(i)])}return M(e)}n(Pb,"encodeBinary");function Nb(t){let e=[];if(t.imageData!==void 0){let i=t.imageData;e.push([1,E.bytes(i)])}return M(e)}n(Nb,"encodeBinary");function Ab(t){let e=[];if(t.type!==void 0){let i=t.type;e.push([1,E.int32(i)])}if(t.thumbnail!==void 0){let i=t.thumbnail;e.push([3,{type:N.LengthDelimited,value:Nb(i)}])}return M(e)}n(Ab,"encodeBinary");function Rb(t){let e=[];if(t.type!==void 0){let i=t.type;e.push([1,E.int32(i)])}return M(e)}n(Rb,"encodeBinary");function Mb(t){let e=[];if(t.unkparam!==void 0){let i=t.unkparam;e.push([1,E.int32(i)])}if(t.choice!==void 0){let i=t.choice;e.push([2,E.int32(i)])}return M(e)}n(Mb,"encodeBinary");function Vb(t){let e=[];if(t.unkparam!==void 0){let i=t.unkparam;e.push([1,E.int32(i)])}if(t.choice!==void 0){let i=t.choice;e.push([2,E.int32(i)])}return M(e)}n(Vb,"encodeBinary");function mg(t){let e=[];if(t.context!==void 0){let i=t.context;e.push([1,{type:N.LengthDelimited,value:Sb(i)}])}if(t.target!==void 0){let i=t.target;e.push([2,E.string(i)])}if(t.title!==void 0){let i=t.title;e.push([3,{type:N.LengthDelimited,value:Ib(i)}])}if(t.description!==void 0){let i=t.description;e.push([4,{type:N.LengthDelimited,value:kb(i)}])}if(t.tags!==void 0){let i=t.tags;e.push([6,{type:N.LengthDelimited,value:Cb(i)}])}if(t.category!==void 0){let i=t.category;e.push([7,{type:N.LengthDelimited,value:Eb(i)}])}if(t.license!==void 0){let i=t.license;e.push([8,{type:N.LengthDelimited,value:Pb(i)}])}if(t.videoThumbnail!==void 0){let i=t.videoThumbnail;e.push([20,{type:N.LengthDelimited,value:Ab(i)}])}if(t.privacy!==void 0){let i=t.privacy;e.push([38,{type:N.LengthDelimited,value:Rb(i)}])}if(t.madeForKids!==void 0){let i=t.madeForKids;e.push([68,{type:N.LengthDelimited,value:Mb(i)}])}if(t.ageRestricted!==void 0){let i=t.ageRestricted;e.push([69,{type:N.LengthDelimited,value:Vb(i)}])}return M(e)}n(mg,"encodeBinary");function Ob(t){let e=[];if(t.hashtag!==void 0){let i=t.hashtag;e.push([1,E.string(i)])}if(t.type!==void 0){let i=t.type;e.push([3,E.int32(i)])}return M(e)}n(Ob,"encodeBinary");function Db(t){let e=[];if(t.params!==void 0){let i=t.params;e.push([93,{type:N.LengthDelimited,value:Ob(i)}])}return M(e)}n(Db,"encodeBinary");var am=class{static encodeVisitorData(e,i){let o=Xx({id:e,timestamp:i});return encodeURIComponent(Tt(o).replace(/\+/g,"-").replace(/\//g,"_"))}static decodeVisitorData(e){return Qx(_g(decodeURIComponent(e)))}static encodeChannelAnalyticsParams(e){let i=eb({params:{channelId:e}});return encodeURIComponent(Tt(i))}static encodeSearchFilters(e){let i={all:void 0,hour:1,today:2,week:3,month:4,year:5},o={all:void 0,video:1,channel:2,playlist:3,movie:4},s={all:void 0,short:1,long:2,medium:3},r={relevance:void 0,rating:1,upload_date:2,view_count:3},c={hd:"featuresHd",subtitles:"featuresSubtitles",creative_commons:"featuresCreativeCommons","3d":"features3D",live:"featuresLive",purchased:"featuresPurchased","4k":"features4K",360:"features360",location:"featuresLocation",hdr:"featuresHdr",vr180:"featuresVr180"},p={};if(e?p.filters={}:p.noFilter=0,p.filters&&(e.upload_date&&(p.filters.uploadDate=i[e.upload_date]),e.type&&(p.filters.type=o[e.type]),e.duration&&(p.filters.duration=s[e.duration]),e.sort_by&&e.sort_by!=="relevance"&&(p.sortBy=r[e.sort_by]),e.features))for(let m of e.features)p.filters[c[m]]=1;let f=ib(p);return encodeURIComponent(Tt(f))}static encodeMusicSearchFilters(e){var i;let o={filters:{type:{}}};e.type&&e.type!=="all"&&((i=o.filters)===null||i===void 0?void 0:i.type)&&(o.filters.type[e.type]=1);let s=sb(o);return encodeURIComponent(Tt(s))}static encodeMessageParams(e,i){let o=ub({params:{ids:{channelId:e,videoId:i}},number0:1,number1:4});return btoa(encodeURIComponent(Tt(o)))}static encodeCommentsSectionParams(e,i={}){let s=hb({ctx:{videoId:e},unkParam:6,params:{opts:{videoId:e,sortBy:{TOP_COMMENTS:0,NEWEST_FIRST:1}[i.sort_by||"TOP_COMMENTS"],type:i.type||2},target:"comments-section"}});return encodeURIComponent(Tt(s))}static encodeCommentParams(e){let i=_b({videoId:e,params:{index:0},number:7});return encodeURIComponent(Tt(i))}static encodeCommentActionParams(e,i={}){let o={type:e,commentId:i.comment_id||" ",videoId:i.video_id||" ",channelId:" ",unkNum:2};if(i.hasOwnProperty("text")){if(typeof i.target_language!="string")throw new Error("target_language must be a string");i.comment_id&&delete o.unkNum,o.translateCommentParams={params:{comment:{text:i.text}},commentId:i.comment_id||" ",targetLanguage:i.target_language}}let s=bb(o);return encodeURIComponent(Tt(s))}static encodeNotificationPref(e,i){let o=wb({channelId:e,prefId:{index:i},number0:0,number1:4});return encodeURIComponent(Tt(o))}static encodeVideoMetadataPayload(e,i){let o={context:{client:{unkparam:14,clientName:Q.ANDROID.NAME,clientVersion:Q.YTSTUDIO_ANDROID.VERSION}},target:e};if(Reflect.has(i,"title")&&(o.title={text:i.title||""}),Reflect.has(i,"description")&&(o.description={text:i.description||""}),Reflect.has(i,"license")&&(o.license={type:i.license||""}),Reflect.has(i,"tags")&&(o.tags={list:i.tags||[]}),Reflect.has(i,"category")&&(o.category={id:i.category||0}),Reflect.has(i,"privacy"))switch(i.privacy){case"PUBLIC":o.privacy={type:1};break;case"UNLISTED":o.privacy={type:2};break;case"PRIVATE":o.privacy={type:3};break;default:throw new Error("Invalid visibility option")}return Reflect.has(i,"made_for_kids")&&(o.madeForKids={unkparam:1,choice:i.made_for_kids?1:2}),Reflect.has(i,"age_restricted")&&(o.ageRestricted={unkparam:1,choice:i.age_restricted?1:2}),mg(o)}static encodeCustomThumbnailPayload(e,i){let o={context:{client:{unkparam:14,clientName:Q.ANDROID.NAME,clientVersion:Q.YTSTUDIO_ANDROID.VERSION}},target:e,videoThumbnail:{type:3,thumbnail:{imageData:i}}};return mg(o)}static encodeHashtag(e){let i=Db({params:{hashtag:e,type:1}});return encodeURIComponent(Tt(i))}};n(am,"Proto");var Se=am;var Mt,Ga=class extends a{constructor(e){var i,o,s,r,c,p,f;super(),Mt.set(this,void 0),this.content=new l(e.contentText),this.published=new l(e.publishedTimeText),this.author_is_channel_owner=e.authorIsChannelOwner,this.current_user_reply_thumbnail=y.fromResponse(e.currentUserReplyThumbnail),this.sponsor_comment_badge=d.parseItem(e.sponsorCommentBadge,om),this.paid_comment_chip=d.parseItem(e.paidCommentChipRenderer,im),this.author_badge=d.parseItem(e.authorCommentBadge,em),this.author=new F(Object.assign(Object.assign({},e.authorText),{navigationEndpoint:e.authorEndpoint}),this.author_badge?[{metadataBadgeRenderer:(i=this.author_badge)===null||i===void 0?void 0:i.orig_badge}]:null,e.authorThumbnail),this.action_menu=d.parseItem(e.actionMenu,H),this.action_buttons=d.parseItem(e.actionButtons,co),this.comment_id=e.commentId,this.vote_status=e.voteStatus,this.vote_count=e.voteCount?new l(e.voteCount).toString():"0",this.reply_count=e.replyCount||0,this.is_liked=!!(!((s=(o=this.action_buttons)===null||o===void 0?void 0:o.like_button)===null||s===void 0)&&s.is_toggled),this.is_disliked=!!(!((c=(r=this.action_buttons)===null||r===void 0?void 0:r.dislike_button)===null||c===void 0)&&c.is_toggled),this.is_hearted=!!(!((f=(p=this.action_buttons)===null||p===void 0?void 0:p.creator_heart)===null||f===void 0)&&f.is_hearted),this.is_pinned=!!e.pinnedCommentBadge,this.is_member=!!e.sponsorCommentBadge}like(){var e;return x(this,void 0,void 0,function*(){if(!u(this,Mt,"f"))throw new g("An active caller must be provide to perform this operation.");let i=(e=this.action_buttons)===null||e===void 0?void 0:e.like_button;if(!i)throw new g("Like button was not found.",{comment_id:this.comment_id});if(i.is_toggled)throw new g("This comment is already liked",{comment_id:this.comment_id});return yield i.endpoint.call(u(this,Mt,"f"),{parse:!1})})}dislike(){var e;return x(this,void 0,void 0,function*(){if(!u(this,Mt,"f"))throw new g("An active caller must be provide to perform this operation.");let i=(e=this.action_buttons)===null||e===void 0?void 0:e.dislike_button;if(!i)throw new g("Dislike button was not found.",{comment_id:this.comment_id});if(i.is_toggled)throw new g("This comment is already disliked",{comment_id:this.comment_id});return yield i.endpoint.call(u(this,Mt,"f"),{parse:!1})})}reply(e){var i,o,s;return x(this,void 0,void 0,function*(){if(!u(this,Mt,"f"))throw new g("An active caller must be provide to perform this operation.");if(!(!((i=this.action_buttons)===null||i===void 0)&&i.reply_button))throw new g("Cannot reply to another reply. Try mentioning the user instead.",{comment_id:this.comment_id});let r=(o=this.action_buttons)===null||o===void 0?void 0:o.reply_button;if(!(!((s=r.endpoint)===null||s===void 0)&&s.dialog))throw new g("Reply button endpoint did not have a dialog.");let p=r.endpoint.dialog.as(tm).reply_button;if(!p)throw new g("Reply button was not found in the dialog.",{comment_id:this.comment_id});if(!p.endpoint)throw new g("Reply button endpoint was not found.",{comment_id:this.comment_id});return yield p.endpoint.call(u(this,Mt,"f"),{commentText:e})})}translate(e){var i,o,s,r,c,p;return x(this,void 0,void 0,function*(){if(!u(this,Mt,"f"))throw new g("An active caller must be provide to perform this operation.");let m={text:this.content.toString().replace(/[^\p{L}\p{N}\p{P}\p{Z}]/gu,""),target_language:e,comment_id:this.comment_id},_=Se.encodeCommentActionParams(22,m),b=yield u(this,Mt,"f").execute("comment/perform_comment_action",{action:_,client:"ANDROID"}),w=(o=(i=b.data.frameworkUpdates)===null||i===void 0?void 0:i.entityBatchUpdate)===null||o===void 0?void 0:o.mutations,T=(p=(c=(r=(s=w==null?void 0:w[0])===null||s===void 0?void 0:s.payload)===null||r===void 0?void 0:r.commentEntityPayload)===null||c===void 0?void 0:c.translatedContent)===null||p===void 0?void 0:p.content;return Object.assign(Object.assign({},b),{content:T})})}setActions(e){S(this,Mt,e,"f")}};n(Ga,"Comment");Mt=new WeakMap;Ga.type="Comment";var An=Ga;var za=class extends a{constructor(e){super(),this.id=e.id,this.categories=d.parseArray(e.categories),this.category_buttons=d.parseArray(e.categoryButtons),this.search_placeholder=new l(e.searchPlaceholderText),this.search_no_results=new l(e.searchNoResultsText),this.pick_skin_tone=new l(e.pickSkinToneText),this.clear_search_label=e.clearSearchLabel,this.skin_tone_generic_label=e.skinToneGenericLabel,this.skin_tone_light_label=e.skinToneLightLabel,this.skin_tone_medium_light_label=e.skinToneMediumLightLabel,this.skin_tone_medium_label=e.skinToneMediumLabel,this.skin_tone_medium_dark_label=e.skinToneMediumDarkLabel,this.skin_tone_dark_label=e.skinToneDarkLabel}};n(za,"EmojiPicker");za.type="EmojiPicker";var um=za;var Ka=class extends a{constructor(e){super(),this.editable_text=new l(e.editableText),this.author_thumbnail=y.fromResponse(e.authorThumbnail),this.submit_button=d.parseItem(e.submitButton,k),this.cancel_button=d.parseItem(e.cancelButton,k),this.placeholder=new l(e.placeholderText),this.emoji_button=d.parseItem(e.emojiButton,k),this.emoji_picker=d.parseItem(e.emojiPicker,um)}};n(Ka,"CommentDialog");Ka.type="CommentDialog";var Bb=Ka;var $a=class extends a{constructor(e){super(),this.contents=d.parseArray(e.contents),this.view_replies=d.parseItem(e.viewReplies,k),this.hide_replies=d.parseItem(e.hideReplies,k),this.view_replies_creator_thumbnail=y.fromResponse(e.viewRepliesCreatorThumbnail),this.has_channel_owner_replied=!!e.viewRepliesCreatorThumbnail}};n($a,"CommentReplies");$a.type="CommentReplies";var lm=$a;var qa=class extends a{constructor(e){super(),this.simplebox_avatar=y.fromResponse(e.simpleboxAvatar),this.simplebox_placeholder=new l(e.simpleboxPlaceholder)}};n(qa,"CommentsSimplebox");qa.type="CommentsSimplebox";var cm=qa;var Xa=class extends a{constructor(e){super(),Reflect.has(e,"teaserAvatar")&&(this.teaser_avatar=y.fromResponse(e.teaserAvatar)),Reflect.has(e,"teaserContent")&&(this.teaser_content=new l(e.teaserContent))}};n(Xa,"CommentsEntryPointTeaser");Xa.type="CommentsEntryPointTeaser";var dm=Xa;var Qa=class extends a{constructor(e){super(),Reflect.has(e,"headerText")&&(this.header=new l(e.headerText)),Reflect.has(e,"commentCount")&&(this.comment_count=new l(e.commentCount)),(Reflect.has(e,"teaserAvatar")||Reflect.has(e,"simpleboxAvatar"))&&(this.teaser_avatar=y.fromResponse(e.teaserAvatar||e.simpleboxAvatar)),Reflect.has(e,"teaserContent")&&(this.teaser_content=new l(e.teaserContent)),Reflect.has(e,"contentRenderer")&&(this.content_renderer=W.parseItem(e.contentRenderer,[dm,cm])),Reflect.has(e,"simpleboxPlaceholder")&&(this.simplebox_placeholder=new l(e.simpleboxPlaceholder))}};n(Qa,"CommentsEntryPointHeader");Qa.type="CommentsEntryPointHeader";var pm=Qa;var Za=class extends a{constructor(e){super(),this.title=new l(e.titleText),this.count=new l(e.countText),this.comments_count=new l(e.commentsCount),this.create_renderer=d.parseItem(e.createRenderer),this.sort_menu=d.parseItem(e.sortMenu,fi),Reflect.has(e,"customEmojis")&&(this.custom_emojis=e.customEmojis.map(i=>({emoji_id:i.emojiId,shortcuts:i.shortcuts,search_terms:i.searchTerms,image:y.fromResponse(i.image),is_custom_emoji:i.isCustomEmoji})))}};n(Za,"CommentsHeader");Za.type="CommentsHeader";var Rn=Za;var eu=class extends a{constructor(e){super(),this.submit_button=d.parseItem(e.submitButton,k),this.cancel_button=d.parseItem(e.cancelButton,k),this.author_thumbnail=y.fromResponse(e.authorThumbnail),this.placeholder=new l(e.placeholderText),this.avatar_size=e.avatarSize}};n(eu,"CommentSimplebox");eu.type="CommentSimplebox";var fm=eu;var tu=class extends a{constructor(e){super(),this.trigger=e.trigger,Reflect.has(e,"button")&&(this.button=d.parseItem(e.button,k)),this.endpoint=new v(e.continuationEndpoint)}};n(tu,"ContinuationItem");tu.type="ContinuationItem";var De=tu;var hi,po,iu=class extends a{constructor(e){super(),hi.set(this,void 0),po.set(this,void 0),this.comment=d.parseItem(e.comment,An),this.comment_replies_data=d.parseItem(e.replies,lm),this.is_moderated_elq_comment=e.isModeratedElqComment,this.has_replies=!!this.comment_replies_data}getReplies(){var e;return x(this,void 0,void 0,function*(){if(!u(this,hi,"f"))throw new g("Actions instance not set for this thread.");if(!this.comment_replies_data)throw new g("This comment has no replies.",this);let i=(e=this.comment_replies_data.contents)===null||e===void 0?void 0:e.firstOfType(De);if(!i)throw new g("Replies continuation not found.");let o=yield i.endpoint.call(u(this,hi,"f"),{parse:!0});if(!o.on_response_received_endpoints_memo)throw new g("Unexpected response.",o);return this.replies=pe(o.on_response_received_endpoints_memo.getType(An).map(s=>(s.setActions(u(this,hi,"f")),s))),S(this,po,o==null?void 0:o.on_response_received_endpoints_memo.getType(De).first(),"f"),this})}getContinuation(){var e;return x(this,void 0,void 0,function*(){if(!this.replies)throw new g("Cannot retrieve continuation because this thread's replies have not been loaded.");if(!u(this,po,"f"))throw new g("Continuation not found.");if(!u(this,hi,"f"))throw new g("Actions instance not set for this thread.");let i=(e=u(this,po,"f").button)===null||e===void 0?void 0:e.as(k);if(!i)throw new g('"Load more" button not found.');let o=yield i.endpoint.call(u(this,hi,"f"),{parse:!0});if(!o.on_response_received_endpoints_memo)throw new g("Unexpected response.",o);return this.replies=pe(o.on_response_received_endpoints_memo.getType(An).map(s=>(s.setActions(u(this,hi,"f")),s))),S(this,po,o.on_response_received_endpoints_memo.getType(De).first(),"f"),this})}get has_continuation(){if(!this.replies)throw new g("Cannot determine if there is a continuation because this thread's replies have not been loaded.");return!!u(this,po,"f")}setActions(e){S(this,hi,e,"f")}};n(iu,"CommentThread");hi=new WeakMap,po=new WeakMap;iu.type="CommentThread";var hm=iu;var ou=class extends a{constructor(e){super(),this.title=new l(e.title),this.channel_id=e.channelId,this.thumbnail=y.fromResponse(e.thumbnail),this.display_name=new l(e.displayName),this.video_count=new l(e.videoCountText),this.subscriber_count=new l(e.subscriberCountText),this.endpoint=new v(e.navigationEndpoint),this.tv_banner=y.fromResponse(e.tvBanner),this.menu=d.parseItem(e.menu,H)}};n(ou,"CompactChannel");ou.type="CompactChannel";var Lb=ou;var nu=class extends a{constructor(e){super(),this.title=new l(e.title).toString(),this.endpoint=new v(e.navigationEndpoint),this.style=e.style}};n(nu,"CompactLink");nu.type="CompactLink";var Mn=nu;var su=class extends a{constructor(e){super(),this.thumbnail=y.fromResponse(e.thumbnail)}};n(su,"PlaylistCustomThumbnail");su.type="PlaylistCustomThumbnail";var Vn=su;var ru=class extends a{constructor(e){super(),this.thumbnail=y.fromResponse(e.thumbnail)}};n(ru,"PlaylistVideoThumbnail");ru.type="PlaylistVideoThumbnail";var On=ru;var au=class extends a{constructor(e){var i;super(),this.id=e.playlistId,this.title=new l(e.title),this.author=!((i=e.shortBylineText)===null||i===void 0)&&i.simpleText?new l(e.shortBylineText):new F(e.longBylineText,e.ownerBadges,null),this.thumbnails=y.fromResponse(e.thumbnail||{thumbnails:e.thumbnails.map(o=>o.thumbnails).flat(1)}),this.video_count=new l(e.thumbnailText),this.video_count_short=new l(e.videoCountShortText),this.first_videos=d.parseArray(e.videos),this.share_url=e.shareUrl||null,this.menu=d.parseItem(e.menu),this.badges=d.parseArray(e.ownerBadges),this.endpoint=new v(e.navigationEndpoint),this.thumbnail_overlays=d.parseArray(e.thumbnailOverlays),Reflect.has(e,"thumbnailRenderer")&&(this.thumbnail_renderer=d.parseItem(e.thumbnailRenderer,[On,Vn])||void 0),Reflect.has(e,"viewPlaylistText")&&(this.view_playlist=new l(e.viewPlaylistText))}};n(au,"Playlist");au.type="Playlist";var Qt=au;var uu=class extends Qt{constructor(e){super(e)}};n(uu,"CompactMix");uu.type="CompactMix";var Fb=uu;var lu=class extends Qt{constructor(e){super(e)}};n(lu,"CompactPlaylist");lu.type="CompactPlaylist";var Yb=lu;var cu=class extends a{constructor(e){super(),this.title=new l(e.title),this.description=new l(e.description),this.video_count=new l(e.videoCountText),this.endpoint=new v(e.navigationEndpoint),this.thumbnail=y.fromResponse(e.thumbnail)}};n(cu,"CompactStation");cu.type="CompactStation";var jb=cu;var du=class extends a{constructor(e){super(),this.title=new l(e.title),this.confirm_button=d.parseItem(e.confirmButton,k),this.cancel_button=d.parseItem(e.cancelButton,k),this.dialog_messages=e.dialogMessages.map(i=>new l(i))}};n(du,"ConfirmDialog");du.type="ConfirmDialog";var Ub=du;var pu=class extends a{constructor(e){super(),this.image=e.image.sources.map(i=>new y(i)).sort((i,o)=>o.width-i.width),this.style=e.style}};n(pu,"ContentPreviewImageView");pu.type="ContentPreviewImageView";var mm=pu;var fu=class extends a{constructor(e){super(),this.availability_message=d.parseItem(e.availabilityMessage,Je)}};n(fu,"ConversationBar");fu.type="ConversationBar";var Wb=fu;var hu=class extends a{constructor(e){super(),this.copy_button=d.parseItem(e.copyButton,k),this.short_url=e.shortUrl,this.style=e.style}};n(hu,"CopyLink");hu.type="CopyLink";var _m=hu;var mu=class extends a{constructor(e){super(),this.time_range_start_millis=e.timeRangeStartMillis,this.marker_duration_millis=e.markerDurationMillis,this.heat_marker_intensity_score_normalized=e.heatMarkerIntensityScoreNormalized}};n(mu,"HeatMarker");mu.type="HeatMarker";var vm=mu;var _u=class extends a{constructor(e){super(),this.max_height_dp=e.maxHeightDp,this.min_height_dp=e.minHeightDp,this.show_hide_animation_duration_millis=e.showHideAnimationDurationMillis,this.heat_markers=d.parseArray(e.heatMarkers,vm),this.heat_markers_decorations=d.parseArray(e.heatMarkersDecorations)}};n(_u,"Heatmap");_u.type="Heatmap";var gm=_u;var vu=class extends a{constructor(e){super(),this.marker_key=e.key,this.value={},Reflect.has(e,"value")&&(Reflect.has(e.value,"heatmap")&&(this.value.heatmap=d.parseItem(e.value.heatmap,gm)),Reflect.has(e.value,"chapters")&&(this.value.chapters=d.parseArray(e.value.chapters,Qh)))}};n(vu,"Marker");vu.type="Marker";var gu=class extends a{constructor(e){var i;super(),this.markers_map=pe(((i=e.markersMap)===null||i===void 0?void 0:i.map(o=>new vu(o)))||[])}};n(gu,"MultiMarkersPlayerBar");gu.type="MultiMarkersPlayerBar";var xm=gu;var xu=class extends a{constructor(e){super(),this.player_bar=d.parseItem(e.playerBar,xm),this.player_bar_action_button=d.parseItem(e.playerBarActionButton,k)}};n(xu,"DecoratedPlayerBar");xu.type="DecoratedPlayerBar";var bm=xu;var bu=class extends a{constructor(e){super(),this.title=new l(e.title),this.description=new l(e.description),this.endpoint=new v(e.navigationEndpoint),this.large_form_factor_background_thumbnail=d.parseItem(e.largeFormFactorBackgroundThumbnail),this.small_form_factor_background_thumbnail=d.parseItem(e.smallFormFactorBackgroundThumbnail),this.scrim_color_values=e.scrimColorValues,this.min_panel_display_duration_ms=e.minPanelDisplayDurationMs,this.min_video_play_duration_ms=e.minVideoPlayDurationMs,this.scrim_duration=e.scrimDuration,this.metadata_order=e.metadataOrder,this.panel_layout=e.panelLayout}};n(bu,"DefaultPromoPanel");bu.type="DefaultPromoPanel";var Hb=bu;var yu=class extends a{constructor(e){super(),this.text=new l(e.didYouMean).toString(),this.corrected_query=new l(e.correctedQuery),this.endpoint=new v(e.navigationEndpoint||e.correctedQueryEndpoint)}};n(yu,"DidYouMean");yu.type="DidYouMean";var ym=yu;var wu=class extends a{constructor(e){super(),this.style=e.style,this.size=e.size,this.endpoint=new v(e.command),this.target_id=e.targetId}};n(wu,"DownloadButton");wu.type="DownloadButton";var Jb=wu;var Tu=class extends a{constructor(e){super(),this.text=e.text.content}};n(Tu,"DynamicTextView");Tu.type="DynamicTextView";var wm=Tu;var fo=class extends a{constructor(e){var i;super(),Reflect.has(e,"type")&&Reflect.has(e.type,"textType")&&(this.text=(i=e.type.textType.text)===null||i===void 0?void 0:i.content),this.properties=e.properties,Reflect.has(e,"childElements")&&(this.child_elements=e.childElements.map(o=>new fo(o)))}};n(fo,"ChildElement");fo.type="ChildElement";var Tm=fo;var ho=class extends a{constructor(e){var i;if(super(),Reflect.has(e,"elementRenderer"))return d.parseItem(e,ho);let o=e.newElement.type.componentType;this.model=d.parseItem(o==null?void 0:o.model),Reflect.has(e,"newElement")&&Reflect.has(e.newElement,"childElements")&&(this.child_elements=pe(((i=e.newElement.childElements)===null||i===void 0?void 0:i.map(s=>new Tm(s)))||[]))}};n(ho,"Element");ho.type="Element";var Dn=ho;var Su=class extends a{constructor(e){super(),this.title=new l(e.title),this.first_option=d.parseItem(e.firstOption),this.menu=d.parseItem(e.menu,H)}};n(Su,"EmergencyOnebox");Su.type="EmergencyOnebox";var Gb=Su;var Iu=class extends a{constructor(e){super(),this.category_id=e.categoryId,this.title=new l(e.title),this.emoji_ids=e.emojiIds,this.image_loading_lazy=!!e.imageLoadingLazy,this.category_type=e.categoryType}};n(Iu,"EmojiPickerCategory");Iu.type="EmojiPickerCategory";var zb=Iu;var ku=class extends a{constructor(e){var i;super(),this.category_id=e.categoryId,Reflect.has(e,"icon")&&(this.icon_type=(i=e.icon)===null||i===void 0?void 0:i.iconType),this.tooltip=e.tooltip}};n(ku,"EmojiPickerCategoryButton");ku.type="EmojiPickerCategoryButton";var Kb=ku;var Cu=class extends a{constructor(e){super(),this.category_id=e.categoryId,this.title=new l(e.title),this.upsell=new l(e.upsell),this.emoji_tooltip=e.emojiTooltip,this.endpoint=new v(e.command),this.emoji_ids=e.emojiIds}};n(Cu,"EmojiPickerUpsellCategory");Cu.type="EmojiPickerUpsellCategory";var $b=Cu;var Eu=class extends a{constructor(e){super(),this.style=e.style,this.title=new l(e.title),this.endpoint=new v(e.endpoint),Reflect.has(e,"image")&&(this.image=y.fromResponse(e.image)),Reflect.has(e,"icon")&&(this.icon=y.fromResponse(e.icon)),Reflect.has(e,"metadata")&&(this.metadata=new l(e.metadata)),Reflect.has(e,"callToAction")&&(this.call_to_action=new l(e.callToAction)),Reflect.has(e,"hovercardButton")&&(this.hovercard_button=d.parseItem(e.hovercardButton)),Reflect.has(e,"isSubscribe")&&(this.is_subscribe=!!e.isSubscribe),Reflect.has(e,"playlistLength")&&(this.playlist_length=new l(e.playlistLength)),Reflect.has(e,"thumbnailOverlays")&&(this.thumbnail_overlays=d.parseArray(e.thumbnailOverlays)),this.left=parseFloat(e.left),this.width=parseFloat(e.width),this.top=parseFloat(e.top),this.aspect_ratio=parseFloat(e.aspectRatio),this.start_ms=parseFloat(e.startMs),this.end_ms=parseFloat(e.endMs),this.id=e.id}};n(Eu,"EndscreenElement");Eu.type="EndscreenElement";var qb=Eu;var Pu=class extends a{constructor(e){super(),this.id=e.playlistId,this.title=new l(e.title),this.author=new l(e.longBylineText),this.endpoint=new v(e.navigationEndpoint),this.thumbnails=y.fromResponse(e.thumbnail),this.video_count=new l(e.videoCountText)}};n(Pu,"EndScreenPlaylist");Pu.type="EndScreenPlaylist";var Sm=Pu;var Nu=class extends a{constructor(e){super(),this.id=e.videoId,this.title=new l(e.title),this.thumbnails=y.fromResponse(e.thumbnail),this.thumbnail_overlays=d.parseArray(e.thumbnailOverlays),this.author=new F(e.shortBylineText,e.ownerBadges),this.endpoint=new v(e.navigationEndpoint),this.short_view_count=new l(e.shortViewCountText),this.badges=d.parseArray(e.badges),this.duration={text:new l(e.lengthText).toString(),seconds:e.lengthInSeconds}}};n(Nu,"EndScreenVideo");Nu.type="EndScreenVideo";var Im=Nu;var Au=class extends a{constructor(e){super(),this.title=new l(e.title),this.visibility_button=W.parseItem(e.visibilityButton,k)}};n(Au,"EngagementPanelTitleHeader");Au.type="EngagementPanelTitleHeader";var km=Au;var Ru=class extends a{constructor(e){super(),this.info_text=new l(e.infoText),this.menu=W.parseItem(e.menu,H)}};n(Ru,"MacroMarkersInfoItem");Ru.type="MacroMarkersInfoItem";var Cm=Ru;var Mu=class extends a{constructor(e){super(),this.title=new l(e.title),this.time_description=new l(e.timeDescription),this.thumbnail=y.fromResponse(e.thumbnail),this.on_tap_endpoint=new v(e.onTap),this.layout=e.layout,this.is_highlighted=!!e.isHighlighted}};n(Mu,"MacroMarkersListItem");Mu.type="MacroMarkersListItem";var Bn=Mu;var Vu=class extends a{constructor(e){super(),this.contents=W.parseArray(e.contents,[Cm,Bn]),this.sync_button_label=new l(e.syncButtonLabel)}};n(Vu,"MacroMarkersList");Vu.type="MacroMarkersList";var Em=Vu;var Ou=class extends a{constructor(e){super(),this.contents=d.parseArray(e.contents),Reflect.has(e,"targetId")&&(this.target_id=e.targetId),Reflect.has(e,"continuations")&&(Reflect.has(e.continuations[0],"nextContinuationData")?this.continuation=e.continuations[0].nextContinuationData.continuation:Reflect.has(e.continuations[0],"reloadContinuationData")&&(this.continuation=e.continuations[0].reloadContinuationData.continuation)),Reflect.has(e,"header")&&(this.header=d.parseItem(e.header)),Reflect.has(e,"subMenu")&&(this.sub_menu=d.parseItem(e.subMenu))}};n(Ou,"SectionList");Ou.type="SectionList";var oe=Ou;var Du=class extends a{constructor(e){var i;super(),this.show_more_text=new l(e.showMoreText),this.show_less_text=new l(e.showLessText),Reflect.has(e,"attributedDescriptionBodyText")&&(this.attributed_description_body_text=(i=e.attributedDescriptionBodyText)===null||i===void 0?void 0:i.content)}};n(Du,"ExpandableVideoDescriptionBody");Du.type="ExpandableVideoDescriptionBody";var Pm=Du;var Bu=class extends a{constructor(e){super(),this.thumbnails=y.fromResponse(e.thumbnail),this.endpoint=new v(e.searchEndpoint),this.query=new l(e.query).toString()}};n(Bu,"SearchRefinementCard");Bu.type="SearchRefinementCard";var mo=Bu;var Lu=class extends a{constructor(e){super(),this.game=d.parseItem(e.game)}};n(Lu,"GameCard");Lu.type="GameCard";var Nm=Lu;var Fu=class extends a{constructor(e){super(),Reflect.has(e,"header")&&(this.header={collapsed_title:new l(e.header.collapsedTitle),collapsed_thumbnail:y.fromResponse(e.header.collapsedThumbnail),collapsed_label:new l(e.header.collapsedLabel),expanded_title:new l(e.header.expandedTitle)}),this.expanded_content=d.parseItem(e.expandedContent,Li),this.expand_button=d.parseItem(e.expandButton,k),this.collapse_button=d.parseItem(e.collapseButton,k)}};n(Fu,"ExpandableMetadata");Fu.type="ExpandableMetadata";var Am=Fu;var Yu=class extends a{constructor(e){super(),this.text=new l(e.text).toString(),this.style=e.style}};n(Yu,"ThumbnailOverlayTimeStatus");Yu.type="ThumbnailOverlayTimeStatus";var _o=Yu;var ju=class extends a{constructor(e){var i,o,s;super();let r=((i=e.thumbnailOverlays.find(c=>c.thumbnailOverlayTimeStatusRenderer))===null||i===void 0?void 0:i.thumbnailOverlayTimeStatusRenderer.text)||"N/A";this.id=e.videoId,this.title=new l(e.title),Reflect.has(e,"descriptionSnippet")&&(this.description_snippet=new l(e.descriptionSnippet)),Reflect.has(e,"detailedMetadataSnippets")&&(this.snippets=e.detailedMetadataSnippets.map(c=>({text:new l(c.snippetText),hover_text:new l(c.snippetHoverText)}))),this.expandable_metadata=d.parseItem(e.expandableMetadata,Am),this.thumbnails=y.fromResponse(e.thumbnail),this.thumbnail_overlays=d.parseArray(e.thumbnailOverlays),Reflect.has(e,"richThumbnail")&&(this.rich_thumbnail=d.parseItem(e.richThumbnail)),this.author=new F(e.ownerText,e.ownerBadges,(s=(o=e.channelThumbnailSupportedRenderers)===null||o===void 0?void 0:o.channelThumbnailWithLinkRenderer)===null||s===void 0?void 0:s.thumbnail),this.badges=d.parseArray(e.badges,nt),this.endpoint=new v(e.navigationEndpoint),this.published=new l(e.publishedTimeText),this.view_count=new l(e.viewCountText),this.short_view_count=new l(e.shortViewCountText),Reflect.has(e,"upcomingEventData")&&(this.upcoming=new Date(Number(`${e.upcomingEventData.startTime}000`))),this.duration={text:e.lengthText?new l(e.lengthText).toString():new l(r).toString(),seconds:ze(e.lengthText?new l(e.lengthText).toString():new l(r).toString())},this.show_action_menu=!!e.showActionMenu,this.is_watched=!!e.isWatched,this.menu=d.parseItem(e.menu,H),Reflect.has(e,"searchVideoResultEntityKey")&&(this.search_video_result_entity_key=e.searchVideoResultEntityKey)}get description(){var e;return this.snippets?this.snippets.map(i=>i.text.toString()).join(""):((e=this.description_snippet)===null||e===void 0?void 0:e.toString())||""}get is_live(){var e;return this.badges.some(i=>{if(i.style==="BADGE_STYLE_TYPE_LIVE_NOW"||i.label==="LIVE")return!0})||((e=this.thumbnail_overlays.firstOfType(_o))===null||e===void 0?void 0:e.style)==="LIVE"}get is_upcoming(){return this.upcoming&&this.upcoming>new Date}get is_premiere(){return this.badges.some(e=>e.label==="PREMIERE")}get is_4k(){return this.badges.some(e=>e.label==="4K")}get has_captions(){return this.badges.some(e=>e.label==="CC")}get best_thumbnail(){return this.thumbnails[0]}};n(ju,"Video");ju.type="Video";var Ln=ju;var Uu=class extends Ln{constructor(e){super(e)}};n(Uu,"VideoCard");Uu.type="VideoCard";var Rm=Uu;var Wu=class extends a{constructor(e){super(),this.cards=d.parseArray(e.cards,[mo,Bn,Nm,Rm]),this.header=d.parseItem(e.header),this.previous_button=d.parseItem(e.previousButton,k),this.next_button=d.parseItem(e.nextButton,k)}};n(Wu,"HorizontalCardList");Wu.type="HorizontalCardList";var Li=Wu;var Hu=class extends a{constructor(e){super(),this.label=new l(e.label),this.value=new l(e.value),this.accessibility_text=e.accessibilityText}};n(Hu,"Factoid");Hu.type="Factoid";var Mm=Hu;var Ju=class extends a{constructor(e){super(),this.title=new l(e.title),this.channel=new l(e.channel),this.channel_navigation_endpoint=new v(e.channelNavigationEndpoint),this.channel_thumbnail=y.fromResponse(e.channelThumbnail),this.publish_date=new l(e.publishDate),this.views=new l(e.views),this.factoids=d.parseArray(e.factoid,Mm)}};n(Ju,"VideoDescriptionHeader");Ju.type="VideoDescriptionHeader";var Vm=Ju;var Gu=class extends a{constructor(e){super(),this.section_title=new l(e.sectionTitle),this.creator_videos_button=d.parseItem(e.creatorVideosButton,k),this.creator_about_button=d.parseItem(e.creatorAboutButton,k),this.section_subtitle=new l(e.sectionSubtitle),this.channel_avatar=y.fromResponse(e.channelAvatar),this.channel_endpoint=new v(e.channelEndpoint)}};n(Gu,"VideoDescriptionInfocardsSection");Gu.type="VideoDescriptionInfocardsSection";var Om=Gu;var zu=class extends a{constructor(e){super(),this.carousel_lockups=d.parseArray(e.carouselLockups,zh),this.section_title=new l(e.sectionTitle)}};n(zu,"VideoDescriptionMusicSection");zu.type="VideoDescriptionMusicSection";var Fn=zu;var Ku=class extends a{constructor(e){super(),this.items=d.parseArray(e.items,[Vm,Pm,Fn,Om,Li])}};n(Ku,"StructuredDescriptionContent");Ku.type="StructuredDescriptionContent";var vo=Ku;var $u=class extends a{constructor(e){super(),this.header=d.parseItem(e.header,km),this.content=d.parseItem(e.content,[oe,De,vo,Em]),this.panel_identifier=e.panelIdentifier,this.target_id=e.targetId,this.visibility=e.visibility}};n($u,"EngagementPanelSectionList");$u.type="EngagementPanelSectionList";var Dm=$u;var qu=class extends a{constructor(e){super(),this.title=e.title,this.endpoint=new v(e.endpoint),this.selected=e.selected,this.content=d.parseItem(e.content)}};n(qu,"ExpandableTab");qu.type="ExpandableTab";var Yn=qu;var Xu=class extends a{constructor(e){super(),this.items=d.parseArray(e.items)}get contents(){return this.items}};n(Xu,"ExpandedShelfContents");Xu.type="ExpandedShelfContents";var Xb=Xu;var Qu=class extends a{constructor(e){super(),this.contents=d.parseArray(e.contents,be)}};n(Qu,"FeedFilterChipBar");Qu.type="FeedFilterChipBar";var mi=Qu;var Zu=class extends a{constructor(e){super(),this.title=new l(e.title)}};n(Zu,"FeedTabbedHeader");Zu.type="FeedTabbedHeader";var Bm=Zu;var el=class extends a{constructor(e){super(),this.title=new l(e.title),this.box_art=y.fromResponse(e.boxArt),this.box_art_overlay_text=new l(e.boxArtOverlayText),this.endpoint=new v(e.endpoint),this.is_official_box_art=!!e.isOfficialBoxArt}};n(el,"GameDetails");el.type="GameDetails";var Qb=el;var tl=class extends a{constructor(e){var i,o,s;super(),this.items=d.parseArray(e.items),Reflect.has(e,"header")&&(this.header=d.parseItem(e.header)),Reflect.has(e,"isCollapsible")&&(this.is_collapsible=e.isCollapsible),Reflect.has(e,"visibleRowCount")&&(this.visible_row_count=e.visibleRowCount),Reflect.has(e,"targetId")&&(this.target_id=e.targetId),this.continuation=((s=(o=(i=e.continuations)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.nextContinuationData)===null||s===void 0?void 0:s.continuation)||null}get contents(){return this.items}};n(tl,"Grid");tl.type="Grid";var go=tl;var il=class extends a{constructor(e){super(),this.id=e.channelId,this.author=new F(Object.assign(Object.assign({},e.title),{navigationEndpoint:e.navigationEndpoint}),e.ownerBadges,e.thumbnail),this.subscribers=new l(e.subscriberCountText),this.video_count=new l(e.videoCountText),this.endpoint=new v(e.navigationEndpoint),this.subscribe_button=d.parseItem(e.subscribeButton)}};n(il,"GridChannel");il.type="GridChannel";var Lm=il;var ol=class extends a{constructor(e){super(),this.title=new l(e.title)}};n(ol,"GridHeader");ol.type="GridHeader";var Zb=ol;var nl=class extends a{constructor(e){var i,o;super(),this.id=e.playlistId,this.title=new l(e.title),this.author=!((i=e.shortBylineText)===null||i===void 0)&&i.simpleText?new l(e.shortBylineText):!((o=e.longBylineText)===null||o===void 0)&&o.simpleText?new l(e.longBylineText):null,this.thumbnails=y.fromResponse(e.thumbnail),this.video_count=new l(e.videoCountText),this.video_count_short=new l(e.videoCountShortText),this.endpoint=new v(e.navigationEndpoint),this.secondary_endpoint=new v(e.secondaryNavigationEndpoint),this.thumbnail_overlays=d.parseArray(e.thumbnailOverlays)}};n(nl,"GridMix");nl.type="GridMix";var ey=nl;var sl=class extends a{constructor(e){var i;super();let o=(i=e.thumbnailOverlays.find(s=>s.hasOwnProperty("thumbnailOverlayTimeStatusRenderer")))===null||i===void 0?void 0:i.thumbnailOverlayTimeStatusRenderer;this.id=e.videoId,this.title=new l(e.title),this.thumbnails=y.fromResponse(e.thumbnail),this.duration=e.lengthText?new l(e.lengthText):o!=null&&o.text?new l(o.text):null,this.endpoint=new v(e.navigationEndpoint),this.badges=d.parseArray(e.badges,nt),this.metadata=new l(e.metadata),this.thumbnail_overlays=d.parseArray(e.thumbnailOverlays)}};n(sl,"GridMovie");sl.type="GridMovie";var ty=sl;var rl=class extends a{constructor(e){var i;super(),this.id=e.playlistId,this.title=new l(e.title),Reflect.has(e,"shortBylineText")&&(this.author=new F(e.shortBylineText,e.ownerBadges)),this.badges=d.parseArray(e.ownerBadges),this.endpoint=new v(e.navigationEndpoint),this.view_playlist=new l(e.viewPlaylistText),this.thumbnails=y.fromResponse(e.thumbnail),this.thumbnail_renderer=d.parseItem(e.thumbnailRenderer),this.sidebar_thumbnails=[].concat(...((i=e.sidebarThumbnails)===null||i===void 0?void 0:i.map(o=>y.fromResponse(o)))||[])||null,this.video_count=new l(e.thumbnailText),this.video_count_short=new l(e.videoCountShortText)}};n(rl,"GridPlaylist");rl.type="GridPlaylist";var Fm=rl;var al=class extends a{constructor(e){super(),this.thumbnail=y.fromResponse(e.thumbnail)}};n(al,"ShowCustomThumbnail");al.type="ShowCustomThumbnail";var Ym=al;var ul=class extends a{constructor(e){super(),Reflect.has(e,"text")&&(this.text=new l(e.text)),Reflect.has(e,"icon")&&Reflect.has(e.icon,"iconType")&&(this.icon_type=e.icon.iconType)}};n(ul,"ThumbnailOverlayBottomPanel");ul.type="ThumbnailOverlayBottomPanel";var jm=ul;var ll=class extends a{constructor(e){super(),this.title=new l(e.title),this.thumbnail_renderer=W.parseItem(e.thumbnailRenderer,Ym),this.endpoint=new v(e.navigationEndpoint),this.long_byline_text=new l(e.longBylineText),this.thumbnail_overlays=W.parseArray(e.thumbnailOverlays,jm),this.author=new F(e.shortBylineText,void 0)}};n(ll,"GridShow");ll.type="GridShow";var iy=ll;var cl=class extends a{constructor(e){var i,o;super();let s=(i=e.thumbnailOverlays.find(r=>r.hasOwnProperty("thumbnailOverlayTimeStatusRenderer")))===null||i===void 0?void 0:i.thumbnailOverlayTimeStatusRenderer;this.id=e.videoId,this.title=new l(e.title),this.thumbnails=y.fromResponse(e.thumbnail),this.thumbnail_overlays=d.parseArray(e.thumbnailOverlays),this.rich_thumbnail=d.parseItem(e.richThumbnail),this.published=new l(e.publishedTimeText),this.duration=e.lengthText?new l(e.lengthText):s!=null&&s.text?new l(s.text):null,this.author=e.shortBylineText&&new F(e.shortBylineText,e.ownerBadges),this.views=new l(e.viewCountText),this.short_view_count=new l(e.shortViewCountText),this.endpoint=new v(e.navigationEndpoint),this.menu=d.parseItem(e.menu,H),Reflect.has(e,"buttons")&&(this.buttons=d.parseArray(e.buttons)),Reflect.has(e,"upcomingEventData")&&(this.upcoming=new Date(Number(`${e.upcomingEventData.startTime}000`)),this.upcoming_text=new l(e.upcomingEventData.upcomingEventText),this.is_reminder_set=!!(!((o=e.upcomingEventData)===null||o===void 0)&&o.isReminderSet))}get is_upcoming(){return Boolean(this.upcoming&&this.upcoming>new Date)}};n(cl,"GridVideo");cl.type="GridVideo";var Um=cl;var dl=class extends a{constructor(e){super(),this.title=new l(e.formattedTitle),this.endpoint=new v(e.navigationEndpoint||e.serviceEndpoint),Reflect.has(e,"icon")&&Reflect.has(e.icon,"iconType")&&(this.icon_type=e.icon.iconType),Reflect.has(e,"thumbnail")&&(this.thumbnails=y.fromResponse(e.thumbnail)),Reflect.has(e,"badges")&&(this.badges=e.badges),this.is_primary=!!e.isPrimary}};n(dl,"GuideEntry");dl.type="GuideEntry";var xo=dl;var pl=class extends a{constructor(e){super(),this.expander_item=W.parseItem(e.expanderItem,xo),this.collapser_item=W.parseItem(e.collapserItem,xo),this.expandable_items=W.parseArray(e.expandableItems)}};n(pl,"GuideCollapsibleEntry");pl.type="GuideCollapsibleEntry";var oy=pl;var fl=class extends a{constructor(e){super(),this.header_entry=W.parseItem(e.headerEntry),this.expander_icon=e.expanderIcon.iconType,this.collapser_icon=e.collapserIcon.iconType,this.section_items=W.parseArray(e.sectionItems)}};n(fl,"GuideCollapsibleSectionEntry");fl.type="GuideCollapsibleSectionEntry";var ny=fl;var hl=class extends xo{constructor(e){super(e.entryRenderer.guideEntryRenderer),this.always_show=!!e.alwaysShow}};n(hl,"GuideDownloadsEntry");hl.type="GuideDownloadsEntry";var sy=hl;var ml=class extends a{constructor(e){super(),Reflect.has(e,"formattedTitle")&&(this.title=new l(e.formattedTitle)),this.items=W.parseArray(e.items)}};n(ml,"GuideSection");ml.type="GuideSection";var jn=ml;var _l=class extends jn{};n(_l,"GuideSubscriptionsSection");_l.type="GuideSubscriptionsSection";var Wm=_l;var vl=class extends a{constructor(e){super(),this.hashtag=new l(e.hashtag),this.hashtag_info=new l(e.hashtagInfoText)}};n(vl,"HashtagHeader");vl.type="HashtagHeader";var Hm=vl;var gl=class extends a{constructor(e){super(),this.hashtag=new l(e.hashtag),this.hashtag_info_text=new l(e.hashtagInfoText),this.hashtag_thumbnail=y.fromResponse(e.hashtagThumbnail),this.endpoint=new v(e.onTapCommand),this.hashtag_background_color=e.hashtagBackgroundColor,this.hashtag_video_count=new l(e.hashtagVideoCount),this.hashtag_channel_count=new l(e.hashtagChannelCount)}};n(gl,"HashtagTile");gl.type="HashtagTile";var ry=gl;var xl=class extends a{constructor(e){super(),this.thumbnails=y.fromResponse(e.thumbnail),this.on_tap_endpoint=new v(e.onTap)}};n(xl,"HeroPlaylistThumbnail");xl.type="HeroPlaylistThumbnail";var ay=xl;var bl=class extends a{constructor(e){super(),e.thumbnail&&(this.thumbnail={image:e.thumbnail.image.sources,endpoint:new v(e.thumbnail.onTap),on_long_press_endpoint:new v(e.thumbnail.onLongPress),content_mode:e.thumbnail.contentMode,crop_options:e.thumbnail.cropOptions}),this.background_image={image:e.backgroundImage.image.sources,gradient_image:e.backgroundImage.gradientImage.sources},this.strapline=e.strapline,this.title=e.title,this.description=e.description,this.cta={icon_name:e.cta.iconName,title:e.cta.title,endpoint:new v(e.cta.onTap),accessibility_text:e.cta.accessibilityText,state:e.cta.state},this.text_on_tap_endpoint=new v(e.textOnTap)}};n(bl,"Panel");bl.type="Panel";var yl=class extends a{constructor(e){super(),this.panels=pe(e.highlightsCarousel.panels.map(i=>new bl(i)))}};n(yl,"HighlightsCarousel");yl.type="HighlightsCarousel";var wl=yl;var Tl=class extends a{constructor(e){super(),this.suggestion=new l(e.suggestion),this.endpoint=new v(e.navigationEndpoint),Reflect.has(e,"icon")&&(this.icon_type=e.icon.iconType),Reflect.has(e,"serviceEndpoint")&&(this.service_endpoint=new v(e.serviceEndpoint))}};n(Tl,"SearchSuggestion");Tl.type="SearchSuggestion";var Jm=Tl;var Sl=class extends Jm{constructor(e){super(e)}};n(Sl,"HistorySuggestion");Sl.type="HistorySuggestion";var uy=Sl;var Il=class extends a{constructor(e){super(),this.visible_item_count=e.visibleItemCount,this.items=d.parseArray(e.items)}get contents(){return this.items}};n(Il,"HorizontalList");Il.type="HorizontalList";var ly=Il;var kl=class extends a{constructor(e){super(),this.items=d.parseArray(e.items),this.previous_button=d.parseItem(e.previousButton,k),this.next_button=d.parseItem(e.nextButton,k)}get contents(){return this.items}};n(kl,"HorizontalMovieList");kl.type="HorizontalMovieList";var cy=kl;var Cl=class extends a{constructor(e){var i;super(),this.icon_type=(i=e.icon)===null||i===void 0?void 0:i.iconType,Reflect.has(e,"tooltip")&&(this.tooltip=new l(e.tooltip).toString()),this.endpoint=new v(e.navigationEndpoint)}};n(Cl,"IconLink");Cl.type="IconLink";var Gm=Cl;var El=class extends a{constructor(e){super(),this.including_results_for=new l(e.includingResultsFor),this.corrected_query=new l(e.correctedQuery),this.corrected_query_endpoint=new v(e.correctedQueryEndpoint),this.search_only_for=Reflect.has(e,"searchOnlyFor")?new l(e.searchOnlyFor):void 0,this.original_query=Reflect.has(e,"originalQuery")?new l(e.originalQuery):void 0,this.original_query_endpoint=Reflect.has(e,"originalQueryEndpoint")?new v(e.originalQueryEndpoint):void 0}};n(El,"IncludingResultsFor");El.type="IncludingResultsFor";var dy=El;var Pl=class extends a{constructor(e){super(),this.title=new l(e.title),this.source=new l(e.source),this.paragraphs=e.paragraphs.map(i=>new l(i)),this.thumbnail=y.fromResponse(e.thumbnail),this.source_endpoint=new v(e.sourceEndpoint),this.truncate_paragraphs=!!e.truncateParagraphs,this.background=e.background,Reflect.has(e,"inlineLinkIcon")&&Reflect.has(e.inlineLinkIcon,"iconType")&&(this.inline_link_icon_type=e.inlineLinkIcon.iconType)}};n(Pl,"InfoPanelContent");Pl.type="InfoPanelContent";var zm=Pl;var Nl=class extends a{constructor(e){var i;super(),this.title=new l(e.title),this.menu=d.parseItem(e.menu,H),this.content=d.parseItem(e.content,zm),this.background=e.background,Reflect.has(e,"icon")&&(this.icon_type=(i=e.icon)===null||i===void 0?void 0:i.iconType)}};n(Nl,"InfoPanelContainer");Nl.type="InfoPanelContainer";var py=Nl;var Al=class extends a{constructor(e){super(),this.header_type=e.type,this.title=new l(e.title),this.description=new l(e.description),this.metadata=new l(e.metadata),this.badges=d.parseArray(e.badges,nt),this.box_art=y.fromResponse(e.boxArt),this.banner=y.fromResponse(e.banner),this.buttons=d.parseArray(e.buttons,[Ge,k]),this.auto_generated=new l(e.autoGenerated)}};n(Al,"InteractiveTabbedHeader");Al.type="InteractiveTabbedHeader";var Km=Al;var Rl=class extends a{constructor(e){super(),this.title=new l(e.title)}};n(Rl,"ItemSectionHeader");Rl.type="ItemSectionHeader";var $m=Rl;var Ml=class extends a{constructor(e){super(),this.title=new l(e.title),this.selected=!!e.selected,this.endpoint=new v(e.endpoint)}};n(Ml,"ItemSectionTab");Ml.type="Tab";var qm=Ml;var Vl=class extends a{constructor(e){super(),this.title=new l(e.title),this.tabs=d.parseArray(e.tabs,qm),Reflect.has(e,"endItems")&&(this.end_items=d.parseArray(e.endItems))}};n(Vl,"ItemSectionTabbedHeader");Vl.type="ItemSectionTabbedHeader";var Xm=Vl;var Ol=class extends a{constructor(e){var i,o,s;super(),this.header=d.parseItem(e.header,[Rn,$m,Xm]),this.contents=d.parseArray(e.contents),(e.targetId||e.sectionIdentifier)&&(this.target_id=e.target_id||e.sectionIdentifier),e.continuations&&(this.continuation=(s=(o=(i=e.continuations)===null||i===void 0?void 0:i.at(0))===null||o===void 0?void 0:o.nextContinuationData)===null||s===void 0?void 0:s.continuation)}};n(Ol,"ItemSection");Ol.type="ItemSection";var ye=Ol;var Dl=class extends a{constructor(e){super(),this.target={video_id:e.target.videoId},this.like_status=e.likeStatus,this.likes_allowed=e.likesAllowed,Reflect.has(e,"serviceEndpoints")&&(this.endpoints=e.serviceEndpoints.map(i=>new v(i)))}};n(Dl,"LikeButton");Dl.type="LikeButton";var fy=Dl;var Bl=class extends a{constructor(e){var i,o;super(),this.header=d.parseItem(e.header),this.initial_display_state=e.initialDisplayState,this.continuation=(o=(i=e.continuations[0])===null||i===void 0?void 0:i.reloadContinuationData)===null||o===void 0?void 0:o.continuation,this.client_messages={reconnect_message:new l(e.clientMessages.reconnectMessage),unable_to_reconnect_message:new l(e.clientMessages.unableToReconnectMessage),fatal_error:new l(e.clientMessages.fatalError),reconnected_message:new l(e.clientMessages.reconnectedMessage),generic_error:new l(e.clientMessages.genericError)},this.is_replay=!!e.isReplay}};n(Bl,"LiveChat");Bl.type="LiveChat";var Qm=Bl;var Ll=class extends a{constructor(e){super(),this.text=new l(e.text),Reflect.has(e,"icon")&&Reflect.has(e.icon,"iconType")&&(this.icon_type=e.icon.iconType),this.context_menu_button=d.parseItem(e.contextMenuButton,k)}};n(Ll,"LiveChatBannerHeader");Ll.type="LiveChatBannerHeader";var Zm=Ll;var Fl=class extends a{constructor(e){super(),this.header=d.parseItem(e.header,Zm),this.contents=d.parseItem(e.contents),this.action_id=e.actionId,this.viewer_is_creator=e.viewerIsCreator,this.target_id=e.targetId,this.is_stackable=e.isStackable,this.background_type=e.backgroundType}};n(Fl,"LiveChatBanner");Fl.type="LiveChatBanner";var e_=Fl;var Yl=class extends a{constructor(e){super(),this.banner=d.parseItem(e.bannerRenderer,e_)}};n(Yl,"AddBannerToLiveChatCommand");Yl.type="AddBannerToLiveChatCommand";var hy=Yl;var jl=class extends a{constructor(e){super(),this.item=d.parseItem(e.item),Reflect.has(e,"clientId")&&(this.client_id=e.clientId)}};n(jl,"AddChatItemAction");jl.type="AddChatItemAction";var t_=jl;var Ul=class extends a{constructor(e){super(),this.item=d.parseItem(e.item),this.duration_sec=e.durationSec}};n(Ul,"AddLiveChatTickerItemAction");Ul.type="AddLiveChatTickerItemAction";var my=Ul;var Wl=class extends a{constructor(e){super(),this.client_assigned_id=e.clientAssignedId}};n(Wl,"DimChatItemAction");Wl.type="DimChatItemAction";var _y=Wl;var Hl=class extends a{constructor(e){super(),this.menu_endpoint=new v(e.contextMenuEndpoint),this.moderation_buttons=d.parseArray(e.moderationButtons,k),this.auto_moderated_item=d.parseItem(e.autoModeratedItem),this.header_text=new l(e.headerText),this.timestamp=Math.floor(parseInt(e.timestampUsec)/1e3),this.id=e.id}};n(Hl,"LiveChatAutoModMessage");Hl.type="LiveChatAutoModMessage";var vy=Hl;var Jl=class extends a{constructor(e){super(),this.poll_question=new l(e.pollQuestion),this.author_photo=y.fromResponse(e.authorPhoto),this.choices=e.pollChoices.map(i=>({option_id:i.pollOptionId,text:new l(i.text).toString()})),this.collapsed_state_entity_key=e.collapsedStateEntityKey,this.live_chat_poll_state_entity_key=e.liveChatPollStateEntityKey,this.context_menu_button=d.parseItem(e.contextMenuButton,k)}};n(Jl,"LiveChatBannerPoll");Jl.type="LiveChatBannerPoll";var gy=Jl;var Gl=class extends a{constructor(e){super(),this.id=e.id,this.timestamp=Math.floor(parseInt(e.timestampUsec)/1e3),this.header_subtext=new l(e.headerSubtext),this.author=new F(e.authorName,e.authorBadges,e.authorPhoto,e.authorExternalChannelId),this.menu_endpoint=new v(e.contextMenuEndpoint)}};n(Gl,"LiveChatMembershipItem");Gl.type="LiveChatMembershipItem";var xy=Gl;var zl=class extends a{constructor(e){super(),this.message=new l(e.message),this.author=new F(e.authorName,e.authorBadges,e.authorPhoto,e.authorExternalChannelId),this.header_background_color=e.headerBackgroundColor,this.header_text_color=e.headerTextColor,this.body_background_color=e.bodyBackgroundColor,this.body_text_color=e.bodyTextColor,this.purchase_amount=new l(e.purchaseAmountText).toString(),this.menu_endpoint=new v(e.contextMenuEndpoint),this.timestamp=Math.floor(parseInt(e.timestampUsec)/1e3),this.timestamp_text=new l(e.timestampText).toString(),this.id=e.id}};n(zl,"LiveChatPaidMessage");zl.type="LiveChatPaidMessage";var by=zl;var Kl=class extends a{constructor(e){super(),this.id=e.id,this.author=new F(e.authorName,e.authorBadges,e.authorPhoto,e.authorExternalChannelId),this.money_chip_background_color=e.moneyChipBackgroundColor,this.money_chip_text_color=e.moneyChipTextColor,this.background_color=e.backgroundColor,this.author_name_text_color=e.authorNameTextColor,this.sticker=y.fromResponse(e.sticker),this.purchase_amount=new l(e.purchaseAmountText).toString(),this.menu_endpoint=new v(e.contextMenuEndpoint),this.context_menu=this.menu_endpoint,this.timestamp=Math.floor(parseInt(e.timestampUsec)/1e3)}};n(Kl,"LiveChatPaidSticker");Kl.type="LiveChatPaidSticker";var yy=Kl;var $l=class extends a{constructor(e){super(),this.id=e.id,this.timestamp=Math.floor(parseInt(e.timestampUsec)/1e3)}};n($l,"LiveChatPlaceholderItem");$l.type="LiveChatPlaceholderItem";var wy=$l;var ql=class extends a{constructor(e){super(),this.title=e.title,this.accessibility_title=e.accessibilityTitle,this.thumbnail=y.fromResponse(e.thumbnail),this.price=e.price,this.vendor_name=e.vendorName,this.from_vendor_text=e.fromVendorText,this.information_button=d.parseItem(e.informationButton),this.endpoint=new v(e.onClickCommand),this.creator_message=e.creatorMessage,this.creator_name=e.creatorName,this.author_photo=y.fromResponse(e.authorPhoto),this.information_dialog=d.parseItem(e.informationDialog),this.is_verified=e.isVerified,this.creator_custom_message=new l(e.creatorCustomMessage)}};n(ql,"LiveChatProductItem");ql.type="LiveChatProductItem";var Ty=ql;var Xl=class extends a{constructor(e){super(),this.message=new l(e.message),Reflect.has(e,"icon")&&Reflect.has(e.icon,"iconType")&&(this.icon_type=e.icon.iconType)}};n(Xl,"LiveChatRestrictedParticipation");Xl.type="LiveChatRestrictedParticipation";var Sy=Xl;var bo=class extends a{constructor(e){super(),this.message=new l(e.message),this.inline_action_buttons=d.parseArray(e.inlineActionButtons,k),this.timestamp=Math.floor(parseInt(e.timestampUsec)/1e3),this.id=e.id}};n(bo,"LiveChatMessageBase");bo.type="LiveChatMessageBase";var Ql=class extends bo{constructor(e){super(e),this.author=new F(e.authorName,e.authorBadges,e.authorPhoto,e.authorExternalChannelId),this.menu_endpoint=new v(e.contextMenuEndpoint)}};n(Ql,"LiveChatTextMessage");Ql.type="LiveChatTextMessage";var Iy=Ql;var Zl=class extends a{constructor(e){var i,o;super(),this.author=new F(e.authorName,e.authorBadges,e.authorPhoto,e.authorExternalChannelId),this.amount=new l(e.amount),this.duration_sec=e.durationSec,this.full_duration_sec=e.fullDurationSec,this.show_item=d.parseItem((o=(i=e.showItemEndpoint)===null||i===void 0?void 0:i.showLiveChatItemEndpoint)===null||o===void 0?void 0:o.renderer),this.show_item_endpoint=new v(e.showItemEndpoint),this.id=e.id}};n(Zl,"LiveChatTickerPaidMessageItem");Zl.type="LiveChatTickerPaidMessageItem";var i_=Zl;var ec=class extends i_{};n(ec,"LiveChatTickerPaidStickerItem");ec.type="LiveChatTickerPaidStickerItem";var ky=ec;var tc=class extends a{constructor(e){super(),this.id=e.id,this.detail=new l(e.detailText),this.author=new F(e.authorName,e.authorBadges,e.sponsorPhoto,e.authorExternalChannelId),this.duration_sec=e.durationSec}};n(tc,"LiveChatTickerSponsorItem");tc.type="LiveChatTickerSponsorItem";var Cy=tc;var ic=class extends bo{constructor(e){super(e),Reflect.has(e,"icon")&&Reflect.has(e.icon,"iconType")&&(this.icon_type=e.icon.iconType),this.action_button=d.parseItem(e.actionButton)}};n(ic,"LiveChatViewerEngagementMessage");ic.type="LiveChatViewerEngagementMessage";var Ey=ic;var oc=class extends a{constructor(e){super(),this.poll_question=new l(e.pollQuestion),this.thumbnails=y.fromResponse(e.thumbnail),this.metadata=new l(e.metadataText),this.live_chat_poll_type=e.liveChatPollType,this.context_menu_button=d.parseItem(e.contextMenuButton,k)}};n(oc,"PollHeader");oc.type="PollHeader";var Py=oc;var nc=class extends a{constructor(e){super(),this.id=e.id,this.contents=d.parse(e.contents),this.target_id=e.targetId}};n(nc,"LiveChatActionPanel");nc.type="LiveChatActionPanel";var o_=nc;var sc=class extends a{constructor(e){super(),this.deleted_state_message=new l(e.deletedStateMessage),this.target_item_id=e.targetItemId}};n(sc,"MarkChatItemAsDeletedAction");sc.type="MarkChatItemAsDeletedAction";var Ny=sc;var rc=class extends a{constructor(e){super(),this.deleted_state_message=new l(e.deletedStateMessage),this.external_channel_id=e.externalChannelId}};n(rc,"MarkChatItemsByAuthorAsDeletedAction");rc.type="MarkChatItemsByAuthorAsDeletedAction";var Ay=rc;var ac=class extends a{constructor(e){super(),this.target_action_id=e.targetActionId}};n(ac,"RemoveBannerForLiveChatCommand");ac.type="RemoveBannerForLiveChatCommand";var Ry=ac;var uc=class extends a{constructor(e){super(),this.target_item_id=e.targetItemId}};n(uc,"RemoveChatItemAction");uc.type="RemoveChatItemAction";var My=uc;var lc=class extends a{constructor(e){super(),this.external_channel_id=e.externalChannelId}};n(lc,"RemoveChatItemByAuthorAction");lc.type="RemoveChatItemByAuthorAction";var Vy=lc;var cc=class extends a{constructor(e){super(),this.target_item_id=e.targetItemId,this.replacement_item=d.parseItem(e.replacementItem)}};n(cc,"ReplaceChatItemAction");cc.type="ReplaceChatItemAction";var Oy=cc;var dc=class extends a{constructor(e){var i;super(),this.actions=d.parseArray((i=e.actions)===null||i===void 0?void 0:i.map(o=>(delete o.clickTrackingParams,o))),this.video_offset_time_msec=e.videoOffsetTimeMsec}};n(dc,"ReplayChatItemAction");dc.type="ReplayChatItemAction";var Dy=dc;var pc=class extends a{constructor(e){super(),this.panel_to_show=d.parseItem(e.panelToShow,o_)}};n(pc,"ShowLiveChatActionPanelAction");pc.type="ShowLiveChatActionPanelAction";var By=pc;var fc=class extends a{constructor(e){super(),this.dialog=d.parseItem(e.dialog)}};n(fc,"ShowLiveChatDialogAction");fc.type="ShowLiveChatDialogAction";var Ly=fc;var hc=class extends a{constructor(e){super(),this.tooltip=d.parseItem(e.tooltip)}};n(hc,"ShowLiveChatTooltipCommand");hc.type="ShowLiveChatTooltipCommand";var Fy=hc;var mc=class extends a{constructor(e){super(),this.date_text=new l(e.dateText).toString()}};n(mc,"UpdateDateTextAction");mc.type="UpdateDateTextAction";var n_=mc;var _c=class extends a{constructor(e){super(),this.description=new l(e.description)}};n(_c,"UpdateDescriptionAction");_c.type="UpdateDescriptionAction";var s_=_c;var vc=class extends a{constructor(e){super(),this.poll_to_update=d.parseItem(e.pollToUpdate)}};n(vc,"UpdateLiveChatPollAction");vc.type="UpdateLiveChatPollAction";var Yy=vc;var gc=class extends a{constructor(e){super(),this.title=new l(e.title)}};n(gc,"UpdateTitleAction");gc.type="UpdateTitleAction";var r_=gc;var xc=class extends a{constructor(e){super(),this.default_text=new l(e.defaultText).toString(),this.toggled_text=new l(e.toggledText).toString(),this.button_id=e.buttonId}};n(xc,"UpdateToggleButtonTextAction");xc.type="UpdateToggleButtonTextAction";var a_=xc;var bc=class extends a{constructor(e){super();let i=e.viewCount.videoViewCountRenderer;this.view_count=new l(i.viewCount),this.extra_short_view_count=new l(i.extraShortViewCount),this.is_live=i.isLive}};n(bc,"UpdateViewershipAction");bc.type="UpdateViewershipAction";var u_=bc;var yc=class extends nt{constructor(e){super(e),this.custom_thumbnail=y.fromResponse(e.customThumbnail)}};n(yc,"LiveChatAuthorBadge");yc.type="LiveChatAuthorBadge";var jy=yc;var wc=class extends a{constructor(e){super(),this.confirm_button=d.parseItem(e.confirmButton,k),this.dialog_messages=e.dialogMessages.map(i=>new l(i))}};n(wc,"LiveChatDialog");wc.type="LiveChatDialog";var Uy=wc;var Tc=class extends a{constructor(e){super(),this.author_name=new l(e.authorName),this.author_photo=y.fromResponse(e.authorPhoto),this.send_button=d.parseItem(e.sendButton,k),this.target_id=e.targetId}};n(Tc,"LiveChatMessageInput");Tc.type="LiveChatMessageInput";var Wy=Tc;var Sc=class extends k{constructor(e){super(e)}};n(Sc,"MenuNavigationItem");Sc.type="MenuNavigationItem";var Hy=Sc;var Ic=class extends k{constructor(e){super(e)}};n(Ic,"MenuServiceItem");Ic.type="MenuServiceItem";var Un=Ic;var kc=class extends a{constructor(e){super(),this.has_separator=!!e.hasSeparator,this.endpoint=new v(e.navigationEndpoint||e.serviceEndpoint)}};n(kc,"MenuServiceItemDownload");kc.type="MenuServiceItemDownload";var Jy=kc;var Cc=class extends a{constructor(e){super(),this.header=d.parse(e.header),this.sections=d.parse(e.sections),this.style=e.style}};n(Cc,"MultiPageMenu");Cc.type="MultiPageMenu";var Gy=Cc;var Ec=class extends a{constructor(e){super(),this.items=d.parse(e.items)}get contents(){return this.items}};n(Ec,"MultiPageMenuNotificationSection");Ec.type="MultiPageMenuNotificationSection";var zy=Ec;var Pc=class extends a{constructor(e){super()}};n(Pc,"MusicMenuItemDivider");Pc.type="MusicMenuItemDivider";var l_=Pc;var Nc=class extends a{constructor(e){var i;super(),Reflect.has(e,"title")&&Reflect.has(e.title,"musicMenuTitleRenderer")&&(this.title=new l((i=e.title.musicMenuTitleRenderer)===null||i===void 0?void 0:i.primaryText)),this.options=d.parseArray(e.options,[Rt,l_])}};n(Nc,"MusicMultiSelectMenu");Nc.type="MusicMultiSelectMenu";var c_=Nc;var Ac=class extends a{constructor(e){super(),this.title=new l(e.title),this.buttons=d.parse(e.buttons)}};n(Ac,"SimpleMenuHeader");Ac.type="SimpleMenuHeader";var d_=Ac;var Rc=class extends a{constructor(e){super(),this.title=e.title,this.description=e.description,this.thumbnails=y.fromResponse(e.thumbnail),this.price=e.price,this.vendor_name=e.vendorName,this.button_text=e.buttonText,this.button_accessibility_text=e.buttonAccessibilityText,this.from_vendor_text=e.fromVendorText,this.additional_fees_text=e.additionalFeesText,this.region_format=e.regionFormat,this.endpoint=new v(e.buttonCommand)}};n(Rc,"MerchandiseItem");Rc.type="MerchandiseItem";var Ky=Rc;var Mc=class extends a{constructor(e){super(),this.title=e.title,this.menu=d.parseItem(e.actionButton),this.items=d.parseArray(e.items)}get contents(){return this.items}};n(Mc,"MerchandiseShelf");Mc.type="MerchandiseShelf";var p_=Mc;var Vc=class extends a{constructor(e){super(),this.title=new l(e.title),this.contents=e.contents.map(i=>new l(i))}};n(Vc,"MetadataRow");Vc.type="MetadataRow";var $y=Vc;var Oc=class extends a{constructor(e){super(),this.rows=d.parseArray(e.rows),this.collapsed_item_count=e.collapsedItemCount}};n(Oc,"MetadataRowContainer");Oc.type="MetadataRowContainer";var f_=Oc;var Dc=class extends a{constructor(e){super(),this.content=new l(e.content),this.has_divider_line=e.hasDividerLine}};n(Dc,"MetadataRowHeader");Dc.type="MetadataRowHeader";var qy=Dc;var Bc=class extends a{constructor(e){super(),this.section_list=d.parseItem(e)}};n(Bc,"MetadataScreen");Bc.type="MetadataScreen";var Xy=Bc;var Lc=class extends a{constructor(e){super(),this.url_canonical=e.urlCanonical,this.title=e.title,this.description=e.description,this.thumbnail=y.fromResponse(e.thumbnail),this.site_name=e.siteName,this.app_name=e.appName,this.android_package=e.androidPackage,this.ios_app_store_id=e.iosAppStoreId,this.ios_app_arguments=e.iosAppArguments,this.og_type=e.ogType,this.url_applinks_web=e.urlApplinksWeb,this.url_applinks_ios=e.urlApplinksIos,this.url_applinks_android=e.urlApplinksAndroid,this.url_twitter_ios=e.urlTwitterIos,this.url_twitter_android=e.urlTwitterAndroid,this.twitter_card_type=e.twitterCardType,this.twitter_site_handle=e.twitterSiteHandle,this.schema_dot_org_type=e.schemaDotOrgType,this.noindex=e.noindex,this.is_unlisted=e.unlisted,this.is_family_safe=e.familySafe,this.tags=e.tags,this.available_countries=e.availableCountries}};n(Lc,"MicroformatData");Lc.type="MicroformatData";var Zt=Lc;var Fc=class extends Qt{constructor(e){super(e)}};n(Fc,"Mix");Fc.type="Mix";var Qy=Fc;var Yc=class extends a{constructor(e){var i,o,s;super();let r=((i=e.thumbnailOverlays.find(c=>c.thumbnailOverlayTimeStatusRenderer))===null||i===void 0?void 0:i.thumbnailOverlayTimeStatusRenderer.text)||"N/A";this.id=e.videoId,this.title=new l(e.title),Reflect.has(e,"descriptionSnippet")&&(this.description_snippet=new l(e.descriptionSnippet)),this.top_metadata_items=new l(e.topMetadataItems),this.thumbnails=y.fromResponse(e.thumbnail),this.thumbnail_overlays=d.parseArray(e.thumbnailOverlays),this.author=new F(e.longBylineText,e.ownerBadges,(s=(o=e.channelThumbnailSupportedRenderers)===null||o===void 0?void 0:o.channelThumbnailWithLinkRenderer)===null||s===void 0?void 0:s.thumbnail),this.duration={text:e.lengthText?new l(e.lengthText).toString():new l(r).toString(),seconds:ze(e.lengthText?new l(e.lengthText).toString():new l(r).toString())},this.endpoint=new v(e.navigationEndpoint),this.badges=d.parseArray(e.badges),this.use_vertical_poster=e.useVerticalPoster,this.show_action_menu=e.showActionMenu,this.menu=d.parseItem(e.menu,H)}};n(Yc,"Movie");Yc.type="Movie";var Zy=Yc;var jc=class extends a{constructor(e){var i;return super(),(i=e.movingThumbnailDetails)===null||i===void 0?void 0:i.thumbnails.map(o=>new y(o)).sort((o,s)=>s.width-o.width)}};n(jc,"MovingThumbnail");jc.type="MovingThumbnail";var ew=jc;var Uc=class extends a{constructor(e){super(),this.title=new l(e.title)}};n(Uc,"MusicCardShelfHeaderBasic");Uc.type="MusicCardShelfHeaderBasic";var h_=Uc;var Wc=class extends a{constructor(e){super(),this.icon_type=e.icon.iconType,this.label=e.accessibilityData.accessibilityData.label}};n(Wc,"MusicInlineBadge");Wc.type="MusicInlineBadge";var m_=Wc;var Hc=class extends a{constructor(e){var i,o;super(),this.endpoint=new v(e.playNavigationEndpoint),this.play_icon_type=e.playIcon.iconType,this.pause_icon_type=e.pauseIcon.iconType,Reflect.has(e,"accessibilityPlayData")&&(this.play_label=(i=e.accessibilityPlayData.accessibilityData)===null||i===void 0?void 0:i.label),Reflect.has(e,"accessibilityPauseData")&&(this.pause_label=(o=e.accessibilityPauseData.accessibilityData)===null||o===void 0?void 0:o.label),this.icon_color=e.iconColor}};n(Hc,"MusicPlayButton");Hc.type="MusicPlayButton";var __=Hc;var Jc=class extends a{constructor(e){super(),this.content=d.parseItem(e.content,__),this.content_position=e.contentPosition,this.display_style=e.displayStyle}};n(Jc,"MusicItemThumbnailOverlay");Jc.type="MusicItemThumbnailOverlay";var Fi=Jc;var Gc=class extends a{constructor(e){super(),this.contents=y.fromResponse(e.thumbnail)}};n(Gc,"MusicThumbnail");Gc.type="MusicThumbnail";var ei=Gc;var zc=class extends a{constructor(e){super(),this.thumbnail=d.parseItem(e.thumbnail,ei),this.title=new l(e.title),this.subtitle=new l(e.subtitle),this.buttons=d.parseArray(e.buttons,k),this.menu=d.parseItem(e.menu,H),this.on_tap=new v(e.onTap),this.header=d.parseItem(e.header,h_),Reflect.has(e,"endIcon")&&Reflect.has(e.endIcon,"iconType")&&(this.end_icon_type=e.endIcon.iconType),this.subtitle_badges=d.parseArray(e.subtitleBadges,m_),this.thumbnail_overlay=d.parseItem(e.thumbnailOverlay,Fi),Reflect.has(e,"contents")&&(this.contents=d.parseArray(e.contents))}};n(zc,"MusicCardShelf");zc.type="MusicCardShelf";var v_=zc;var Kc=class extends a{constructor(e){super(),this.title=new l(e.title),Reflect.has(e,"strapline")&&(this.strapline=new l(e.strapline)),Reflect.has(e,"thumbnail")&&(this.thumbnail=d.parseItem(e.thumbnail,ei)),Reflect.has(e,"moreContentButton")&&(this.more_content=d.parseItem(e.moreContentButton,k)),Reflect.has(e,"endIcons")&&(this.end_icons=d.parseArray(e.endIcons,Gm))}};n(Kc,"MusicCarouselShelfBasicHeader");Kc.type="MusicCarouselShelfBasicHeader";var g_=Kc;var $c=class extends a{constructor(e){super(),this.button_text=new l(e.buttonText).toString(),this.endpoint=new v(e.clickCommand)}};n($c,"MusicNavigationButton");$c.type="MusicNavigationButton";var Wn=$c;var qc=class extends a{constructor(e){super(),this.title=new l(e.text),this.display_priority=e.displayPriority}};n(qc,"MusicResponsiveListItemFixedColumn");qc.type="musicResponsiveListItemFlexColumnRenderer";var x_=qc;var Xc=class extends a{constructor(e){super(),this.title=new l(e.text),this.display_priority=e.displayPriority}};n(Xc,"MusicResponsiveListItemFlexColumn");Xc.type="MusicResponsiveListItemFlexColumn";var b_=Xc;var ti,Qc,ow,nw,tw,iw,sw,rw,aw,uw,Zc=class extends a{constructor(e){var i,o,s,r,c,p;switch(super(),ti.add(this),Qc.set(this,void 0),this.flex_columns=d.parseArray(e.flexColumns,b_),this.fixed_columns=d.parseArray(e.fixedColumns,x_),S(this,Qc,{video_id:((i=e==null?void 0:e.playlistItemData)===null||i===void 0?void 0:i.videoId)||null,playlist_set_video_id:((o=e==null?void 0:e.playlistItemData)===null||o===void 0?void 0:o.playlistSetVideoId)||null},"f"),this.endpoint=e.navigationEndpoint?new v(e.navigationEndpoint):null,(p=(c=(r=(s=this.endpoint)===null||s===void 0?void 0:s.payload)===null||r===void 0?void 0:r.browseEndpointContextSupportedConfigs)===null||c===void 0?void 0:c.browseEndpointContextMusicConfig)===null||p===void 0?void 0:p.pageType){case"MUSIC_PAGE_TYPE_ALBUM":this.item_type="album",u(this,ti,"m",aw).call(this);break;case"MUSIC_PAGE_TYPE_PLAYLIST":this.item_type="playlist",u(this,ti,"m",uw).call(this);break;case"MUSIC_PAGE_TYPE_ARTIST":case"MUSIC_PAGE_TYPE_USER_CHANNEL":this.item_type="artist",u(this,ti,"m",sw).call(this);break;case"MUSIC_PAGE_TYPE_LIBRARY_ARTIST":this.item_type="library_artist",u(this,ti,"m",rw).call(this);break;default:this.flex_columns[1]?u(this,ti,"m",nw).call(this):u(this,ti,"m",ow).call(this);break}e.index&&(this.index=new l(e.index)),this.thumbnail=d.parseItem(e.thumbnail,ei),this.badges=d.parseArray(e.badges),this.menu=d.parseItem(e.menu,H),this.overlay=d.parseItem(e.overlay,Fi)}get thumbnails(){var e;return((e=this.thumbnail)===null||e===void 0?void 0:e.contents)||[]}};n(Zc,"MusicResponsiveListItem");Qc=new WeakMap,ti=new WeakSet,ow=n(function(){this.title=this.flex_columns.first().key("title").instanceof(l).toString(),this.endpoint?this.item_type="endpoint":this.item_type="unknown"},"_MusicResponsiveListItem_parseOther"),nw=n(function(){var e,i;((i=(e=this.flex_columns.at(1))===null||e===void 0?void 0:e.key("title").instanceof(l).runs)===null||i===void 0?void 0:i.some(s=>s.text.match(/(.*?) views/)))?(this.item_type="video",u(this,ti,"m",iw).call(this)):(this.item_type="song",u(this,ti,"m",tw).call(this))},"_MusicResponsiveListItem_parseVideoOrSong"),tw=n(function(){var e,i,o,s,r,c,p,f,m,_,b,w,T,I,C;this.id=u(this,Qc,"f").video_id||((i=(e=this.endpoint)===null||e===void 0?void 0:e.payload)===null||i===void 0?void 0:i.videoId),this.title=this.flex_columns.first().key("title").instanceof(l).toString();let P=((r=(s=(o=this.flex_columns.at(1))===null||o===void 0?void 0:o.key("title").instanceof(l).runs)===null||s===void 0?void 0:s.find(A=>/^\d+$/.test(A.text.replace(/:/g,""))))===null||r===void 0?void 0:r.text)||((p=(c=this.fixed_columns.first())===null||c===void 0?void 0:c.key("title").instanceof(l))===null||p===void 0?void 0:p.toString());P&&(this.duration={text:P,seconds:ze(P)});let R=((m=(f=this.flex_columns.at(1))===null||f===void 0?void 0:f.key("title").instanceof(l).runs)===null||m===void 0?void 0:m.find(A=>Qe(A)&&A.endpoint&&A.endpoint.payload.browseId.startsWith("MPR")))||((b=(_=this.flex_columns.at(2))===null||_===void 0?void 0:_.key("title").instanceof(l).runs)===null||b===void 0?void 0:b.find(A=>Qe(A)&&A.endpoint&&A.endpoint.payload.browseId.startsWith("MPR")));R&&Qe(R)&&(this.album={id:(T=(w=R.endpoint)===null||w===void 0?void 0:w.payload)===null||T===void 0?void 0:T.browseId,name:R.text,endpoint:R.endpoint});let V=(C=(I=this.flex_columns.at(1))===null||I===void 0?void 0:I.key("title").instanceof(l).runs)===null||C===void 0?void 0:C.filter(A=>Qe(A)&&A.endpoint&&A.endpoint.payload.browseId.startsWith("UC"));V&&(this.artists=V.map(A=>{var K,Z;return{name:A.text,channel_id:Qe(A)?(Z=(K=A.endpoint)===null||K===void 0?void 0:K.payload)===null||Z===void 0?void 0:Z.browseId:void 0,endpoint:Qe(A)?A.endpoint:void 0}}))},"_MusicResponsiveListItem_parseSong"),iw=n(function(){var e,i,o,s,r,c,p,f,m,_;this.id=u(this,Qc,"f").video_id,this.title=this.flex_columns.first().key("title").instanceof(l).toString(),this.views=(o=(i=(e=this.flex_columns.at(1))===null||e===void 0?void 0:e.key("title").instanceof(l).runs)===null||i===void 0?void 0:i.find(T=>T.text.match(/(.*?) views/)))===null||o===void 0?void 0:o.toString();let b=(r=(s=this.flex_columns.at(1))===null||s===void 0?void 0:s.key("title").instanceof(l).runs)===null||r===void 0?void 0:r.filter(T=>Qe(T)&&T.endpoint&&T.endpoint.payload.browseId.startsWith("UC"));b&&(this.authors=b.map(T=>{var I,C;return{name:T.text,channel_id:Qe(T)?(C=(I=T.endpoint)===null||I===void 0?void 0:I.payload)===null||C===void 0?void 0:C.browseId:void 0,endpoint:Qe(T)?T.endpoint:void 0}}));let w=((p=(c=this.flex_columns[1].key("title").instanceof(l).runs)===null||c===void 0?void 0:c.find(T=>/^\d+$/.test(T.text.replace(/:/g,""))))===null||p===void 0?void 0:p.text)||((_=(m=(f=this.fixed_columns.first())===null||f===void 0?void 0:f.key("title").instanceof(l).runs)===null||m===void 0?void 0:m.find(T=>/^\d+$/.test(T.text.replace(/:/g,""))))===null||_===void 0?void 0:_.text);w&&(this.duration={text:w,seconds:ze(w)})},"_MusicResponsiveListItem_parseVideo"),sw=n(function(){var e,i,o,s,r,c;this.id=(i=(e=this.endpoint)===null||e===void 0?void 0:e.payload)===null||i===void 0?void 0:i.browseId,this.name=this.flex_columns.first().key("title").instanceof(l).toString(),this.subtitle=(o=this.flex_columns.at(1))===null||o===void 0?void 0:o.key("title").instanceof(l),this.subscribers=((c=(r=(s=this.subtitle)===null||s===void 0?void 0:s.runs)===null||r===void 0?void 0:r.find(p=>/^(\d*\.)?\d+[M|K]? subscribers?$/i.test(p.text)))===null||c===void 0?void 0:c.text)||""},"_MusicResponsiveListItem_parseArtist"),rw=n(function(){var e,i,o,s;this.name=this.flex_columns.first().key("title").instanceof(l).toString(),this.subtitle=(e=this.flex_columns.at(1))===null||e===void 0?void 0:e.key("title").instanceof(l),this.song_count=((s=(o=(i=this.subtitle)===null||i===void 0?void 0:i.runs)===null||o===void 0?void 0:o.find(r=>/^\d+(,\d+)? songs?$/i.test(r.text)))===null||s===void 0?void 0:s.text)||""},"_MusicResponsiveListItem_parseLibraryArtist"),aw=n(function(){var e,i,o,s,r,c,p,f,m;this.id=(i=(e=this.endpoint)===null||e===void 0?void 0:e.payload)===null||i===void 0?void 0:i.browseId,this.title=this.flex_columns.first().title.toString();let _=(s=(o=this.flex_columns.at(1))===null||o===void 0?void 0:o.key("title").instanceof(l).runs)===null||s===void 0?void 0:s.find(b=>Qe(b)&&b.endpoint&&b.endpoint.payload.browseId.startsWith("UC"));_&&Qe(_)&&(this.author={name:_.text,channel_id:(c=(r=_.endpoint)===null||r===void 0?void 0:r.payload)===null||c===void 0?void 0:c.browseId,endpoint:_.endpoint}),this.year=(m=(f=(p=this.flex_columns.at(1))===null||p===void 0?void 0:p.key("title").instanceof(l).runs)===null||f===void 0?void 0:f.find(b=>/^[12][0-9]{3}$/.test(b.text)))===null||m===void 0?void 0:m.text},"_MusicResponsiveListItem_parseAlbum"),uw=n(function(){var e,i,o,s,r,c,p,f;this.id=(i=(e=this.endpoint)===null||e===void 0?void 0:e.payload)===null||i===void 0?void 0:i.browseId,this.title=this.flex_columns.first().title.toString();let m=(s=(o=this.flex_columns.at(1))===null||o===void 0?void 0:o.key("title").instanceof(l).runs)===null||s===void 0?void 0:s.find(b=>b.text.match(/\d+ (song|songs)/));this.item_count=m?m.text:void 0;let _=(c=(r=this.flex_columns.at(1))===null||r===void 0?void 0:r.key("title").instanceof(l).runs)===null||c===void 0?void 0:c.find(b=>Qe(b)&&b.endpoint&&b.endpoint.payload.browseId.startsWith("UC"));_&&Qe(_)&&(this.author={name:_.text,channel_id:(f=(p=_.endpoint)===null||p===void 0?void 0:p.payload)===null||f===void 0?void 0:f.browseId,endpoint:_.endpoint})},"_MusicResponsiveListItem_parsePlaylist");Zc.type="MusicResponsiveListItem";var Yi=Zc;var ed=class extends a{constructor(e){var i,o,s,r,c,p,f,m,_,b,w,T,I,C,P,R,V,A,K,Z,ue,ve;switch(super(),this.title=new l(e.title),this.endpoint=new v(e.navigationEndpoint),this.id=((o=(i=this.endpoint)===null||i===void 0?void 0:i.payload)===null||o===void 0?void 0:o.browseId)||((r=(s=this.endpoint)===null||s===void 0?void 0:s.payload)===null||r===void 0?void 0:r.videoId),this.subtitle=new l(e.subtitle),this.badges=d.parse(e.subtitleBadges),(m=(f=(p=(c=this.endpoint)===null||c===void 0?void 0:c.payload)===null||p===void 0?void 0:p.browseEndpointContextSupportedConfigs)===null||f===void 0?void 0:f.browseEndpointContextMusicConfig)===null||m===void 0?void 0:m.pageType){case"MUSIC_PAGE_TYPE_ARTIST":this.item_type="artist";break;case"MUSIC_PAGE_TYPE_PLAYLIST":this.item_type="playlist";break;case"MUSIC_PAGE_TYPE_ALBUM":this.item_type="album";break;default:((b=(_=this.endpoint)===null||_===void 0?void 0:_.metadata)===null||b===void 0?void 0:b.api_url)==="/next"?this.item_type="endpoint":!((w=this.subtitle.runs)===null||w===void 0)&&w[0]?this.subtitle.runs[0].text!=="Song"?this.item_type="video":this.item_type="song":this.endpoint?this.item_type="endpoint":this.item_type="unknown";break}if(this.item_type=="artist")this.subscribers=((I=(T=this.subtitle.runs)===null||T===void 0?void 0:T.find(X=>/^(\d*\.)?\d+[M|K]? subscribers?$/i.test(X.text)))===null||I===void 0?void 0:I.text)||"";else if(this.item_type=="playlist"){let X=(C=this.subtitle.runs)===null||C===void 0?void 0:C.find(z=>z.text.match(/\d+ songs|song/));this.item_count=X?X.text:null}else if(this.item_type=="album"){let X=(P=this.subtitle.runs)===null||P===void 0?void 0:P.filter(z=>{var ie,ee;return(ee=(ie=z.endpoint)===null||ie===void 0?void 0:ie.payload)===null||ee===void 0?void 0:ee.browseId.startsWith("UC")});X&&(this.artists=X.map(z=>{var ie,ee;return{name:z.text,channel_id:(ee=(ie=z.endpoint)===null||ie===void 0?void 0:ie.payload)===null||ee===void 0?void 0:ee.browseId,endpoint:z.endpoint}})),this.year=(R=this.subtitle.runs)===null||R===void 0?void 0:R.slice(-1)[0].text,isNaN(Number(this.year))&&delete this.year}else if(this.item_type=="video"){this.views=((A=(V=this===null||this===void 0?void 0:this.subtitle.runs)===null||V===void 0?void 0:V.find(z=>z==null?void 0:z.text.match(/(.*?) views/)))===null||A===void 0?void 0:A.text)||"N/A";let X=(K=this.subtitle.runs)===null||K===void 0?void 0:K.find(z=>{var ie,ee,Ve;return(Ve=(ee=(ie=z.endpoint)===null||ie===void 0?void 0:ie.payload)===null||ee===void 0?void 0:ee.browseId)===null||Ve===void 0?void 0:Ve.startsWith("UC")});X&&(this.author={name:X==null?void 0:X.text,channel_id:(ue=(Z=X==null?void 0:X.endpoint)===null||Z===void 0?void 0:Z.payload)===null||ue===void 0?void 0:ue.browseId,endpoint:X==null?void 0:X.endpoint})}else if(this.item_type=="song"){let X=(ve=this.subtitle.runs)===null||ve===void 0?void 0:ve.filter(z=>{var ie,ee;return(ee=(ie=z.endpoint)===null||ie===void 0?void 0:ie.payload)===null||ee===void 0?void 0:ee.browseId.startsWith("UC")});X&&(this.artists=X.map(z=>{var ie,ee;return{name:z==null?void 0:z.text,channel_id:(ee=(ie=z==null?void 0:z.endpoint)===null||ie===void 0?void 0:ie.payload)===null||ee===void 0?void 0:ee.browseId,endpoint:z==null?void 0:z.endpoint}}))}this.thumbnail=y.fromResponse(e.thumbnailRenderer.musicThumbnailRenderer.thumbnail),this.thumbnail_overlay=d.parseItem(e.thumbnailOverlay,Fi),this.menu=d.parseItem(e.menu,H)}};n(ed,"MusicTwoRowItem");ed.type="MusicTwoRowItem";var Hn=ed;var td=class extends a{constructor(e){super(),this.header=d.parseItem(e.header,g_),this.contents=d.parseArray(e.contents,[Hn,Yi,Wn]),Reflect.has(e,"numItemsPerColumn")&&(this.num_items_per_column=parseInt(e.numItemsPerColumn))}};n(td,"MusicCarouselShelf");td.type="MusicCarouselShelf";var Re=td;var id=class extends a{constructor(e){super(),this.description=new l(e.description),Reflect.has(e,"maxCollapsedLines")&&(this.max_collapsed_lines=e.maxCollapsedLines),Reflect.has(e,"maxExpandedLines")&&(this.max_expanded_lines=e.maxExpandedLines),this.footer=new l(e.footer)}};n(id,"MusicDescriptionShelf");id.type="MusicDescriptionShelf";var yo=id;var od=class extends a{constructor(e){var i,o,s,r,c,p,f,m,_;super(),this.title=new l(e.title),this.description=new l(e.description),this.subtitle=new l(e.subtitle),this.second_subtitle=new l(e.secondSubtitle),this.year=((o=(i=this.subtitle.runs)===null||i===void 0?void 0:i.find(w=>/^[12][0-9]{3}$/.test(w.text)))===null||o===void 0?void 0:o.text)||"",this.song_count=((r=(s=this.second_subtitle.runs)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.text)||"",this.total_duration=((p=(c=this.second_subtitle.runs)===null||c===void 0?void 0:c[2])===null||p===void 0?void 0:p.text)||"",this.thumbnails=y.fromResponse(e.thumbnail.croppedSquareThumbnailRenderer.thumbnail),this.badges=d.parseArray(e.subtitleBadges);let b=(f=this.subtitle.runs)===null||f===void 0?void 0:f.find(w=>{var T,I;return(I=(T=w==null?void 0:w.endpoint)===null||T===void 0?void 0:T.payload)===null||I===void 0?void 0:I.browseId.startsWith("UC")});b&&(this.author={name:b.text,channel_id:(_=(m=b.endpoint)===null||m===void 0?void 0:m.payload)===null||_===void 0?void 0:_.browseId,endpoint:b.endpoint}),this.menu=d.parseItem(e.menu)}};n(od,"MusicDetailHeader");od.type="MusicDetailHeader";var wo=od;var nd=class extends a{constructor(e){super(),this.playlist_id=e.playlistId,this.supported_download_states=e.supportedDownloadStates}};n(nd,"MusicDownloadStateBadge");nd.type="MusicDownloadStateBadge";var lw=nd;var sd=class extends a{constructor(e){super(),this.header=d.parseItem(e.header)}};n(sd,"MusicEditablePlaylistDetailHeader");sd.type="MusicEditablePlaylistDetailHeader";var y_=sd;var rd=class extends a{constructor(e){super(),this.element=Reflect.has(e,"elementRenderer")?d.parseItem(e,Dn):null}};n(rd,"MusicElementHeader");rd.type="MusicElementHeader";var ad=rd;var ud=class extends a{constructor(e){super(),Reflect.has(e,"header")&&(this.header=d.parseItem(e.header)),Reflect.has(e,"title")&&(this.title=new l(e.title))}};n(ud,"MusicHeader");ud.type="MusicHeader";var ji=ud;var ld=class extends a{constructor(e){super(),this.title=new l(e.title),this.description=new l(e.description),this.thumbnail=d.parseItem(e.thumbnail,ei)}};n(ld,"MusicImmersiveHeader");ld.type="MusicImmersiveHeader";var w_=ld;var cd=class{constructor(e){this.icon_name=e.iconName,this.endpoint=new v(e.onTap),this.a11y_text=e.a11yText,this.style=e.style}};n(cd,"ActionButton");cd.type="ActionButton";var dd=class{constructor(e){this.image=e.image.image.sources,this.content_mode=e.image.contentMode,this.crop_options=e.image.cropOptions,this.image_aspect_ratio=e.imageAspectRatio,this.caption=e.caption,this.action_buttons=e.actionButtons.map(i=>new cd(i))}};n(dd,"Panel");dd.type="Panel";var pd=class extends a{constructor(e){super(),this.header=e.shelf.header,this.panels=e.shelf.panels.map(i=>new dd(i))}};n(pd,"MusicLargeCardItemCarousel");pd.type="MusicLargeCardItemCarousel";var cw=pd;var fd=class extends a{constructor(e){var i,o,s;super(),this.playlist_id=e.playlistId,this.contents=d.parseArray(e.contents,Yi),this.collapsed_item_count=e.collapsedItemCount,this.continuation=((s=(o=(i=e.continuations)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.nextContinuationData)===null||s===void 0?void 0:s.continuation)||null}};n(fd,"MusicPlaylistShelf");fd.type="MusicPlaylistShelf";var To=fd;var hd=class extends a{constructor(e){var i,o,s,r,c;super(),this.title=new l(e.title),this.thumbnail=y.fromResponse(e.thumbnail),this.endpoint=new v(e.navigationEndpoint),this.selected=e.selected,this.video_id=e.videoId,this.duration={text:new l(e.lengthText).toString(),seconds:ze(new l(e.lengthText).toString())};let p=(i=new l(e.longBylineText).runs)===null||i===void 0?void 0:i.find(m=>{var _,b,w;return(w=(b=(_=m.endpoint)===null||_===void 0?void 0:_.payload)===null||b===void 0?void 0:b.browseId)===null||w===void 0?void 0:w.startsWith("MPR")}),f=(o=new l(e.longBylineText).runs)===null||o===void 0?void 0:o.filter(m=>{var _,b,w;return(w=(b=(_=m.endpoint)===null||_===void 0?void 0:_.payload)===null||b===void 0?void 0:b.browseId)===null||w===void 0?void 0:w.startsWith("UC")});this.author=new l(e.shortBylineText).toString(),p&&(this.album={id:(r=(s=p.endpoint)===null||s===void 0?void 0:s.payload)===null||r===void 0?void 0:r.browseId,name:p.text,year:(c=new l(e.longBylineText).runs)===null||c===void 0?void 0:c.slice(-1)[0].text,endpoint:p.endpoint}),f&&(this.artists=f.map(m=>{var _,b;return{name:m.text,channel_id:(b=(_=m.endpoint)===null||_===void 0?void 0:_.payload)===null||b===void 0?void 0:b.browseId,endpoint:m.endpoint}})),this.badges=d.parseArray(e.badges),this.menu=d.parseItem(e.menu),this.set_video_id=e.playlistSetVideoId}};n(hd,"PlaylistPanelVideo");hd.type="PlaylistPanelVideo";var _i=hd;var md=class extends a{constructor(e){super(),this.primary=d.parseItem(e.primaryRenderer,_i),Reflect.has(e,"counterpart")&&(this.counterpart=pe(e.counterpart.map(i=>d.parseItem(i.counterpartRenderer,_i))||[]))}};n(md,"PlaylistPanelVideoWrapper");md.type="PlaylistPanelVideoWrapper";var T_=md;var _d=class extends a{constructor(e){var i,o,s,r,c,p;super(),this.title=e.title,this.title_text=new l(e.titleText),this.contents=d.parseArray(e.contents,[T_,_i,Di]),this.playlist_id=e.playlistId,this.is_infinite=e.isInfinite,this.continuation=((s=(o=(i=e.continuations)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.nextRadioContinuationData)===null||s===void 0?void 0:s.continuation)||((p=(c=(r=e.continuations)===null||r===void 0?void 0:r[0])===null||c===void 0?void 0:c.nextContinuationData)===null||p===void 0?void 0:p.continuation),this.is_editable=e.isEditable,this.preview_description=e.previewDescription,this.num_items_to_show=e.numItemsToShow}};n(_d,"PlaylistPanel");_d.type="PlaylistPanel";var ii=_d;var vd=class extends a{constructor(e){super(),this.content=d.parseItem(e.content,ii)}};n(vd,"MusicQueue");vd.type="MusicQueue";var Jn=vd;var gd=class extends a{constructor(e){var i,o,s,r;super(),this.title=new l(e.title),this.contents=d.parseArray(e.contents,Yi),Reflect.has(e,"bottomEndpoint")&&(this.endpoint=new v(e.bottomEndpoint)),Reflect.has(e,"continuations")&&(this.continuation=((o=(i=e.continuations)===null||i===void 0?void 0:i[0].nextContinuationData)===null||o===void 0?void 0:o.continuation)||((r=(s=e.continuations)===null||s===void 0?void 0:s[0].reloadContinuationData)===null||r===void 0?void 0:r.continuation)),Reflect.has(e,"bottomText")&&(this.bottom_text=new l(e.bottomText)),Reflect.has(e,"bottomButton")&&(this.bottom_button=d.parseItem(e.bottomButton,k)),Reflect.has(e,"subheaders")&&(this.subheaders=d.parseArray(e.subheaders))}};n(gd,"MusicShelf");gd.type="MusicShelf";var Ie=gd;var xd=class extends a{constructor(e){super(),Reflect.has(e,"startItems")&&(this.start_items=d.parseArray(e.startItems)),Reflect.has(e,"endItems")&&(this.end_items=d.parseArray(e.endItems))}};n(xd,"MusicSideAlignedItem");xd.type="MusicSideAlignedItem";var S_=xd;var bd=class extends a{constructor(e){super(),this.title=new l(e.title).toString(),Reflect.has(e,"icon")&&(this.icon_type=e.icon.iconType),this.menu=d.parseItem(e.menu,c_)}};n(bd,"MusicSortFilterButton");bd.type="MusicSortFilterButton";var yd=bd;var wd=class extends a{constructor(e){super(),this.thumbnail=y.fromResponse(e.thumbnail)}};n(wd,"MusicTastebuilderShelfThumbnail");wd.type="MusicTastebuilderShelfThumbnail";var I_=wd;var Td=class extends a{constructor(e){super(),this.thumbnail=d.parseItem(e.thumbnail,I_),this.primary_text=new l(e.primaryText),this.secondary_text=new l(e.secondaryText),this.action_button=d.parseItem(e.actionButton,k),this.is_visible=e.isVisible}};n(Td,"MusicTasteBuilderShelf");Td.type="MusicTasteBuilderShelf";var k_=Td;var Sd=class extends a{constructor(e){var i,o;super(),this.title=new l(e.title),this.thumbnail=e.thumbnail?y.fromResponse((i=e.thumbnail.musicThumbnailRenderer)===null||i===void 0?void 0:i.thumbnail):[],this.menu=d.parseItem(e.menu,H),this.foreground_thumbnail=e.foregroundThumbnail?y.fromResponse((o=e.foregroundThumbnail.musicThumbnailRenderer)===null||o===void 0?void 0:o.thumbnail):[]}};n(Sd,"MusicVisualHeader");Sd.type="MusicVisualHeader";var C_=Sd;var Id=class extends a{constructor(e){super(),this.thumbnails=y.fromResponse(e.thumbnail),this.video_thumbnails=y.fromResponse(e.videoThumbnail),this.short_message=new l(e.shortMessage),this.sent_time=new l(e.sentTimeText),this.notification_id=e.notificationId,this.endpoint=new v(e.navigationEndpoint),this.record_click_endpoint=new v(e.recordClickEndpoint),this.menu=d.parseItem(e.contextualMenu),this.read=e.read}};n(Id,"Notification");Id.type="Notification";var E_=Id;var kd=class extends a{constructor(e){super(),this.image=d.parseItem(e.image,mm),this.title=d.parseItem(e.title,wm)}};n(kd,"PageHeaderView");kd.type="PageHeaderView";var P_=kd;var Cd=class extends a{constructor(e){super(),this.page_title=e.pageTitle,this.content=d.parseItem(e.content,P_)}};n(Cd,"PageHeader");Cd.type="PageHeader";var N_=Cd;var Ed=class extends a{constructor(e){super(),this.header_text=new l(e.headerText).toString(),this.body_text=new l(e.bodyText).toString(),this.page_title=new l(e.pageTitle).toString(),this.header_icon_type=e.headerIcon.iconType}};n(Ed,"PageIntroduction");Ed.type="PageIntroduction";var A_=Ed;var Pd=class extends a{constructor(e){super(),this.subreason=new l(e.subreason),this.reason=new l(e.reason),this.proceed_button=d.parseItem(e.proceedButton,k),this.thumbnails=y.fromResponse(e.thumbnail),Reflect.has(e,"icon")&&(this.icon_type=e.icon.iconType)}};n(Pd,"PlayerErrorMessage");Pd.type="PlayerErrorMessage";var dw=Pd;var Nd=class extends a{constructor(e){super(),this.title=e.itemTitle,this.thumbnail=e.itemThumbnail,this.offer_description=e.offerDescription,this.offer_id=e.offerId}};n(Nd,"PlayerLegacyDesktopYpcOffer");Nd.type="PlayerLegacyDesktopYpcOffer";var pw=Nd;var Ad=class extends a{constructor(e){super(),this.video_message=e.fullVideoMessage,this.player_response=e.unserializedPlayerResponse}};n(Ad,"YpcTrailer");Ad.type="YpcTrailer";var R_=Ad;var Rd=class extends a{constructor(e){super(),this.video_id=e.trailerVideoId,this.title=e.itemTitle,this.thumbnail=e.itemThumbnail,this.offer_headline=e.offerHeadline,this.offer_description=e.offerDescription,this.offer_id=e.offerId,this.offer_button_text=e.offerButtonText,this.video_message=e.fullVideoMessage,this.trailer=W.parseItem(e.ypcTrailer,R_)}};n(Rd,"PlayerLegacyDesktopYpcTrailer");Rd.type="PlayerLegacyDesktopYpcTrailer";var Md=Rd;var Vd=class extends a{constructor(e){var i;super(),this.title=new l(e.title),this.description=new l(e.description),this.thumbnails=y.fromResponse(e.thumbnail),Reflect.has(e,"embed")&&(this.embed={iframe_url:e.embed.iframeUrl,flash_url:e.embed.flashUrl,flash_secure_url:e.embed.flashSecureUrl,width:e.embed.width,height:e.embed.height}),this.length_seconds=parseInt(e.lengthSeconds),this.channel={id:e.externalChannelId,name:e.ownerChannelName,url:e.ownerProfileUrl},this.is_family_safe=!!e.isFamilySafe,this.is_unlisted=!!e.isUnlisted,this.has_ypc_metadata=!!e.hasYpcMetadata,this.view_count=parseInt(e.viewCount),this.category=e.category,this.publish_date=e.publishDate,this.upload_date=e.uploadDate,this.available_countries=e.availableCountries,this.start_timestamp=!((i=e.liveBroadcastDetails)===null||i===void 0)&&i.startTimestamp?new Date(e.liveBroadcastDetails.startTimestamp):null}};n(Vd,"PlayerMicroformat");Vd.type="PlayerMicroformat";var Vt=Vd;var Od=class extends a{constructor(e){super(),this.title=new l(e.title),this.video_id=e.videoId,this.video_title=new l(e.videoTitle),this.short_view_count=new l(e.shortViewCountText),this.prefer_immediate_redirect=e.preferImmediateRedirect,this.count_down_secs_for_fullscreen=e.countDownSecsForFullscreen,this.published=new l(e.publishedTimeText),this.background=y.fromResponse(e.background),this.thumbnail_overlays=d.parseArray(e.thumbnailOverlays),this.author=new F(e.byline),this.cancel_button=d.parseItem(e.cancelButton,k),this.next_button=d.parseItem(e.nextButton,k),this.close_button=d.parseItem(e.closeButton,k)}};n(Od,"PlayerOverlayAutoplay");Od.type="PlayerOverlayAutoplay";var M_=Od;var Dd=class extends a{constructor(e){super(),this.results=d.parseArray(e.results,[Im,Sm]),this.title=new l(e.title).toString()}};n(Dd,"WatchNextEndScreen");Dd.type="WatchNextEndScreen";var V_=Dd;var Bd=class extends a{constructor(e){super(),this.end_screen=d.parseItem(e.endScreen,V_),this.autoplay=d.parseItem(e.autoplay,M_),this.share_button=d.parseItem(e.shareButton,k),this.add_to_menu=d.parseItem(e.addToMenu,H),this.fullscreen_engagement=d.parseItem(e.fullscreenEngagement),this.actions=d.parseArray(e.actions),this.browser_media_session=d.parseItem(e.browserMediaSession),this.decorated_player_bar=d.parseItem(e.decoratedPlayerBarRenderer,bm)}};n(Bd,"PlayerOverlay");Bd.type="PlayerOverlay";var Ui=Bd;var Ld=class extends a{constructor(e){super(),this.id=e.playlistId,this.title=new l(e.title),this.subtitle=e.subtitle?new l(e.subtitle):null,this.stats=e.stats.map(i=>new l(i)),this.brief_stats=e.briefStats.map(i=>new l(i)),this.author=e.ownerText||e.ownerEndpoint?new F(Object.assign(Object.assign({},e.ownerText),{navigationEndpoint:e.ownerEndpoint}),e.ownerBadges,null):null,this.description=new l(e.descriptionText),this.num_videos=new l(e.numVideosText),this.view_count=new l(e.viewCountText),this.can_share=e.shareData.canShare,this.can_delete=e.editableDetails.canDelete,this.is_editable=e.isEditable,this.privacy=e.privacy,this.save_button=d.parseItem(e.saveButton),this.shuffle_play_button=d.parseItem(e.shufflePlayButton),this.menu=d.parseItem(e.moreActionsMenu),this.banner=d.parseItem(e.playlistHeaderBanner)}};n(Ld,"PlaylistHeader");Ld.type="PlaylistHeader";var O_=Ld;var Fd=class extends a{constructor(e){super(),this.title=new l(e.playlistTitle),this.thumbnails=y.fromResponse(e.thumbnail),this.video_count=new l(e.playlistVideoCount),this.channel_name=new l(e.channelName),this.endpoint=new v(e.action)}};n(Fd,"PlaylistInfoCardContent");Fd.type="PlaylistInfoCardContent";var fw=Fd;var Yd=class extends a{constructor(e){super(),this.title=e.title,this.description=e.description||null}};n(Yd,"PlaylistMetadata");Yd.type="PlaylistMetadata";var D_=Yd;var jd=class extends a{constructor(e){super(),this.items=d.parseArray(e.items)}get contents(){return this.items}};n(jd,"PlaylistSidebar");jd.type="PlaylistSidebar";var hw=jd;var Ud=class extends a{constructor(e){super(),this.stats=e.stats.map(i=>new l(i)),this.thumbnail_renderer=d.parseItem(e.thumbnailRenderer),this.title=new l(e.title),this.menu=d.parseItem(e.menu),this.endpoint=new v(e.navigationEndpoint),this.description=new l(e.description)}};n(Ud,"PlaylistSidebarPrimaryInfo");Ud.type="PlaylistSidebarPrimaryInfo";var B_=Ud;var Wd=class extends a{constructor(e){super(),this.owner=d.parseItem(e.videoOwner),this.button=d.parseItem(e.button)}};n(Wd,"PlaylistSidebarSecondaryInfo");Wd.type="PlaylistSidebarSecondaryInfo";var L_=Wd;var Hd=class extends a{constructor(e){super(),this.id=e.videoId,this.index=new l(e.index),this.title=new l(e.title),this.author=new F(e.shortBylineText),this.thumbnails=y.fromResponse(e.thumbnail),this.thumbnail_overlays=d.parseArray(e.thumbnailOverlays),this.set_video_id=e==null?void 0:e.setVideoId,this.endpoint=new v(e.navigationEndpoint),this.is_playable=e.isPlayable,this.menu=d.parseItem(e.menu,H),this.video_info=new l(e.videoInfo),this.accessibility_label=e.title.accessibility.accessibilityData.label;let i=e.upcomingEventData&&Number(`${e.upcomingEventData.startTime}000`);i&&(this.upcoming=new Date(i)),this.duration={text:new l(e.lengthText).toString(),seconds:parseInt(e.lengthSeconds)}}get is_live(){var e;return((e=this.thumbnail_overlays.firstOfType(_o))===null||e===void 0?void 0:e.style)==="LIVE"}get is_upcoming(){var e;return((e=this.thumbnail_overlays.firstOfType(_o))===null||e===void 0?void 0:e.style)==="UPCOMING"}};n(Hd,"PlaylistVideo");Hd.type="PlaylistVideo";var F_=Hd;var Jd=class extends a{constructor(e){super(),this.id=e.playlistId,this.is_editable=e.isEditable,this.can_reorder=e.canReorder,this.videos=d.parseArray(e.contents)}};n(Jd,"PlaylistVideoList");Jd.type="PlaylistVideoList";var mw=Jd;var Gd=class extends a{constructor(e){super(),this.choices=e.choices.map(i=>({text:new l(i.text),select_endpoint:i.selectServiceEndpoint?new v(i.selectServiceEndpoint):null,deselect_endpoint:i.deselectServiceEndpoint?new v(i.deselectServiceEndpoint):null,vote_ratio_if_selected:(i==null?void 0:i.voteRatioIfSelected)||null,vote_percentage_if_selected:new l(i.votePercentageIfSelected),vote_ratio_if_not_selected:(i==null?void 0:i.voteRatioIfSelected)||null,vote_percentage_if_not_selected:new l(i.votePercentageIfSelected),image:i.image?y.fromResponse(i.image):null})),Reflect.has(e,"type")&&(this.poll_type=e.type),Reflect.has(e,"totalVotes")&&(this.total_votes=new l(e.totalVotes)),Reflect.has(e,"liveChatPollId")&&(this.live_chat_poll_id=e.liveChatPollId)}};n(Gd,"Poll");Gd.type="Poll";var _w=Gd;var zd=class extends Bi{constructor(e){super(e)}};n(zd,"Post");zd.type="Post";var Y_=zd;var Kd=class extends a{constructor(e){super(),this.images=d.parseArray(e.images,Yh)}};n(Kd,"PostMultiImage");Kd.type="PostMultiImage";var vw=Kd;var $d=class extends a{constructor(e){super(),this.items=d.parseArray(e.items)}get contents(){return this.items}};n($d,"ProfileColumn");$d.type="ProfileColumn";var gw=$d;var qd=class extends a{constructor(e){super(),this.items=d.parseArray(e.items)}get contents(){return this.items}};n(qd,"ProfileColumnStats");qd.type="ProfileColumnStats";var j_=qd;var Xd=class extends a{constructor(e){super(),this.label=new l(e.label),this.value=new l(e.value)}};n(Xd,"ProfileColumnStatsEntry");Xd.type="ProfileColumnStatsEntry";var xw=Xd;var Qd=class extends a{constructor(e){super(),this.title=new l(e.title),this.thumbnails=y.fromResponse(e.thumbnail)}};n(Qd,"ProfileColumnUserInfo");Qd.type="ProfileColumnUserInfo";var U_=Qd;var Zd=class extends a{constructor(e){super(),this.choices=e.choices.map(i=>({text:new l(i.text),is_correct:i.isCorrect})),this.total_votes=new l(e.totalVotes)}};n(Zd,"Quiz");Zd.type="Quiz";var bw=Zd;var ep=class extends a{constructor(e){super(),this.title=new l(e.title),this.subtitle=new l(e.subtitle),this.avatars=e.avatars.map(i=>new y(i)),this.button=d.parseItem(e.button,k),this.surface=e.surface}};n(ep,"RecognitionShelf");ep.type="RecognitionShelf";var yw=ep;var tp=class extends a{constructor(e){super(),this.id=e.videoId,this.title=new l(e.headline),this.thumbnails=y.fromResponse(e.thumbnail),this.views=new l(e.viewCountText),this.endpoint=new v(e.navigationEndpoint),this.accessibility_label=e.accessibility.accessibilityData.label}};n(tp,"ReelItem");tp.type="ReelItem";var W_=tp;var ip=class extends a{constructor(e){super(),this.title=new l(e.title),this.items=d.parseArray(e.items),Reflect.has(e,"endpoint")&&(this.endpoint=new v(e.endpoint))}get contents(){return this.items}};n(ip,"ReelShelf");ip.type="ReelShelf";var H_=ip;var op=class extends a{constructor(e){super(),this.content=d.parseItem(e.content)}};n(op,"RelatedChipCloud");op.type="RelatedChipCloud";var J_=op;var np=class extends a{constructor(e){super(),this.header=d.parseItem(e.header),this.contents=d.parseArray(e.contents)}};n(np,"RichGrid");np.type="RichGrid";var Wi=np;var sp=class extends a{constructor(e){super(),this.content=d.parseItem(e.content)}};n(sp,"RichItem");sp.type="RichItem";var ww=sp;var rp=class extends a{constructor(e){super(),this.title=new l(e.title),this.subtitle=new l(e.subtitle),Reflect.has(e,"titleStyle")&&(this.title_style=e.titleStyle.style),Reflect.has(e,"icon")&&(this.icon_type=e.icon.iconType)}};n(rp,"RichListHeader");rp.type="RichListHeader";var Tw=rp;var ap=class extends a{constructor(e){super(),this.thumbnail=y.fromResponse(e.thumbnail),this.title=new l(e.title),this.subtitle=new l(e.subtitle),this.call_to_action=new l(e.callToAction),Reflect.has(e,"callToActionIcon")&&(this.icon_type=e.callToActionIcon.iconType),this.endpoint=new v(e.endpoint)}};n(ap,"RichMetadata");ap.type="RichMetadata";var up=ap;var lp=class extends a{constructor(e){super(),this.contents=d.parseArray(e.contents)}};n(lp,"RichMetadataRow");lp.type="RichMetadataRow";var cp=lp;var dp=class extends a{constructor(e){super(),this.content=d.parseItem(e.content)}};n(dp,"RichSection");dp.type="RichSection";var Sw=dp;var pp=class extends a{constructor(e){super(),this.title=new l(e.title),this.contents=d.parseArray(e.contents),Reflect.has(e,"endpoint")&&(this.endpoint=new v(e.endpoint))}};n(pp,"RichShelf");pp.type="RichShelf";var G_=pp;var fp=class extends a{constructor(e){super(),this.endpoint=new v(e.endpoint),this.search_button=d.parseItem(e.searchButton,k),this.clear_button=d.parseItem(e.clearButton,k),this.placeholder_text=new l(e.placeholderText)}};n(fp,"SearchBox");fp.type="SearchBox";var Iw=fp;var hp=class extends a{constructor(e){super(),this.label=new l(e.label),this.endpoint=new v(e.endpoint||e.navigationEndpoint),this.tooltip=e.tooltip,Reflect.has(e,"status")&&(this.status=e.status)}get disabled(){return this.status==="FILTER_STATUS_DISABLED"}get selected(){return this.status==="FILTER_STATUS_SELECTED"}};n(hp,"SearchFilter");hp.type="SearchFilter";var z_=hp;var mp=class extends a{constructor(e){super(),this.title=new l(e.title),this.filters=W.parseArray(e.filters,z_)}};n(mp,"SearchFilterGroup");mp.type="SearchFilterGroup";var Gn=mp;var _p=class extends a{constructor(e){super(),this.title=new l(e.title),this.groups=W.parseArray(e.groups,Gn)}};n(_p,"SearchFilterOptionsDialog");_p.type="SearchFilterOptionsDialog";var kw=_p;var vp=class extends a{constructor(e){super(),this.chip_bar=W.parseItem(e.chipBar,ht),this.search_filter_button=W.parseItem(e.searchFilterButton,k)}};n(vp,"SearchHeader");vp.type="SearchHeader";var K_=vp;var gp=class extends a{constructor(e){super(),Reflect.has(e,"title")&&(this.title=new l(e.title)),Reflect.has(e,"groups")||(this.groups=d.parseArray(e.groups,Gn)),Reflect.has(e,"button")&&(this.button=d.parseItem(e.button,Ue))}};n(gp,"SearchSubMenu");gp.type="SearchSubMenu";var $_=gp;var xp=class extends a{constructor(e){super(),this.contents=d.parseArray(e.contents)}};n(xp,"SearchSuggestionsSection");xp.type="SearchSuggestionsSection";var q_=xp;var bp=class extends a{constructor(e){super(),this.contents=d.parseArray(e.contents)}};n(bp,"SecondarySearchContainer");bp.type="SecondarySearchContainer";var Cw=bp;var yp=class extends a{constructor(e){super(),this.like_button=d.parseItem(e.likeButton,[Ue,k]),this.dislike_button=d.parseItem(e.dislikeButton,[Ue,k])}};n(yp,"SegmentedLikeDislikeButton");yp.type="SegmentedLikeDislikeButton";var So=yp;var wp=class extends a{constructor(e){super(),Reflect.has(e,"title")&&(this.title=new l(e.title)),Reflect.has(e,"summary")&&(this.summary=new l(e.summary)),Reflect.has(e,"enableServiceEndpoint")&&(this.enable_endpoint=new v(e.enableServiceEndpoint)),Reflect.has(e,"disableServiceEndpoint")&&(this.disable_endpoint=new v(e.disableServiceEndpoint)),this.item_id=e.itemId}};n(wp,"SettingBoolean");wp.type="SettingBoolean";var Ew=wp;var Tp=class extends a{constructor(e){super(),this.title=new l(e.title),this.help_text=new l(e.helpText),this.enabled=e.enabled,this.disabled=e.disabled,this.id=e.id}};n(Tp,"SettingsCheckbox");Tp.type="SettingsCheckbox";var X_=Tp;var Sp=class extends a{constructor(e){super(),this.title=new l(e.title),this.subtitle=new l(e.subtitle),this.enabled=e.enabled,this.enable_endpoint=new v(e.enableServiceEndpoint),this.disable_endpoint=new v(e.disableServiceEndpoint)}};n(Sp,"SettingsSwitch");Sp.type="SettingsSwitch";var zn=Sp;var Ip=class extends a{constructor(e){super(),this.title=new l(e.title),Reflect.has(e,"text")&&(this.text=new l(e.text).toString()),Reflect.has(e,"options")&&(this.options=d.parseArray(e.options,[zn,Tn,_m,X_,Xh]))}};n(Ip,"SettingsOptions");Ip.type="SettingsOptions";var Kn=Ip;var kp=class extends a{constructor(e){super(),this.title=new l(e.title),this.items=d.parseArray(e.items,Mn)}get contents(){return this.items}};n(kp,"SettingsSidebar");kp.type="SettingsSidebar";var Q_=kp;var Cp=class extends a{constructor(e){super(),this.thumbnail=y.fromResponse(e.thumbnail),this.content=new l(e.content),this.published=new l(e.publishedTimeText),this.menu=W.parseItem(e.actionMenu,H),this.original_post=W.parseItem(e.originalPost,Bi),this.id=e.postId,this.endpoint=new v(e.navigationEndpoint),this.expand_button=W.parseItem(e.expandButton,k),this.author=new F(e.displayName,void 0)}};n(Cp,"SharedPost");Cp.type="SharedPost";var Z_=Cp;var Ep=class extends a{constructor(e){super(),this.title=new l(e.title),Reflect.has(e,"endpoint")&&(this.endpoint=new v(e.endpoint)),this.content=d.parseItem(e.content),Reflect.has(e,"icon")&&(this.icon_type=e.icon.iconType),Reflect.has(e,"menu")&&(this.menu=d.parseItem(e.menu)),Reflect.has(e,"playAllButton")&&(this.play_all_button=d.parseItem(e.playAllButton,k))}};n(Ep,"Shelf");Ep.type="Shelf";var $n=Ep;var Pp=class extends a{constructor(e){super(),this.corrected_query=new l(e.correctedQuery),this.original_query=new l(e.originalQuery),this.corrected_query_endpoint=new v(e.correctedQueryEndpoint),this.original_query_endpoint=new v(e.originalQueryEndpoint),this.search_instead_for=new l(e.searchInsteadFor),this.showing_results_for=new l(e.showingResultsFor)}};n(Pp,"ShowingResultsFor");Pp.type="ShowingResultsFor";var ev=Pp;var Np=class extends a{constructor(e){super(),this.image=y.fromResponse(e.image),this.title=new l(e.title),this.display_domain=new l(e.displayDomain),this.show_link_icon=e.showLinkIcon,this.call_to_action=new l(e.callToAction),this.endpoint=new v(e.command)}};n(Np,"SimpleCardContent");Np.type="SimpleCardContent";var Pw=Np;var Ap=class extends a{constructor(e){super(),this.message=new l(e.message),this.prominent=e.prominent}};n(Ap,"SimpleCardTeaser");Ap.type="SimpleCardTeaser";var Nw=Ap;var Rp=class extends a{constructor(e){super(),this.lines=e.lines.map(i=>new l(i)),this.style=e.layoutStyle}};n(Rp,"SimpleTextSection");Rp.type="SimpleTextSection";var Aw=Rp;var Mp=class extends a{constructor(e){super(),this.action_text=new l(e.actionText),this.nav_text=new l(e.navigationText),this.details=new l(e.detailsText),this.icon_type=e.icon.iconType,this.endpoint=new v(e.navigationEndpoint)}};n(Mp,"SingleActionEmergencySupport");Mp.type="SingleActionEmergencySupport";var Rw=Mp;var Vp=class extends a{constructor(e){super(),this.title=e.title||"N/A",this.selected=!!e.selected,this.endpoint=new v(e.endpoint),this.content=d.parseItem(e.content,[oe,Jn,Wi])}};n(Vp,"Tab");Vp.type="Tab";var we=Vp;var Op=class extends a{constructor(e){super(),this.tabs=d.parseArray(e.tabs,we)}};n(Op,"SingleColumnBrowseResults");Op.type="SingleColumnBrowseResults";var oi=Op;var Dp=class extends a{constructor(e){super(),this.contents=d.parse(e)}};n(Dp,"SingleColumnMusicWatchNextResults");Dp.type="SingleColumnMusicWatchNextResults";var Mw=Dp;var Bp=class extends a{constructor(e){super(),this.thumbnails=y.fromResponse(e.thumbnail),this.style=e.style}};n(Bp,"SingleHeroImage");Bp.type="SingleHeroImage";var Vw=Bp;var Lp=class extends a{constructor(e){super(),this.thumbnail=y.fromResponse(e.thumbnail),this.title=new l(e.title),this.endpoint=new v(e.navigationEndpoint),this.subscribe_button=d.parseItem(e.subscribeButton,Ge)}};n(Lp,"SlimOwner");Lp.type="SlimOwner";var Ow=Lp;var Fp=class extends a{constructor(e){super(),this.title=new l(e.title),this.collapsed_subtitle=new l(e.collapsedSubtitle),this.expanded_subtitle=new l(e.expandedSubtitle),this.owner=d.parseItem(e.owner),this.description=new l(e.description),this.video_id=e.videoId,this.date=new l(e.dateText)}};n(Fp,"SlimVideoMetadata");Fp.type="SlimVideoMetadata";var tv=Fp;var Yp=class extends a{constructor(e){super(),this.name=new l(e.name),this.is_selected=e.isSelected,this.endpoint=new v(e.navigationEndpoint)}};n(Yp,"SubFeedOption");Yp.type="SubFeedOption";var iv=Yp;var jp=class extends a{constructor(e){super(),this.title=new l(e.title),this.options=d.parseArray(e.options,iv)}};n(jp,"SubFeedSelector");jp.type="SubFeedSelector";var Dw=jp;var Up=class extends a{constructor(e){super(),this.contents=d.parse(e)}};n(Up,"Tabbed");Up.type="Tabbed";var Bw=Up;var Wp=class extends a{constructor(e){super(),this.tabs=d.parseArray(e.tabs,we)}};n(Wp,"TabbedSearchResults");Wp.type="TabbedSearchResults";var ov=Wp;var Hp=class extends a{constructor(e){super(),this.title=new l(e.title),this.style=e.style}};n(Hp,"TextHeader");Hp.type="TextHeader";var Lw=Hp;var Jp=class extends a{constructor(e){super(),this.landscape=y.fromResponse(e.landscape),this.portrait=y.fromResponse(e.portrait)}};n(Jp,"ThumbnailLandscapePortrait");Jp.type="ThumbnailLandscapePortrait";var Fw=Jp;var Gp=class extends a{constructor(e){super(),this.text=new l(e.text).toString()}};n(Gp,"ThumbnailOverlayEndorsement");Gp.type="ThumbnailOverlayEndorsement";var Yw=Gp;var zp=class extends a{constructor(e){super(),this.text=new l(e.text),this.icon_type=e.icon.iconType}};n(zp,"ThumbnailOverlayHoverText");zp.type="ThumbnailOverlayHoverText";var jw=zp;var Kp=class extends a{constructor(e){super(),this.text=new l(e.text).toString(),this.icon_type=e.icon.iconType}};n(Kp,"ThumbnailOverlayInlineUnplayable");Kp.type="ThumbnailOverlayInlineUnplayable";var Uw=Kp;var $p=class extends a{constructor(e){super(),this.text=new l(e.text)}};n($p,"ThumbnailOverlayLoadingPreview");$p.type="ThumbnailOverlayLoadingPreview";var Ww=$p;var qp=class extends a{constructor(e){super(),this.text=new l(e.text).toString()}};n(qp,"ThumbnailOverlayNowPlaying");qp.type="ThumbnailOverlayNowPlaying";var Hw=qp;var Xp=class extends a{constructor(e){super(),this.hack=e.hack}};n(Xp,"ThumbnailOverlayPinking");Xp.type="ThumbnailOverlayPinking";var Jw=Xp;var Qp=class extends a{constructor(e){super(),this.texts=e.texts.map(i=>new l(i))}};n(Qp,"ThumbnailOverlayPlaybackStatus");Qp.type="ThumbnailOverlayPlaybackStatus";var Gw=Qp;var Zp=class extends a{constructor(e){super(),this.percent_duration_watched=e.percentDurationWatched}};n(Zp,"ThumbnailOverlayResumePlayback");Zp.type="ThumbnailOverlayResumePlayback";var zw=Zp;var ef=class extends a{constructor(e){super(),this.text=new l(e.text),this.icon_type=e.icon.iconType}};n(ef,"ThumbnailOverlaySidePanel");ef.type="ThumbnailOverlaySidePanel";var Kw=ef;var tf=class extends a{constructor(e){super(),Reflect.has(e,"isToggled")&&(this.is_toggled=e.isToggled),this.icon_type={toggled:e.toggledIcon.iconType,untoggled:e.untoggledIcon.iconType},this.tooltip={toggled:e.toggledTooltip,untoggled:e.untoggledTooltip},this.toggled_endpoint=new v(e.toggledServiceEndpoint),this.untoggled_endpoint=new v(e.untoggledServiceEndpoint)}};n(tf,"ThumbnailOverlayToggleButton");tf.type="ThumbnailOverlayToggleButton";var $w=tf;var of=class extends a{constructor(e){super(),this.visible_time_range_start_millis=e.visibleTimeRangeStartMillis,this.visible_time_range_end_millis=e.visibleTimeRangeEndMillis,this.decoration_time_millis=e.decorationTimeMillis,this.label=new l(e.label),this.icon=e.icon}};n(of,"TimedMarkerDecoration");of.type="TimedMarkerDecoration";var qw=of;var nf=class extends a{constructor(e){super(),this.title=new l(e.title)}};n(nf,"TitleAndButtonListHeader");nf.type="TitleAndButtonListHeader";var Xw=nf;var sf=class extends a{constructor(e){super(),this.text=new l(e.defaultText),this.toggled_text=new l(e.toggledText),this.icon_type=e.defaultIcon.iconType,this.toggled_icon_type=e.toggledIcon.iconType,this.default_endpoint=new v(e.defaultServiceEndpoint),this.toggled_endpoint=new v(e.toggledServiceEndpoint)}};n(sf,"ToggleMenuServiceItem");sf.type="ToggleMenuServiceItem";var Qw=sf;var rf=class extends a{constructor(e){super(),this.promo_config={promo_id:e.promoConfig.promoId,impression_endpoints:e.promoConfig.impressionEndpoints.map(i=>new v(i)),accept:new v(e.promoConfig.acceptCommand),dismiss:new v(e.promoConfig.dismissCommand)},this.target_id=e.targetId,this.details=new l(e.detailsText),this.suggested_position=e.suggestedPosition.type,this.dismiss_stratedy=e.dismissStrategy.type,this.dwell_time_ms=parseInt(e.dwellTimeMs)}};n(rf,"Tooltip");rf.type="Tooltip";var Zw=rf;var af=class extends a{constructor(e){var i;super(),this.title=new l(e.title),this.avatar=y.fromResponse((i=e.thumbnail)!==null&&i!==void 0?i:e.avatar),this.subtitle=new l(e.subtitle),this.subscribe_button=d.parseItem(e.subscribeButton,Ge),this.endpoint=new v(e.navigationEndpoint)}};n(af,"TopicChannelDetails");af.type="TopicChannelDetails";var eT=af;var uf=class extends a{constructor(e){super(),this.tabs=d.parse(e.tabs),this.secondary_contents=d.parse(e.secondaryContents)}};n(uf,"TwoColumnBrowseResults");uf.type="TwoColumnBrowseResults";var Hi=uf;var lf=class extends a{constructor(e){super(),this.primary_contents=d.parse(e.primaryContents),this.secondary_contents=d.parse(e.secondaryContents)}};n(lf,"TwoColumnSearchResults");lf.type="TwoColumnSearchResults";var nv=lf;var sv,vg,cf=class extends a{constructor(e){var i,o,s,r,c;super(),sv.add(this),this.results=d.parseArray((i=e.results)===null||i===void 0?void 0:i.results.contents),this.secondary_results=d.parseArray((o=e.secondaryResults)===null||o===void 0?void 0:o.secondaryResults.results),this.conversation_bar=d.parseItem(e==null?void 0:e.conversationBar);let p=(s=e.playlist)===null||s===void 0?void 0:s.playlist;p&&(this.playlist={id:p.playlistId,title:p.title,author:!((r=p.shortBylineText)===null||r===void 0)&&r.simpleText?new l(p.shortBylineText):new F(p.longBylineText),contents:d.parseArray(p.contents),current_index:p.currentIndex,is_infinite:!!p.isInfinite,menu:d.parseItem(p.menu,H)});let f=(c=e.autoplay)===null||c===void 0?void 0:c.autoplay;f&&(this.autoplay={sets:f.sets.map(m=>u(this,sv,"m",vg).call(this,m))},f.modifiedSets&&(this.autoplay.modified_sets=f.modifiedSets.map(m=>u(this,sv,"m",vg).call(this,m))),f.countDownSecs&&(this.autoplay.count_down_secs=f.countDownSecs))}};n(cf,"TwoColumnWatchNextResults");sv=new WeakSet,vg=n(function(e){let i={autoplay_video:new v(e.autoplayVideo)};return e.nextButtonVideo&&(i.next_button_video=new v(e.nextButtonVideo)),i},"_TwoColumnWatchNextResults_parseAutoplaySet");cf.type="TwoColumnWatchNextResults";var qn=cf;var df=class extends a{constructor(e){super(),this.header=d.parseItem(e.header),this.call_to_action=d.parseItem(e.callToAction),this.sections=d.parseArray(e.sections),Reflect.has(e,"collapsedLabel")&&(this.collapsed_label=new l(e.collapsedLabel))}};n(df,"UniversalWatchCard");df.type="UniversalWatchCard";var rv=df;var pf=class extends a{constructor(e){super(),this.message_title=new l(e.dialogMessageTitle),this.message_text=new l(e.dialogMessageText),this.action_button=d.parseItem(e.actionButton,k),this.dismiss_button=d.parseItem(e.dismissButton,k),this.is_visible=e.isVisible}};n(pf,"UpsellDialog");pf.type="UpsellDialog";var tT=pf;var ff=class extends a{constructor(e){super(),this.items=d.parseArray(e.items),this.collapsed_item_count=e.collapsedItemCount,this.collapsed_state_button_text=new l(e.collapsedStateButtonText)}get contents(){return this.items}};n(ff,"VerticalList");ff.type="VerticalList";var iT=ff;var hf=class extends a{constructor(e){super(),this.items=d.parseArray(e.items),this.view_all_text=new l(e.viewAllText),this.view_all_endpoint=new v(e.viewAllEndpoint)}get contents(){return this.items}};n(hf,"VerticalWatchCardList");hf.type="VerticalWatchCardList";var oT=hf;var mf=class extends a{constructor(e){super(),this.title=new l(e.videoTitle),this.channel_name=new l(e.channelName),this.view_count=new l(e.viewCountText),this.video_thumbnails=y.fromResponse(e.videoThumbnail),this.duration=new l(e.lengthString),this.endpoint=new v(e.action)}};n(mf,"VideoInfoCardContent");mf.type="VideoInfoCardContent";var nT=mf;var _f=class extends a{constructor(e){super(),this.subscription_button=e.subscriptionButton,this.subscriber_count=new l(e.subscriberCountText),this.author=new F(Object.assign(Object.assign({},e.title),{navigationEndpoint:e.navigationEndpoint}),e.badges,e.thumbnail)}};n(_f,"VideoOwner");_f.type="VideoOwner";var Xn=_f;var vf=class extends a{constructor(e){var i,o,s,r;super(),this.title=new l(e.title),Reflect.has(e,"superTitleLink")&&(this.super_title_link=new l(e.superTitleLink)),this.view_count=new l((o=(i=e.viewCount)===null||i===void 0?void 0:i.videoViewCountRenderer)===null||o===void 0?void 0:o.viewCount),this.short_view_count=new l((r=(s=e.viewCount)===null||s===void 0?void 0:s.videoViewCountRenderer)===null||r===void 0?void 0:r.shortViewCount),this.badges=d.parseArray(e.badges,nt),this.published=new l(e.dateText),this.relative_date=new l(e.relativeDateText),this.menu=d.parseItem(e.videoActions,H)}};n(vf,"VideoPrimaryInfo");vf.type="VideoPrimaryInfo";var av=vf;var gg,sT,gf=class extends a{constructor(e){super(),gg.add(this),this.owner=d.parseItem(e.owner,Xn),this.description=new l(e.description),Reflect.has(e,"attributedDescription")&&(this.description=new l(u(this,gg,"m",sT).call(this,e.attributedDescription))),this.subscribe_button=d.parseItem(e.subscribeButton,[Ge,k]),this.metadata=d.parseItem(e.metadataRowContainer,f_),this.show_more_text=e.showMoreText,this.show_less_text=e.showLessText,this.default_expanded=e.defaultExpanded,this.description_collapsed_lines=e.descriptionCollapsedLines}};n(gf,"VideoSecondaryInfo");gg=new WeakSet,sT=n(function(e){let i=[],o=e.content,s=e.commandRuns,r=0;if(s){for(let c of s){let p=c.length,f=c.startIndex;if(f>r&&i.push({text:o.slice(r,f)}),Reflect.has(c,"onTap")){let m=null;if(Reflect.has(e,"attachmentRuns")){let _=e.attachmentRuns;for(let b of _)if(b.startIndex-2==f){m=b;break}}m?i.push({text:o.slice(f,f+p),navigationEndpoint:c.onTap,attachment:m}):i.push({text:o.slice(f,f+p),navigationEndpoint:c.onTap})}r=f+p}r<o.length&&i.push({text:o.slice(r)})}else i.push({text:o});return{runs:i}},"_VideoSecondaryInfo_convertAttributedDescriptionToRuns");gf.type="VideoSecondaryInfo";var xf=gf;var bf=class extends a{constructor(e){super(),this.title=new l(e.title),this.subtitle=new l(e.subtitle),this.duration={text:new l(e.lengthText).toString(),seconds:ze(e.lengthText.simpleText)},this.style=e.style}};n(bf,"WatchCardCompactVideo");bf.type="WatchCardCompactVideo";var uv=bf;var yf=class extends a{constructor(e){var i;super(),this.endpoint=new v(e.navigationEndpoint),this.call_to_action_button=d.parseItem(e.callToActionButton),this.hero_image=d.parseItem(e.heroImage),this.label=((i=e.lengthText)===null||i===void 0?void 0:i.accessibility.accessibilityData.label)||""}};n(yf,"WatchCardHeroVideo");yf.type="WatchCardHeroVideo";var rT=yf;var wf=class extends a{constructor(e){super(),this.title=new l(e.title),this.title_endpoint=new v(e.titleNavigationEndpoint),this.subtitle=new l(e.subtitle),this.author=new F(e,e.titleBadge?[e.titleBadge]:null,e.avatar),this.author.name=this.title.toString(),this.style=e.style}};n(wf,"WatchCardRichHeader");wf.type="WatchCardRichHeader";var aT=wf;var Tf=class extends a{constructor(e){super(),this.lists=d.parseArray(e.lists)}};n(Tf,"WatchCardSectionSequence");Tf.type="WatchCardSectionSequence";var uT=Tf;var Sf=class extends Hi{constructor(e){super(e)}};n(Sf,"WatchNextTabbedResults");Sf.type="WatchNextTabbedResults";var lv=Sf;var If=class extends a{constructor(e){var i,o;super(),this.title=e.title,this.content=d.parseItem(e.content,oe),this.endpoint=new v(e.navigationEndpoint),this.category_assets={asset_key:(i=e.categoryAssets)===null||i===void 0?void 0:i.assetKey,background_color:(o=e.categoryAssets)===null||o===void 0?void 0:o.backgroundColor},this.category_type=e.categoryType}};n(If,"AnchoredSection");If.type="AnchoredSection";var cv=If;var kf=class extends a{constructor(e){var i,o;super(),this.title=new l(e.title),this.category_assets={asset_key:(i=e.categoryAssets)===null||i===void 0?void 0:i.assetKey,background_color:(o=e.categoryAssets)===null||o===void 0?void 0:o.backgroundColor},this.category_type=e.categoryType,this.endpoint=new v(e.endpoint)}};n(kf,"KidsCategoryTab");kf.type="KidsCategoryTab";var Qn=kf;var Cf=class extends a{constructor(e){super(),this.category_tabs=d.parseArray(e.categoryTabs,Qn),this.privacy_button=d.parseItem(e.privacyButtonRenderer,k)}};n(Cf,"KidsCategoriesHeader");Cf.type="kidsCategoriesHeader";var dv=Cf;var Ef=class extends a{constructor(e){super(),this.anchors=d.parseArray(e.anchors,cv)}};n(Ef,"KidsHomeScreen");Ef.type="kidsHomeScreen";var pv=Ef;var bg={};U(bg,{YTNodeGenerator:()=>Ke});var Te,dT,fv,Zn,pT,fT,vi,xg,lT,cT,hT,Ke=class{static isIgnoredKey(e){return typeof e=="string"&&u(this,Te,"f",dT).has(e)}static mergeKeyInfo(e,i){let o=new Map,s=new Set(e.map(([T])=>T)),r=new Set(i.map(([T])=>T)),c=i.filter(([T])=>!s.has(T)),p=e.filter(([T])=>!r.has(T)),f=e.filter(([T])=>r.has(T)),m=new Map(i);for(let[T,I]of f){let C=m.get(T);if(!!C){if(I.type!==C.type){o.set(T,{type:"unknown",optional:!0});continue}switch(I.type){case"object":{if(C.type!=="object")continue;let{resolved_key_info:P}=this.mergeKeyInfo(I.keys,C.keys),R={type:"object",keys:P,optional:I.optional||C.optional};JSON.stringify(R)!==JSON.stringify(I)&&o.set(T,R)}break;case"renderer":{if(C.type!=="renderer")continue;let P=Object.assign(Object.assign({},I.renderers),C.renderers),R=I.optional||C.optional,V={type:"renderer",renderers:P,optional:R};JSON.stringify(Object.assign(Object.assign({},V),{renderers:Object.keys(V.renderers)}))!==JSON.stringify(Object.assign(Object.assign({},I),{renderers:Object.keys(I.renderers)}))&&o.set(T,V)}break;case"renderer_list":{if(C.type!=="renderer_list")continue;let P=Object.assign(Object.assign({},I.renderers),C.renderers),R=I.optional||C.optional,V={type:"renderer_list",renderers:P,optional:R};JSON.stringify(Object.assign(Object.assign({},V),{renderers:Object.keys(V.renderers)}))!==JSON.stringify(Object.assign(Object.assign({},I),{renderers:Object.keys(I.renderers)}))&&o.set(T,V)}break;case"misc":{if(C.type!=="misc")continue;switch(I.misc_type!==C.misc_type&&o.set(T,{type:"unknown",optional:!0}),I.misc_type){case"Author":{if(C.misc_type!=="Author")break;let P=I.params[1]||C.params[1],R=I.optional||C.optional,V={type:"misc",misc_type:"Author",optional:R,params:[C.params[0],P]};JSON.stringify(V)!==JSON.stringify(I)&&o.set(T,V)}break}}break;case"primative":{if(C.type!=="primative")continue;let P={type:"primative",typeof:Array.from(new Set([...C.typeof,...I.typeof])),optional:I.optional||C.optional};JSON.stringify(P)!==JSON.stringify(I)&&o.set(T,P)}break}}}for(let[T,I]of c)o.set(T,Object.assign(Object.assign({},I),{optional:!0}));for(let[T,I]of p)o.set(T,Object.assign(Object.assign({},I),{optional:!0}));let _=e.filter(([T])=>!o.has(T));return{resolved_key_info:[...new Map([..._,...o]).entries()],changed_keys:[...o.entries()]}}static createRuntimeClass(e,i){var o,s;u(this,Te,"m",pT).call(this,e,i);let r=(o=n(class extends a{static set key_info(c){S(this,o,new Map(c),"f",s)}static get key_info(){return[...u(this,o,"f",s).entries()]}constructor(c){super();let{key_info:p,unimplemented_dependencies:f}=Ke.introspect(c),{resolved_key_info:m,changed_keys:_}=Ke.mergeKeyInfo(r.key_info,p);_.length>0&&(r.key_info=m,u(Ke,Te,"m",fT).call(Ke,e,r.key_info,_));for(let[w,T]of f)Ke.generateRuntimeClass(w,T);for(let[w,T]of p){let I=u(Ke,Te,"m",Zn).call(Ke,w);T.type==="misc"&&T.misc_type==="NavigationEndpoint"&&(I="endpoint"),Reflect.set(this,I,Ke.parse(w,T,c))}}},"_b"),Sx(o,"node"),o.type=e,s={value:new Map},o);return r.key_info=i,Object.defineProperty(r,"name",{value:e,writable:!1}),r}static introspect(e){let i=u(this,Te,"m",hT).call(this,e),o=new Map;for(let[,r]of i)if(r.type==="renderer"||r.type==="renderer_list")for(let c of r.renderers){let p=u(this,Te,"f",fv)[c];p&&o.set(c,p)}let s=Array.from(o).filter(([r])=>!W.hasParser(r));return{key_info:i,unimplemented_dependencies:s}}static generateRuntimeClass(e,i){let{key_info:o,unimplemented_dependencies:s}=this.introspect(i),r=this.createRuntimeClass(e,o);W.addRuntimeParser(e,r);for(let[c,p]of s)this.generateRuntimeClass(c,p);return r}static generateTypescriptClass(e,i){let o=[],s=["super();"];for(let[r,c]of i){let p=u(this,Te,"m",Zn).call(this,r);c.type==="misc"&&c.misc_type==="NavigationEndpoint"&&(p="endpoint"),o.push(`${p}${c.optional?"?":""}: ${this.toTypeDeclaration(c)};`),s.push(`this.${p} = ${this.toParser(r,c)};`)}return`class ${e} extends YTNode {
  static type = '${e}';

  ${o.join(`
  `)}

  constructor(data: RawNode) {
    ${s.join(`
    `)}
  }
}
`}static toTypeDeclaration(e,i=0){switch(e.type){case"renderer":return`${e.renderers.map(o=>`YTNodes.${o}`).join(" | ")} | null`;case"renderer_list":return`ObservedArray<${e.renderers.map(o=>`YTNodes.${o}`).join(" | ")}> | null`;case"object":return`{
${e.keys.map(([o,s])=>`${" ".repeat((i+2)*2)}${u(this,Te,"m",Zn).call(this,o)}${s.optional?"?":""}: ${this.toTypeDeclaration(s,i+1)}`).join(`,
`)}
${" ".repeat((i+1)*2)}}`;case"misc":switch(e.misc_type){case"Thumbnail":return"Thumbnail[]";default:return e.misc_type}case"primative":return e.typeof.join(" | ");case"unknown":return"/* TODO: determine correct type */ unknown"}}static toParser(e,i,o=["data"],s=1){let r="undefined";switch(i.type){case"renderer":r=`Parser.parseItem(${o.join(".")}.${e}, [ ${i.renderers.map(c=>`YTNodes.${c}`).join(", ")} ])`;break;case"renderer_list":r=`Parser.parse(${o.join(".")}.${e}, true, [ ${i.renderers.map(c=>`YTNodes.${c}`).join(", ")} ])`;break;case"object":{let c=[...o,e];r=`{
${i.keys.map(([p,f])=>`${" ".repeat((s+2)*2)}${u(this,Te,"m",Zn).call(this,p)}: ${this.toParser(p,f,c,s+1)}`).join(`,
`)}
${" ".repeat((s+1)*2)}}`}break;case"misc":switch(i.misc_type){case"Thumbnail":r=`Thumbnail.fromResponse(${o.join(".")}.${e})`;break;case"Author":{let c=`new Author(${o.join(".")}.${i.params[0]}, ${i.params[1]?`${o.join(".")}.${i.params[1]}`:"undefined"})`;return i.optional?`Reflect.has(${o.join(".")}, '${i.params[0]}') ? ${c} : undefined`:c}default:r=`new ${i.misc_type}(${o.join(".")}.${e})`;break}if(r==="undefined")throw new Error("Unreachable code reached! Switch missing case!");break;case"primative":case"unknown":r=`${o.join(".")}.${e}`;break}return i.optional?`Reflect.has(${o.join(".")}, '${e}') ? ${r} : undefined`:r}static parse(e,i,o,s=["data"]){let r=!i.optional||u(this,Te,"m",xg).call(this,{data:o},[...s,e]);switch(i.type){case"renderer":return r?W.parseItem(u(this,Te,"m",vi).call(this,{data:o},[...s,e]),i.renderers.map(c=>W.getParserByName(c))):void 0;case"renderer_list":return r?W.parse(u(this,Te,"m",vi).call(this,{data:o},[...s,e]),!0,i.renderers.map(c=>W.getParserByName(c))):void 0;case"object":{let c={},p=[...s,e];for(let[f,m]of i.keys)c[f]=r?this.parse(f,m,o,p):void 0;return c}case"misc":switch(i.misc_type){case"NavigationEndpoint":return r?new v(u(this,Te,"m",vi).call(this,{data:o},[...s,e])):void 0;case"Text":return r?new l(u(this,Te,"m",vi).call(this,{data:o},[...s,e])):void 0;case"Thumbnail":return r?y.fromResponse(u(this,Te,"m",vi).call(this,{data:o},[...s,e])):void 0;case"Author":return!i.optional||u(this,Te,"m",xg).call(this,{data:o},[...s,i.params[0]])?new F(u(this,Te,"m",vi).call(this,{data:o},[...s,i.params[0]]),i.params[1]?u(this,Te,"m",vi).call(this,{data:o},[...s,i.params[1]]):void 0):void 0}throw new Error("Unreachable code reached! Switch missing case!");case"primative":case"unknown":return u(this,Te,"m",vi).call(this,{data:o},[...s,e])}}static inferType(e,i){let o=!1;if(o=this.isRenderer(i))return u(this,Te,"f",fv)[o]=i[Reflect.ownKeys(i)[0]],{type:"renderer",renderers:[o],optional:!1};if(o=this.isRendererList(i)){for(let[r,c]of Object.entries(o))u(this,Te,"f",fv)[r]=c;return{type:"renderer_list",renderers:Object.keys(o),optional:!1}}if(o=this.isMiscType(e,i))return o;let s=typeof i;return s==="object"?{type:"object",keys:Object.entries(i).map(([r,c])=>[r,this.inferType(r,c)]),optional:!1}:{type:"primative",typeof:[s],optional:!1}}static isRendererList(e){return Array.isArray(e)&&e.every(s=>this.isRenderer(s))?Object.fromEntries(e.map(s=>{let r=Reflect.ownKeys(s)[0].toString();return[W.sanitizeClassName(r),s[r]]})):!1}static isMiscType(e,i){if((e.endsWith("Endpoint")||e.endsWith("Command")||e==="endpoint")&&typeof i=="object")return{type:"misc",endpoint:new v(i),optional:!1,misc_type:"NavigationEndpoint"};if(typeof i=="object"&&(Reflect.has(i,"simpleText")||Reflect.has(i,"runs"))){let o=new l(i);return{type:"misc",misc_type:"Text",optional:!1,endpoint:o.endpoint,text:o.toString()}}return typeof i=="object"&&Reflect.has(i,"thumbnails")&&Array.isArray(i.thumbnails)?{type:"misc",misc_type:"Thumbnail",optional:!1}:!1}static isRenderer(e){if(!(typeof e=="object"))return!1;let o=Reflect.ownKeys(e);return o.length===1&&o[0].toString().includes("Renderer")?W.sanitizeClassName(o[0].toString()):!1}};n(Ke,"YTNodeGenerator");Te=Ke,Zn=n(function(e){return e.replace(/[A-Z]/g,i=>`_${i.toLowerCase()}`)},"_YTNodeGenerator_camelToSnake"),pT=n(function(e,i){console.warn(new g(`${e} not found!
This is a bug, want to help us fix it? Follow the instructions at ${B.shim.info.repo_url}/blob/main/docs/updating-the-parser.md or report it at ${B.shim.info.bugs_url}!
Introspected and JIT generated this class in the meantime:
${this.generateTypescriptClass(e,i)}`))},"_YTNodeGenerator_logNewClass"),fT=n(function(e,i,o){console.warn(`${e} changed!
The following keys where altered: ${o.map(([s])=>u(this,Te,"m",Zn).call(this,s)).join(", ")}
The class has changed to:
${this.generateTypescriptClass(e,i)}`)},"_YTNodeGenerator_logChangedKeys"),vi=n(function(e,i){let o=e;for(let s of i)o=o[s];return o},"_YTNodeGenerator_accessDataFromKeyPath"),xg=n(function(e,i){let o=e;for(let s of i)if(Reflect.has(o,s))o=o[s];else return!1;return!0},"_YTNodeGenerator_hasDataFromKeyPath"),lT=n(function(e){return Reflect.ownKeys(e).filter(s=>!this.isIgnoredKey(s)).filter(s=>typeof s=="string").map(s=>{let r=e[s],c=this.inferType(s,r);return[s,c]})},"_YTNodeGenerator_passOne"),cT=n(function(e){var i;let s=e.filter(([,f])=>{var m;return f.type!=="misc"||!(f.misc_type==="NavigationEndpoint"||f.misc_type==="Text")?!1:((m=f.endpoint)===null||m===void 0?void 0:m.metadata.page_type)==="WEB_PAGE_TYPE_CHANNEL"}).sort(([,f],[,m])=>f.type!=="misc"||m.type!=="misc"||f.misc_type!=="Text"||m.misc_type!=="Text"?0:m.text.length-f.text.length),r=new Set,c=s[0],p;if(c){r.add(c[0]);let m=e.map(([I])=>I).filter(I=>I.endsWith("Badges")||I==="badges"),b=(i=m.filter(I=>I.startsWith("owner")||I.startsWith("author"))[0])!==null&&i!==void 0?i:m[0],w=e.find(([I])=>I===b),T=w?w[1].type==="renderer_list"&&Reflect.has(w[1].renderers,"MetadataBadge"):!1;T&&b&&r.add(b),p={type:"misc",misc_type:"Author",optional:!1,params:[c[0],T?b:void 0]}}return p&&e.push(["author",p]),e.filter(([f])=>!r.has(f))},"_YTNodeGenerator_passTwo"),hT=n(function(e){let i=u(this,Te,"m",lT).call(this,e);return u(this,Te,"m",cT).call(this,i)},"_YTNodeGenerator_introspect");dT={value:new Set(["trackingParams","accessibility","accessibilityData"])};fv={value:{}};var J,yg,Ji,Ot,Dt,mT,Bt,_T,hv,wg,de=class{static setParserErrorHandler(e){S(this,J,e,"f",yg)}static parseResponse(e){var i,o,s;let r={};u(this,J,"m",Dt).call(this);let c=this.parse(e.contents),p=u(this,J,"m",Bt).call(this);c&&(r.contents=c,r.contents_memo=p),u(this,J,"m",Ot).call(this),u(this,J,"m",Dt).call(this);let f=e.onResponseReceivedActions?this.parseRR(e.onResponseReceivedActions):null,m=u(this,J,"m",Bt).call(this);f&&(r.on_response_received_actions=f,r.on_response_received_actions_memo=m),u(this,J,"m",Ot).call(this),u(this,J,"m",Dt).call(this);let _=e.onResponseReceivedEndpoints?this.parseRR(e.onResponseReceivedEndpoints):null,b=u(this,J,"m",Bt).call(this);_&&(r.on_response_received_endpoints=_,r.on_response_received_endpoints_memo=b),u(this,J,"m",Ot).call(this),u(this,J,"m",Dt).call(this);let w=e.onResponseReceivedCommands?this.parseRR(e.onResponseReceivedCommands):null,T=u(this,J,"m",Bt).call(this);w&&(r.on_response_received_commands=w,r.on_response_received_commands_memo=T),u(this,J,"m",Ot).call(this),u(this,J,"m",Dt).call(this);let I=e.continuationContents?this.parseLC(e.continuationContents):null,C=u(this,J,"m",Bt).call(this);I&&(r.continuation_contents=I,r.continuation_contents_memo=C),u(this,J,"m",Ot).call(this),u(this,J,"m",Dt).call(this);let P=e.actions?this.parseActions(e.actions):null,R=u(this,J,"m",Bt).call(this);P&&(r.actions=P,r.actions_memo=R),u(this,J,"m",Ot).call(this),u(this,J,"m",Dt).call(this);let V=e.liveChatItemContextMenuSupportedRenderers?this.parseItem(e.liveChatItemContextMenuSupportedRenderers):null,A=u(this,J,"m",Bt).call(this);V&&(r.live_chat_item_context_menu_supported_renderers=V,r.live_chat_item_context_menu_supported_renderers_memo=A),u(this,J,"m",Ot).call(this),u(this,J,"m",Dt).call(this);let K=e.header?this.parse(e.header):null,Z=u(this,J,"m",Bt).call(this);K&&(r.header=K,r.header_memo=Z),u(this,J,"m",Ot).call(this),u(this,J,"m",Dt).call(this);let ue=e.sidebar?this.parseItem(e.sidebar):null,ve=u(this,J,"m",Bt).call(this);ue&&(r.sidebar=ue,r.sidebar_memo=ve),u(this,J,"m",Ot).call(this),this.applyMutations(p,(o=(i=e.frameworkUpdates)===null||i===void 0?void 0:i.entityBatchUpdate)===null||o===void 0?void 0:o.mutations);let Ne=e.continuation?this.parseC(e.continuation):null;Ne&&(r.continuation=Ne);let X=this.parse(e.metadata);X&&(r.metadata=X);let z=this.parseItem(e.microformat);z&&(r.microformat=z);let ie=this.parseItem(e.overlay);ie&&(r.overlay=ie);let ee=this.parseArray(e.alerts,Rh);ee.length&&(r.alerts=ee);let Ve=e.refinements;Ve&&(r.refinements=Ve);let lt=e.estimatedResults?parseInt(e.estimatedResults):null;lt&&(r.estimated_results=lt);let ct=this.parse(e.playerOverlays);ct&&(r.player_overlays=ct);let dt=e.playbackTracking?{videostats_watchtime_url:e.playbackTracking.videostatsWatchtimeUrl.baseUrl,videostats_playback_url:e.playbackTracking.videostatsPlaybackUrl.baseUrl}:null;dt&&(r.playback_tracking=dt);let Xe=e.playabilityStatus?{status:e.playabilityStatus.status,reason:e.playabilityStatus.reason||"",embeddable:!!e.playabilityStatus.playableInEmbed||!1,audio_only_playablility:this.parseItem(e.playabilityStatus.audioOnlyPlayability,gh),error_screen:this.parseItem(e.playabilityStatus.errorScreen)}:null;Xe&&(r.playability_status=Xe);let tt=e.streamingData?{expires:new Date(Date.now()+parseInt(e.streamingData.expiresInSeconds)*1e3),formats:de.parseFormats(e.streamingData.formats),adaptive_formats:de.parseFormats(e.streamingData.adaptiveFormats),dash_manifest_url:e.streamingData.dashManifestUrl||null,hls_manifest_url:e.streamingData.hlsManifestUrl||null}:void 0;tt&&(r.streaming_data=tt);let it=e.currentVideoEndpoint?new v(e.currentVideoEndpoint):null;it&&(r.current_video_endpoint=it);let ge=e.endpoint?new v(e.endpoint):null;ge&&(r.endpoint=ge);let Le=this.parseItem(e.captions,kh);Le&&(r.captions=Le);let Jt=e.videoDetails?new Oi(e.videoDetails):null;Jt&&(r.video_details=Jt);let Gt=this.parseArray(e.annotations,Ih);Gt.length&&(r.annotations=Gt);let zt=this.parseItem(e.storyboards,[Sn,Ch]);zt&&(r.storyboards=zt);let Kt=this.parseItem(e.endscreen,Sh);Kt&&(r.endscreen=Kt);let wt=this.parseItem(e.cards,Th);wt&&(r.cards=wt);let xn=(s=e.engagementPanels)===null||s===void 0?void 0:s.map(yr=>this.parseItem(yr,Dm));xn&&(r.engagement_panels=xn),u(this,J,"m",Dt).call(this);let bn=this.parse(e.items);return bn&&(r.items=bn,r.items_memo=u(this,J,"m",Bt).call(this)),u(this,J,"m",Ot).call(this),r}static parseItem(e,i){if(!e)return null;let o=Object.keys(e);if(!o.length)return null;let s=this.sanitizeClassName(o[0]);if(!this.shouldIgnore(s))try{let c=this.hasParser(s)?this.getParserByName(s):Ke.generateRuntimeClass(s,e[o[0]]);if(i){if(Array.isArray(i)){if(!i.some(f=>f.type===c.type))throw new pt(`Type mismatch, got ${s} but expected one of ${i.map(f=>f.type).join(", ")}`)}else if(c.type!==i.type)throw new pt(`Type mismatch, got ${s} but expected ${i.type}`)}let p=new c(e[o[0]]);return u(this,J,"m",mT).call(this,s,p),p}catch(r){return u(this,J,"f",yg).call(this,{classname:s,classdata:e[o[0]],err:r}),null}return null}static parseArray(e,i){if(Array.isArray(e)){let o=[];for(let s of e){let r=this.parseItem(s,i);r&&o.push(r)}return pe(o)}else if(!e)return pe([]);throw new pt("Expected array but got a single item")}static parse(e,i,o){if(!e)return null;if(Array.isArray(e)){let s=[];for(let c of e){let p=this.parseItem(c,o);p&&s.push(p)}let r=pe(s);return i?r:new Xt(pe(s))}else if(i)throw new pt("Expected array but got a single item");return new Xt(this.parseItem(e,o))}static parseC(e){return e.timedContinuationData?new es({continuation:e.timedContinuationData,type:"timed"}):null}static parseLC(e){return e.itemSectionContinuation?new Io(e.itemSectionContinuation):e.sectionListContinuation?new mt(e.sectionListContinuation):e.liveChatContinuation?new No(e.liveChatContinuation):e.musicPlaylistShelfContinuation?new Eo(e.musicPlaylistShelfContinuation):e.musicShelfContinuation?new gi(e.musicShelfContinuation):e.gridContinuation?new Po(e.gridContinuation):e.playlistPanelContinuation?new Rf(e.playlistPanelContinuation):null}static parseRR(e){return pe(e.map(i=>{if(i.navigateAction)return new ko(i.navigateAction);if(i.showMiniplayerCommand)return new Nf(i.showMiniplayerCommand);if(i.reloadContinuationItemsCommand)return new Co(i.reloadContinuationItemsCommand);if(i.appendContinuationItemsAction)return new Af(i.appendContinuationItemsAction)}).filter(i=>i))}static parseActions(e){return Array.isArray(e)?de.parse(e.map(i=>(delete i.clickTrackingParams,i))):new Xt(this.parseItem(e))}static parseFormats(e){return(e==null?void 0:e.map(i=>new Vi(i)))||[]}static applyMutations(e,i){let o=e.getType(Rt);if(o.length>0&&!i)console.warn(new g(`Mutation data required for processing MusicMultiSelectMenuItems, but none found.
This is a bug, please report it at ${B.shim.info.bugs_url}`));else{let s=[];for(let r of o){let c=i.find(f=>{var m,_;return((_=(m=f.payload)===null||m===void 0?void 0:m.musicFormBooleanChoice)===null||_===void 0?void 0:_.id)===r.form_item_entity_key}),p=c==null?void 0:c.payload.musicFormBooleanChoice;(p==null?void 0:p.selected)!==void 0&&(p==null?void 0:p.opaqueToken)?r.selected=p.selected:s.push(`'${r.title}'`)}s.length>0&&console.warn(new g(`Mutation data missing or invalid for ${s.length} out of ${o.length} MusicMultiSelectMenuItems. The titles of the failed items are: ${s.join(", ")}.
This is a bug, please report it at ${B.shim.info.bugs_url}`))}}static sanitizeClassName(e){return(e.charAt(0).toUpperCase()+e.slice(1)).replace(/Renderer|Model/g,"").replace(/Radio/g,"Mix").trim()}static shouldIgnore(e){return this.ignore_list.has(e)}static getParserByName(e){let i=u(this,J,"f",hv).get(e);if(!i){let o=new Error(`Module not found: ${e}`);throw o.code="MODULE_NOT_FOUND",o}return i}static hasParser(e){return u(this,J,"f",hv).has(e)}static addRuntimeParser(e,i){u(this,J,"f",hv).set(e,i),u(this,J,"f",wg).set(e,i)}static getDynamicParsers(){return Object.fromEntries(u(this,J,"f",wg))}};n(de,"Parser");J=de,Ot=n(function(){S(de,J,null,"f",Ji)},"_Parser_clearMemo"),Dt=n(function(){S(de,J,new Ni,"f",Ji)},"_Parser_createMemo"),mT=n(function(e,i){if(!u(de,J,"f",Ji))return;let o=u(de,J,"f",Ji).get(e);if(!o)return u(de,J,"f",Ji).set(e,[i]);o.push(i)},"_Parser_addToMemo"),Bt=n(function(){if(!u(de,J,"f",Ji))throw new Error("Parser#getMemo() called before Parser#createMemo()");return u(de,J,"f",Ji)},"_Parser_getMemo"),_T=n(function({classname:e,classdata:i,err:o}){if(o.code=="MODULE_NOT_FOUND")return console.warn(new g(`${e} not found!
This is a bug, want to help us fix it? Follow the instructions at ${B.shim.info.repo_url.split("#")[0]}/blob/main/docs/updating-the-parser.md or report it at ${B.shim.info.bugs_url}!`,i));console.warn(new g(`Something went wrong at ${e}!
This is a bug, please report it at ${B.shim.info.bugs_url}`,{stack:o.stack}))},"_Parser_printError");yg={value:u(de,J,"m",_T)};Ji={value:null};de.ignore_list=new Set(["AdSlot","DisplayAd","SearchPyv","MealbarPromo","PrimetimePromo","BackgroundPromo","PromotedSparklesWeb","RunAttestationCommand","CompactPromotedVideo","BrandVideoShelf","BrandVideoSingleton","StatementBanner","GuideSigninPromo","AdsEngagementPanelContent"]);hv={value:new Map(Object.entries(Pf))};wg={value:new Map};var W=de,Io=class extends a{constructor(e){var i,o,s;super(),this.contents=de.parseArray(e.contents),Array.isArray(e.continuations)&&(this.continuation=(s=(o=(i=e.continuations)===null||i===void 0?void 0:i.at(0))===null||o===void 0?void 0:o.nextContinuationData)===null||s===void 0?void 0:s.continuation)}};n(Io,"ItemSectionContinuation");Io.type="itemSectionContinuation";var ko=class extends a{constructor(e){super(),this.endpoint=new v(e.endpoint)}};n(ko,"NavigateAction");ko.type="navigateAction";var Nf=class extends a{constructor(e){super(),this.miniplayer_command=new v(e.miniplayerCommand),this.show_premium_branding=e.showPremiumBranding}};n(Nf,"ShowMiniplayerCommand");Nf.type="showMiniplayerCommand";var Af=class extends a{constructor(e){super(),this.contents=de.parseArray(e.continuationItems)}};n(Af,"AppendContinuationItemsAction");Af.type="appendContinuationItemsAction";var Co=class extends a{constructor(e){super(),this.target_id=e.targetId,this.contents=de.parse(e.continuationItems,!0),this.slot=e==null?void 0:e.slot}};n(Co,"ReloadContinuationItemsCommand");Co.type="reloadContinuationItemsCommand";var mt=class extends a{constructor(e){var i,o,s,r,c,p;super(),this.contents=de.parse(e.contents,!0),this.continuation=((s=(o=(i=e.continuations)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.nextContinuationData)===null||s===void 0?void 0:s.continuation)||((p=(c=(r=e.continuations)===null||r===void 0?void 0:r[0])===null||c===void 0?void 0:c.reloadContinuationData)===null||p===void 0?void 0:p.continuation)||null}};n(mt,"SectionListContinuation");mt.type="sectionListContinuation";var Eo=class extends a{constructor(e){var i;super(),this.contents=de.parse(e.contents,!0),this.continuation=((i=e.continuations)===null||i===void 0?void 0:i[0].nextContinuationData.continuation)||null}};n(Eo,"MusicPlaylistShelfContinuation");Eo.type="musicPlaylistShelfContinuation";var gi=class extends a{constructor(e){var i,o,s,r;super(),this.contents=de.parseArray(e.contents),this.continuation=((o=(i=e.continuations)===null||i===void 0?void 0:i[0].nextContinuationData)===null||o===void 0?void 0:o.continuation)||((r=(s=e.continuations)===null||s===void 0?void 0:s[0].reloadContinuationData)===null||r===void 0?void 0:r.continuation)||null}};n(gi,"MusicShelfContinuation");gi.type="musicShelfContinuation";var Po=class extends a{constructor(e){var i;super(),this.items=de.parse(e.items,!0),this.continuation=((i=e.continuations)===null||i===void 0?void 0:i[0].nextContinuationData.continuation)||null}get contents(){return this.items}};n(Po,"GridContinuation");Po.type="gridContinuation";var Rf=class extends a{constructor(e){var i,o,s,r,c,p;super(),this.contents=de.parseArray(e.contents),this.continuation=((s=(o=(i=e.continuations)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.nextContinuationData)===null||s===void 0?void 0:s.continuation)||((p=(c=(r=e.continuations)===null||r===void 0?void 0:r[0])===null||c===void 0?void 0:c.nextRadioContinuationData)===null||p===void 0?void 0:p.continuation)||null}};n(Rf,"PlaylistPanelContinuation");Rf.type="playlistPanelContinuation";var es=class extends a{constructor(e){var i,o,s;super(),this.continuation_type=e.type,this.timeout_ms=(i=e.continuation)===null||i===void 0?void 0:i.timeoutMs,this.time_until_last_message_ms=(o=e.continuation)===null||o===void 0?void 0:o.timeUntilLastMessageMsec,this.token=(s=e.continuation)===null||s===void 0?void 0:s.continuation}};n(es,"Continuation");es.type="continuation";var No=class extends a{constructor(e){var i,o,s,r,c,p,f,m;super(),this.actions=de.parse((i=e.actions)===null||i===void 0?void 0:i.map(w=>(delete w.clickTrackingParams,w)),!0)||pe([]),this.action_panel=de.parseItem(e.actionPanel),this.item_list=de.parseItem(e.itemList,Ah),this.header=de.parseItem(e.header,Nh),this.participants_list=de.parseItem(e.participantsList,Ph),this.popout_message=de.parseItem(e.popoutMessage,Je),this.emojis=((o=e.emojis)===null||o===void 0?void 0:o.map(w=>({emoji_id:w.emojiId,shortcuts:w.shortcuts,search_terms:w.searchTerms,image:y.fromResponse(w.image),is_custom_emoji:w.isCustomEmoji})))||[];let _,b;!((s=e.continuations)===null||s===void 0)&&s[0].timedContinuationData?(b="timed",_=(r=e.continuations)===null||r===void 0?void 0:r[0].timedContinuationData):!((c=e.continuations)===null||c===void 0)&&c[0].invalidationContinuationData?(b="invalidation",_=(p=e.continuations)===null||p===void 0?void 0:p[0].invalidationContinuationData):!((f=e.continuations)===null||f===void 0)&&f[0].liveChatReplayContinuationData&&(b="replay",_=(m=e.continuations)===null||m===void 0?void 0:m[0].liveChatReplayContinuationData),this.continuation=new es({continuation:_,type:b}),this.viewer_name=e.viewerName}};n(No,"LiveChatContinuation");No.type="liveChatContinuation";var Mg={};U(Mg,{AccountInfo:()=>_v,Analytics:()=>gv,Channel:()=>Ae,ChannelListContinuation:()=>Vo,Comments:()=>bv,FilteredChannelList:()=>$i,Guide:()=>wv,HashtagFeed:()=>si,History:()=>us,HomeFeed:()=>Lt,ItemMenu:()=>kv,Library:()=>Pv,LiveChat:()=>Bv,NotificationsMenu:()=>Lv,Playlist:()=>xi,Search:()=>Fv,Settings:()=>Yv,SmoothedQueue:()=>Mv,TimeWatched:()=>Uv,VideoInfo:()=>zf});var ts,mv=class{constructor(e){if(ts.set(this,void 0),S(this,ts,d.parseResponse(e.data),"f"),!u(this,ts,"f").contents)throw new g("Page contents not found");let i=u(this,ts,"f").contents.array().as(Dh).first();if(!i)throw new g("Account section list not found");this.contents=i.contents,this.footers=i.footers}get page(){return u(this,ts,"f")}};n(mv,"AccountInfo");ts=new WeakMap;var _v=mv;var Mf,vv=class{constructor(e){var i;Mf.set(this,void 0),S(this,Mf,d.parseResponse(e.data),"f"),this.sections=(i=u(this,Mf,"f").contents_memo)===null||i===void 0?void 0:i.getType(Dn).map(o=>o.model).flatMap(o=>o||[])}get page(){return u(this,Mf,"f")}};n(vv,"Analytics");Mf=new WeakMap;var gv=vv;var Tg,st,Gi,Vf,rt,vT,zi=class{constructor(e,i,o=!1){Tg.add(this),st.set(this,void 0),Gi.set(this,void 0),Vf.set(this,void 0),rt.set(this,void 0),u(this,Tg,"m",vT).call(this,i)||o?S(this,st,i,"f"):S(this,st,d.parseResponse(i.data),"f");let s=Sg(u(this,st,"f").contents_memo,u(this,st,"f").continuation_contents_memo,u(this,st,"f").on_response_received_commands_memo,u(this,st,"f").on_response_received_endpoints_memo,u(this,st,"f").on_response_received_actions_memo,u(this,st,"f").sidebar_memo,u(this,st,"f").header_memo);if(!s)throw new g("No memo found in feed");S(this,rt,s,"f"),S(this,Vf,e,"f")}static getVideosFromMemo(e){return e.getType(Ln,Um,W_,Cn,F_,_i,uv)}static getPlaylistsFromMemo(e){return e.getType(Qt,Fm)}get videos(){return zi.getVideosFromMemo(u(this,rt,"f"))}get posts(){return u(this,rt,"f").getType(Bi,Y_,Z_)}get channels(){return u(this,rt,"f").getType(Kh,Lm)}get playlists(){return zi.getPlaylistsFromMemo(u(this,rt,"f"))}get memo(){return u(this,rt,"f")}get page_contents(){var e;let i=(e=u(this,rt,"f").getType(we))===null||e===void 0?void 0:e.first().content,o=u(this,rt,"f").getType(Co).first(),s=u(this,rt,"f").getType(Bh).first();return i||o||s}get shelves(){return u(this,rt,"f").getType($n,G_,H_)}getShelf(e){return this.shelves.get({title:e})}get secondary_contents(){var e,i;if(!(!((e=u(this,st,"f").contents)===null||e===void 0)&&e.is_node))return;let o=(i=u(this,st,"f").contents)===null||i===void 0?void 0:i.item();if(!!o.is(Hi,nv))return o.secondary_contents}get actions(){return u(this,Vf,"f")}get page(){return u(this,st,"f")}get has_continuation(){return(u(this,rt,"f").get("ContinuationItem")||[]).length>0}getContinuationData(){return x(this,void 0,void 0,function*(){if(u(this,Gi,"f")){if(u(this,Gi,"f").length>1)throw new g("There are too many continuations, you'll need to find the correct one yourself in this.page");if(u(this,Gi,"f").length===0)throw new g("There are no continuations");return yield u(this,Gi,"f")[0].endpoint.call(u(this,Vf,"f"),{parse:!0})}if(S(this,Gi,u(this,rt,"f").getType(De),"f"),u(this,Gi,"f"))return this.getContinuationData()})}getContinuation(){return x(this,void 0,void 0,function*(){let e=yield this.getContinuationData();if(!e)throw new g("Could not get continuation data");return new zi(this.actions,e,!0)})}};n(zi,"Feed");st=new WeakMap,Gi=new WeakMap,Vf=new WeakMap,rt=new WeakMap,Tg=new WeakSet,vT=n(function(e){return!("data"in e)},"_Feed_isParsed");var xe=zi;var Ao,Ro,Mo=class extends xe{constructor(e,i,o=!1){var s;super(e,i,o),Ao.set(this,void 0),Ro.set(this,void 0),S(this,Ro,e,"f"),S(this,Ao,(s=this.page.contents_memo)===null||s===void 0?void 0:s.getType(we),"f")}get tabs(){var e,i;return(i=(e=u(this,Ao,"f"))===null||e===void 0?void 0:e.map(o=>o.title.toString()))!==null&&i!==void 0?i:[]}getTabByName(e){var i;return x(this,void 0,void 0,function*(){let o=(i=u(this,Ao,"f"))===null||i===void 0?void 0:i.find(r=>r.title.toLowerCase()===e.toLowerCase());if(!o)throw new g(`Tab "${e}" not found`);if(o.selected)return this;let s=yield o.endpoint.call(u(this,Ro,"f"));return new Mo(u(this,Ro,"f"),s,!1)})}getTabByURL(e){var i;return x(this,void 0,void 0,function*(){let o=(i=u(this,Ao,"f"))===null||i===void 0?void 0:i.find(r=>{var c;return((c=r.endpoint.metadata.url)===null||c===void 0?void 0:c.split("/").pop())===e});if(!o)throw new g(`Tab "${e}" not found`);if(o.selected)return this;let s=yield o.endpoint.call(u(this,Ro,"f"));return new Mo(u(this,Ro,"f"),s,!1)})}hasTabWithURL(e){var i,o;return(o=(i=u(this,Ao,"f"))===null||i===void 0?void 0:i.some(s=>{var r;return((r=s.endpoint.metadata.url)===null||r===void 0?void 0:r.split("/").pop())===e}))!==null&&o!==void 0?o:!1}get title(){var e,i,o;return(o=(i=(e=this.page.contents_memo)===null||e===void 0?void 0:e.getType(we))===null||i===void 0?void 0:i.find(s=>s.selected))===null||o===void 0?void 0:o.title.toString()}};n(Mo,"TabbedFeed");Ao=new WeakMap,Ro=new WeakMap;var is=Mo;var os,xv=class extends xe{constructor(e,i,o=!1){super(e,i,o),os.set(this,void 0)}get filter_chips(){var e,i;if(u(this,os,"f"))return u(this,os,"f")||[];if(((e=this.memo.getType(mi))===null||e===void 0?void 0:e.length)>1)throw new g("There are too many feed filter chipbars, you'll need to find the correct one yourself in this.page");if(((i=this.memo.getType(mi))===null||i===void 0?void 0:i.length)===0)throw new g("There are no feed filter chipbars");return S(this,os,this.memo.getType(be),"f"),u(this,os,"f")||[]}get filters(){return this.filter_chips.map(e=>e.text.toString())||[]}getFilteredFeed(e){var i;return x(this,void 0,void 0,function*(){let o;if(typeof e=="string"){if(!this.filters.includes(e))throw new g("Filter not found",{available_filters:this.filters});o=this.filter_chips.find(r=>r.text.toString()===e)}else if(e.type==="ChipCloudChip")o=e;else throw new g("Invalid filter");if(!o)throw new g("Filter not found");if(o.is_selected)return this;let s=yield(i=o.endpoint)===null||i===void 0?void 0:i.call(this.actions,{parse:!0});if(!s)throw new g("Failed to get filtered feed");return new xe(this.actions,s,!0)})}};n(xv,"FilterableFeed");os=new WeakMap;var Ki=xv;var Ae=class extends is{constructor(e,i,o=!1){var s,r,c,p,f,m;super(e,i,o),this.header=(r=(s=this.page.header)===null||s===void 0?void 0:s.item())===null||r===void 0?void 0:r.as(kn,Jh,Km,N_);let _=(c=this.page.metadata)===null||c===void 0?void 0:c.item().as(qh),b=(p=this.page.microformat)===null||p===void 0?void 0:p.as(Zt);if(this.page.alerts){let w=this.page.alerts.first();if((w==null?void 0:w.alert_type)==="ERROR")throw new ns(w.text.toString())}if(!_&&!this.page.contents)throw new g("Invalid channel",this);this.metadata=Object.assign(Object.assign({},_),b||{}),this.subscribe_button=(f=this.page.header_memo)===null||f===void 0?void 0:f.getType(Ge).first(),this.current_tab=(m=this.page.contents)===null||m===void 0?void 0:m.item().key("tabs").parsed().array().filterType(we,Yn).get({selected:!0})}applyFilter(e){var i;return x(this,void 0,void 0,function*(){let o,s=this.memo.getType(mi).first();if(typeof e=="string"){if(o=s==null?void 0:s.contents.get({text:e}),!o)throw new g(`Filter ${e} not found`,{available_filters:this.filters})}else e instanceof be&&(o=e);if(!o)throw new g("Invalid filter",e);let r=yield(i=o.endpoint)===null||i===void 0?void 0:i.call(this.actions,{parse:!0});if(!r)throw new g("No page returned",{filter:o});return new $i(this.actions,r,!0)})}applySort(e){var i,o;return x(this,void 0,void 0,function*(){let s=this.memo.getType(fi).first();if(!s)throw new g("No sort filter sub menu found");let r=(i=s==null?void 0:s.sub_menu_items)===null||i===void 0?void 0:i.find(p=>p.title===e);if(!r)throw new g(`Sort filter ${e} not found`,{available_sort_filters:this.sort_filters});if(r.selected)return this;let c=yield(o=r.endpoint)===null||o===void 0?void 0:o.call(this.actions,{parse:!0});return new Ae(this.actions,c,!0)})}applyContentTypeFilter(e){var i,o,s,r;return x(this,void 0,void 0,function*(){let c=(s=(o=(i=this.current_tab)===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.as(oe).sub_menu)===null||s===void 0?void 0:s.as(Ma);if(!c)throw new g("Sub menu not found");let p=c.content_type_sub_menu_items.find(m=>m.title===e);if(!p)throw new g(`Sub menu item ${e} not found`,{available_filters:this.content_type_filters});if(p.selected)return this;let f=yield(r=p.endpoint)===null||r===void 0?void 0:r.call(this.actions,{parse:!0});return new Ae(this.actions,f,!0)})}get filters(){var e,i;return((i=(e=this.memo.getType(mi))===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.contents.filterType(be).map(o=>o.text))||[]}get sort_filters(){var e;let i=this.memo.getType(fi).first();return((e=i==null?void 0:i.sub_menu_items)===null||e===void 0?void 0:e.map(o=>o.title))||[]}get content_type_filters(){var e,i,o;let s=(o=(i=(e=this.current_tab)===null||e===void 0?void 0:e.content)===null||i===void 0?void 0:i.as(oe).sub_menu)===null||o===void 0?void 0:o.as(Ma);return(s==null?void 0:s.content_type_sub_menu_items.map(r=>r.title))||[]}getHome(){return x(this,void 0,void 0,function*(){let e=yield this.getTabByURL("featured");return new Ae(this.actions,e.page,!0)})}getVideos(){return x(this,void 0,void 0,function*(){let e=yield this.getTabByURL("videos");return new Ae(this.actions,e.page,!0)})}getShorts(){return x(this,void 0,void 0,function*(){let e=yield this.getTabByURL("shorts");return new Ae(this.actions,e.page,!0)})}getLiveStreams(){return x(this,void 0,void 0,function*(){let e=yield this.getTabByURL("streams");return new Ae(this.actions,e.page,!0)})}getReleases(){return x(this,void 0,void 0,function*(){let e=yield this.getTabByURL("releases");return new Ae(this.actions,e.page,!0)})}getPodcasts(){return x(this,void 0,void 0,function*(){let e=yield this.getTabByURL("podcasts");return new Ae(this.actions,e.page,!0)})}getPlaylists(){return x(this,void 0,void 0,function*(){let e=yield this.getTabByURL("playlists");return new Ae(this.actions,e.page,!0)})}getCommunity(){return x(this,void 0,void 0,function*(){let e=yield this.getTabByURL("community");return new Ae(this.actions,e.page,!0)})}getChannels(){return x(this,void 0,void 0,function*(){let e=yield this.getTabByURL("channels");return new Ae(this.actions,e.page,!0)})}getAbout(){var e;return x(this,void 0,void 0,function*(){return(e=(yield this.getTabByURL("about")).memo.getType($h))===null||e===void 0?void 0:e[0]})}search(e){var i,o;return x(this,void 0,void 0,function*(){let s=(i=this.memo.getType(Yn))===null||i===void 0?void 0:i[0];if(!s)throw new g("Search tab not found",this);let r=yield(o=s.endpoint)===null||o===void 0?void 0:o.call(this.actions,{query:e,parse:!0});return new Ae(this.actions,r,!0)})}get has_home(){return this.hasTabWithURL("featured")}get has_videos(){return this.hasTabWithURL("videos")}get has_shorts(){return this.hasTabWithURL("shorts")}get has_live_streams(){return this.hasTabWithURL("streams")}get has_releases(){return this.hasTabWithURL("releases")}get has_podcasts(){return this.hasTabWithURL("podcasts")}get has_playlists(){return this.hasTabWithURL("playlists")}get has_community(){return this.hasTabWithURL("community")}get has_channels(){return this.hasTabWithURL("channels")}get has_about(){return this.hasTabWithURL("about")}get has_search(){var e;return((e=this.memo.getType(Yn))===null||e===void 0?void 0:e.length)>0}getContinuation(){let e=Object.create(null,{getContinuationData:{get:()=>super.getContinuationData}});return x(this,void 0,void 0,function*(){let i=yield e.getContinuationData.call(this);if(!i)throw new g("Could not get continuation data");return new Vo(this.actions,i,!0)})}};n(Ae,"Channel");var Vo=class extends xe{constructor(e,i,o=!1){var s,r;super(e,i,o),this.contents=((s=this.page.on_response_received_actions)===null||s===void 0?void 0:s.first())||((r=this.page.on_response_received_endpoints)===null||r===void 0?void 0:r.first())}getContinuation(){let e=Object.create(null,{getContinuationData:{get:()=>super.getContinuationData}});return x(this,void 0,void 0,function*(){let i=yield e.getContinuationData.call(this);if(!i)throw new g("Could not get continuation data");return new Vo(this.actions,i,!0)})}};n(Vo,"ChannelListContinuation");var $i=class extends Ki{constructor(e,i,o=!1){super(e,i,o),this.applied_filter=this.memo.getType(be).get({is_selected:!0}),this.page.on_response_received_actions&&this.page.on_response_received_actions.length>1&&this.page.on_response_received_actions.shift(),this.contents=this.page.on_response_received_actions.first()}applyFilter(e){let i=Object.create(null,{getFilteredFeed:{get:()=>super.getFilteredFeed}});return x(this,void 0,void 0,function*(){let o=yield i.getFilteredFeed.call(this,e);return new $i(this.actions,o.page,!0)})}getContinuation(){let e=Object.create(null,{getContinuationData:{get:()=>super.getContinuationData}});return x(this,void 0,void 0,function*(){let i=yield e.getContinuationData.call(this);if(!(i!=null&&i.on_response_received_actions_memo))throw new g("Unexpected continuation data",i);return i.on_response_received_actions_memo.set("FeedFilterChipBar",this.memo.getType(mi)),i.on_response_received_actions_memo.set("ChipCloudChip",this.memo.getType(be)),new $i(this.actions,i,!0)})}};n($i,"FilteredChannelList");var ss,ni,rs,Oo=class{constructor(e,i,o=!1){var s,r,c;ss.set(this,void 0),ni.set(this,void 0),rs.set(this,void 0),S(this,ss,o?i:d.parseResponse(i),"f"),S(this,ni,e,"f");let p=u(this,ss,"f").on_response_received_endpoints;if(!p)throw new g("Comments page did not have any content.");let f=p.at(0),m=p.at(1);this.header=(s=f==null?void 0:f.contents)===null||s===void 0?void 0:s.firstOfType(Rn);let _=((r=m==null?void 0:m.contents)===null||r===void 0?void 0:r.filterType(hm))||[];this.contents=pe(_.map(b=>{var w;return(w=b.comment)===null||w===void 0||w.setActions(u(this,ni,"f")),b.setActions(u(this,ni,"f")),b})),S(this,rs,(c=m==null?void 0:m.contents)===null||c===void 0?void 0:c.firstOfType(De),"f")}applySort(e){var i,o,s,r;return x(this,void 0,void 0,function*(){if(!this.header)throw new g("Page header is missing. Cannot apply sort option.");let c;if(e==="TOP_COMMENTS"?c=(o=(i=this.header.sort_menu)===null||i===void 0?void 0:i.sub_menu_items)===null||o===void 0?void 0:o.at(0):e==="NEWEST_FIRST"&&(c=(r=(s=this.header.sort_menu)===null||s===void 0?void 0:s.sub_menu_items)===null||r===void 0?void 0:r.at(1)),!c)throw new g("Could not find target button.");if(c.selected)return this;let p=yield c.endpoint.call(u(this,ni,"f"),{parse:!0});return new Oo(u(this,ni,"f"),p,!0)})}createComment(e){var i;return x(this,void 0,void 0,function*(){if(!this.header)throw new g("Page header is missing. Cannot create comment.");let o=(i=this.header.create_renderer)===null||i===void 0?void 0:i.as(fm).submit_button;if(!o)throw new g("Could not find target button. You are probably not logged in.");if(!o.endpoint)throw new g("Button does not have an endpoint.");return yield o.endpoint.call(u(this,ni,"f"),{commentText:e})})}getContinuation(){return x(this,void 0,void 0,function*(){if(!u(this,rs,"f"))throw new g("Continuation not found");let e=yield u(this,rs,"f").endpoint.call(u(this,ni,"f"),{parse:!0}),i=Object.assign({},u(this,ss,"f"));if(!i.on_response_received_endpoints||!e.on_response_received_endpoints)throw new g("Invalid reponse format, missing on_response_received_endpoints.");return i.on_response_received_endpoints.pop(),i.on_response_received_endpoints.push(e.on_response_received_endpoints[0]),new Oo(u(this,ni,"f"),i,!0)})}get has_continuation(){return!!u(this,rs,"f")}get page(){return u(this,ss,"f")}};n(Oo,"Comments");ss=new WeakMap,ni=new WeakMap,rs=new WeakMap;var bv=Oo;var Of,yv=class{constructor(e){Of.set(this,void 0),S(this,Of,W.parseResponse(e),"f"),this.contents=u(this,Of,"f").items.array().as(jn,Wm)}get page(){return u(this,Of,"f")}};n(yv,"Guide");Of=new WeakMap;var wv=yv;var as=class extends xe{constructor(e,i,o=!1){super(e,i,o),this.sections=this.memo.getType(ye),this.feed_actions=this.memo.getType(Uh).first()}getContinuation(){return x(this,void 0,void 0,function*(){let e=yield this.getContinuationData();if(!e)throw new Error("No continuation data found");return new as(this.actions,e,!0)})}};n(as,"History");var us=as;var Lt=class extends Ki{constructor(e,i,o=!1){super(e,i,o),this.header=this.memo.getType(Bm).first(),this.contents=this.memo.getType(Wi).first()||this.page.on_response_received_actions.first()}applyFilter(e){let i=Object.create(null,{getFilteredFeed:{get:()=>super.getFilteredFeed}});return x(this,void 0,void 0,function*(){let o=yield i.getFilteredFeed.call(this,e);return new Lt(this.actions,o.page,!0)})}getContinuation(){let e=Object.create(null,{getContinuation:{get:()=>super.getContinuation}});var i;return x(this,void 0,void 0,function*(){let o=yield e.getContinuation.call(this);return o.page.header=this.page.header,(i=o.page.header_memo)===null||i===void 0||i.set(this.header.type,[this.header]),new Lt(this.actions,o.page,!0)})}};n(Lt,"HomeFeed");var si=class extends Ki{constructor(e,i){if(super(e,i),!this.page.contents_memo)throw new g("Unexpected response",this.page);let o=this.page.contents_memo.getType(we).first();if(!o.content)throw new g("Content tab has no content",o);this.page.header&&(this.header=this.page.header.item().as(Hm)),this.contents=o.content.as(Wi)}applyFilter(e){let i=Object.create(null,{getFilteredFeed:{get:()=>super.getFilteredFeed}});return x(this,void 0,void 0,function*(){let o=yield i.getFilteredFeed.call(this,e);return new si(this.actions,o.page)})}};n(si,"HashtagFeed");var Tv,Sv,Df,Iv=class{constructor(e,i){Tv.set(this,void 0),Sv.set(this,void 0),Df.set(this,void 0),S(this,Tv,e,"f"),S(this,Sv,i,"f");let o=e==null?void 0:e.live_chat_item_context_menu_supported_renderers;if(!o||!o.is(H))throw new g('Response did not have a "live_chat_item_context_menu_supported_renderers" property. The call may have failed.');S(this,Df,o.as(H).items,"f")}selectItem(e){return x(this,void 0,void 0,function*(){let i;if(e instanceof k){if(!e.endpoint)throw new g("Item does not have an endpoint.");i=e.endpoint}else{let s=u(this,Df,"f").find(r=>r.is(Un)?r.as(Un).icon_type===e:!1);if(!s||!s.is(Un))throw new g(`Button "${e}" not found.`);i=s.endpoint}if(!i)throw new g("Target button does not have an endpoint.");return yield i.call(u(this,Sv,"f"),{parse:!0})})}items(){return u(this,Df,"f")}page(){return u(this,Tv,"f")}};n(Iv,"ItemMenu");Tv=new WeakMap,Sv=new WeakMap,Df=new WeakMap;var kv=Iv;var Bf,Cv,ls=class extends xe{constructor(e,i,o=!1){var s,r,c,p;super(e,i,o),Bf.add(this);let f=this.memo.getType(O_).first(),m=this.memo.getType(B_).first(),_=this.memo.getType(L_).first();if(!m&&!_)throw new g("This playlist does not exist");this.info=Object.assign(Object.assign({},(s=this.page.metadata)===null||s===void 0?void 0:s.item().as(D_)),{subtitle:f.subtitle,author:(c=(r=_==null?void 0:_.owner)===null||r===void 0?void 0:r.as(Xn).author)!==null&&c!==void 0?c:f==null?void 0:f.author,thumbnails:(p=m==null?void 0:m.thumbnail_renderer)===null||p===void 0?void 0:p.as(On,Vn).thumbnail,total_items:u(this,Bf,"m",Cv).call(this,0,m),views:u(this,Bf,"m",Cv).call(this,1,m),last_updated:u(this,Bf,"m",Cv).call(this,2,m),can_share:f==null?void 0:f.can_share,can_delete:f==null?void 0:f.can_delete,is_editable:f==null?void 0:f.is_editable,privacy:f==null?void 0:f.privacy}),this.menu=m==null?void 0:m.menu,this.endpoint=m==null?void 0:m.endpoint,this.messages=this.memo.getType(Je)}get items(){return this.videos}getContinuation(){return x(this,void 0,void 0,function*(){let e=yield this.getContinuationData();if(!e)throw new g("Could not get continuation data");return new ls(this.actions,e,!0)})}};n(ls,"Playlist");Bf=new WeakSet,Cv=n(function(e,i){var o;return!i||!i.stats?"N/A":((o=i.stats[e])===null||o===void 0?void 0:o.toString())||"N/A"},"_Playlist_getStat");var xi=ls;var Ig,gT,Ev=class extends xe{constructor(e,i){if(super(e,i),Ig.add(this),!this.page.contents_memo)throw new g("Page contents not found");let o=this.page.contents_memo.getType(j_).first(),s=this.page.contents_memo.getType(U_).first();this.profile={stats:o,user_info:s};let r=this.page.contents_memo.getType($n);this.sections=r.map(c=>{var p;return{type:c.icon_type,title:c.title,contents:((p=c.content)===null||p===void 0?void 0:p.key("items").array())||[],getAll:()=>u(this,Ig,"m",gT).call(this,c)}})}get history(){return this.sections.find(e=>e.type==="WATCH_HISTORY")}get watch_later(){return this.sections.find(e=>e.type==="WATCH_LATER")}get liked_videos(){return this.sections.find(e=>e.type==="LIKE")}get playlists_section(){return this.sections.find(e=>e.type==="PLAYLISTS")}get clips(){return this.sections.find(e=>e.type==="CONTENT_CUT")}};n(Ev,"Library");Ig=new WeakSet,gT=n(function(e){var i;return x(this,void 0,void 0,function*(){if(!(!((i=e.menu)===null||i===void 0)&&i.as(H).hasKey("top_level_buttons")))throw new g(`The ${e.title.text} shelf doesn't have more items`);let o=e.menu.as(H).top_level_buttons.firstOfType(k);if(!o)throw new g("Did not find target button.");let s=yield o.as(k).endpoint.call(this.actions,{parse:!0});switch(e.icon_type){case"LIKE":case"WATCH_LATER":return new xi(this.actions,s,!0);case"WATCH_HISTORY":return new us(this.actions,s,!0);case"CONTENT_CUT":return new xe(this.actions,s,!0);default:throw new g("Target shelf not implemented.")}})},"_Library_getAll");var Pv=Ev;var cs,Nv=class extends EventTarget{constructor(){super(),cs.set(this,new Map)}emit(e,...i){let o=new B.shim.CustomEvent(e,{detail:i});this.dispatchEvent(o)}on(e,i){let o=n(s=>{s instanceof B.shim.CustomEvent?i(...s.detail):i(s)},"wrapper");u(this,cs,"f").set(i,o),this.addEventListener(e,o)}once(e,i){let o=n(s=>{s instanceof B.shim.CustomEvent?i(...s.detail):i(s),this.off(e,i)},"wrapper");u(this,cs,"f").set(i,o),this.addEventListener(e,o)}off(e,i){let o=u(this,cs,"f").get(i);o&&(this.removeEventListener(e,o),u(this,cs,"f").delete(i))}};n(Nv,"EventEmitterLike");cs=new WeakMap;var Lf=Nv;var bi,qi,Do,St,Ft,at;function rS(t){let e=[];for(let i of t)if(Array.isArray(i))for(let o of i)e.push(o);else e.push(i);return e}n(rS,"flattenQueue");var Av=class{constructor(){this.front=[],this.back=[]}isEmpty(){return!this.front.length&&!this.back.length}clear(){this.front=[],this.back=[]}getValues(){return this.front.concat(this.back.reverse())}};n(Av,"DelayQueue");var Rv=class{constructor(){bi.set(this,void 0),qi.set(this,void 0),Do.set(this,void 0),St.set(this,void 0),Ft.set(this,void 0),at.set(this,void 0),S(this,bi,null,"f"),S(this,qi,null,"f"),S(this,Do,null,"f"),S(this,St,[],"f"),S(this,Ft,null,"f"),S(this,at,new Av,"f")}enqueueActionGroup(e){if(u(this,bi,"f")!==null){let i=Date.now()-u(this,bi,"f");u(this,at,"f").back.push(i),5<u(this,at,"f").front.length+u(this,at,"f").back.length&&(u(this,at,"f").front.length||(u(this,at,"f").front=u(this,at,"f").back,u(this,at,"f").front.reverse(),u(this,at,"f").back=[]),u(this,at,"f").front.pop()),S(this,qi,Math.max(...u(this,at,"f").getValues()),"f")}S(this,bi,Date.now(),"f"),u(this,St,"f").push(e),u(this,Ft,"f")===null&&S(this,Ft,setTimeout(this.emitSmoothedActions.bind(this)),"f")}emitSmoothedActions(){if(S(this,Ft,null,"f"),u(this,St,"f").length){let e=1e4;u(this,qi,"f")!==null&&u(this,bi,"f")!==null&&(e=u(this,qi,"f")-Date.now()+u(this,bi,"f")),e=u(this,St,"f").length<e/80?1:Math.ceil(u(this,St,"f").length/(e/80));let i=rS(u(this,St,"f").splice(0,e));u(this,Do,"f")&&u(this,Do,"f").call(this,i),u(this,St,"f")!==null&&(e==1?(e=u(this,qi,"f")/u(this,St,"f").length,e*=Math.random()+.5,e=Math.min(1e3,e),e=Math.max(80,e)):e=80,S(this,Ft,setTimeout(this.emitSmoothedActions.bind(this),e),"f"))}}clear(){u(this,Ft,"f")!==null&&(clearTimeout(u(this,Ft,"f")),S(this,Ft,null,"f")),S(this,St,[],"f")}set callback(e){S(this,Do,e,"f")}get callback(){return u(this,Do,"f")}get action_queue(){return u(this,St,"f")}get estimated_update_interval(){return u(this,qi,"f")}get last_update_time(){return u(this,bi,"f")}get next_update_id(){return u(this,Ft,"f")}get poll_response_delay_queue(){return u(this,at,"f")}};n(Rv,"SmoothedQueue");bi=new WeakMap,qi=new WeakMap,Do=new WeakMap,St=new WeakMap,Ft=new WeakMap,at=new WeakMap;var Mv=Rv;var Ye,yi,jf,Vv,Lo,Ff,Yf,kg,Ov,xT,Bo,Dv=class extends Lf{constructor(e){var i,o;super(),Ye.add(this),yi.set(this,void 0),jf.set(this,void 0),Vv.set(this,void 0),Lo.set(this,void 0),Ff.set(this,void 0),Yf.set(this,0),this.running=!1,this.is_replay=!1,S(this,jf,e.basic_info.id,"f"),S(this,Vv,e.basic_info.channel_id,"f"),S(this,yi,e.actions,"f"),S(this,Lo,(i=e.livechat)===null||i===void 0?void 0:i.continuation,"f"),this.is_replay=((o=e.livechat)===null||o===void 0?void 0:o.is_replay)||!1,this.smoothed_queue=new Mv,this.smoothed_queue.callback=s=>x(this,void 0,void 0,function*(){s.length?s.length<10?yield u(this,Ye,"m",Ov).call(this,s):this.is_replay?(u(this,Ye,"m",Ov).call(this,s),yield u(this,Ye,"m",Bo).call(this,2e3)):u(this,Ye,"m",Ov).call(this,s):yield u(this,Ye,"m",Bo).call(this,2e3),this.running&&u(this,Ye,"m",kg).call(this)})}on(e,i){super.on(e,i)}once(e,i){super.once(e,i)}start(){this.running||(this.running=!0,u(this,Ye,"m",kg).call(this),u(this,Ye,"m",xT).call(this))}stop(){this.smoothed_queue.clear(),this.running=!1}sendMessage(e){return x(this,void 0,void 0,function*(){let i=yield u(this,yi,"f").execute("/live_chat/send_message",{params:Se.encodeMessageParams(u(this,Vv,"f"),u(this,jf,"f")),richMessage:{textSegments:[{text:e}]},clientMessageId:B.shim.uuidv4(),client:"ANDROID",parse:!0});if(!i.actions)throw new g("Unexpected response from send_message",i);return i.actions.array().as(t_)})}applyFilter(e){var i,o,s,r,c,p,f;if(!this.initial_info)throw new g("Cannot apply filter before initial info is retrieved.");let m=(s=(o=(i=this.initial_info)===null||i===void 0?void 0:i.header)===null||o===void 0?void 0:o.view_selector)===null||s===void 0?void 0:s.sub_menu_items;if(e==="TOP_CHAT"){if(!((r=m==null?void 0:m.at(0))===null||r===void 0)&&r.selected)return;S(this,Lo,(c=m==null?void 0:m.at(0))===null||c===void 0?void 0:c.continuation,"f")}else{if(!((p=m==null?void 0:m.at(1))===null||p===void 0)&&p.selected)return;S(this,Lo,(f=m==null?void 0:m.at(1))===null||f===void 0?void 0:f.continuation,"f")}}getItemMenu(e){return x(this,void 0,void 0,function*(){if(!e.hasKey("menu_endpoint")||!e.key("menu_endpoint").isInstanceof(v))throw new g("This item does not have a menu.",e);let i=yield e.key("menu_endpoint").instanceof(v).call(u(this,yi,"f"),{parse:!0});if(!i)throw new g("Could not retrieve item menu.",e);return new kv(i,u(this,yi,"f"))})}selectButton(e){return x(this,void 0,void 0,function*(){return yield e.endpoint.call(u(this,yi,"f"),{parse:!0})})}};n(Dv,"LiveChat");yi=new WeakMap,jf=new WeakMap,Vv=new WeakMap,Lo=new WeakMap,Ff=new WeakMap,Yf=new WeakMap,Ye=new WeakSet,kg=n(function t(){x(this,void 0,void 0,function*(){var e,i;try{let o=yield u(this,yi,"f").execute(this.is_replay?"live_chat/get_live_chat_replay":"live_chat/get_live_chat",{continuation:u(this,Lo,"f"),parse:!0}),s=o.continuation_contents;if(s||(this.emit("error",new g("Unexpected live chat incremental continuation response",o)),this.emit("end"),this.stop()),!(s instanceof No)){this.stop(),this.emit("end");return}S(this,Lo,s.continuation.token,"f"),s.header?(this.initial_info=s,this.emit("start",s),this.running&&u(this,Ye,"m",t).call(this)):this.smoothed_queue.enqueueActionGroup(s.actions),S(this,Yf,0,"f")}catch(o){this.emit("error",o),S(this,Yf,(i=u(this,Yf,"f"),e=i++,i),"f"),e<10?(yield u(this,Ye,"m",Bo).call(this,2e3),u(this,Ye,"m",t).call(this)):(this.emit("error",new g("Reached retry limit for incremental continuation requests",o)),this.emit("end"),this.stop())}})},"_LiveChat_pollLivechat"),Ov=n(function(e){return x(this,void 0,void 0,function*(){let o=e.length<125?1:Math.ceil(e.length/125),s=o==1?(o=1e4/e.length,o*=Math.random()+.5,o=Math.min(1e3,o),o=Math.max(80,o)):o=80;for(let r of e)yield u(this,Ye,"m",Bo).call(this,s),this.emit("chat-update",r)})},"_LiveChat_emitSmoothedActions"),xT=n(function t(){x(this,void 0,void 0,function*(){var e,i,o,s,r,c,p,f,m,_,b;try{let w={videoId:u(this,jf,"f")};u(this,Ff,"f")&&(w.continuation=u(this,Ff,"f"));let T=yield u(this,yi,"f").execute("/updated_metadata",w),I=d.parseResponse(T.data);S(this,Ff,(e=I.continuation)===null||e===void 0?void 0:e.token,"f"),this.metadata={title:((i=I.actions)===null||i===void 0?void 0:i.array().firstOfType(r_))||((o=this.metadata)===null||o===void 0?void 0:o.title),description:((s=I.actions)===null||s===void 0?void 0:s.array().firstOfType(s_))||((r=this.metadata)===null||r===void 0?void 0:r.description),views:((c=I.actions)===null||c===void 0?void 0:c.array().firstOfType(u_))||((p=this.metadata)===null||p===void 0?void 0:p.views),likes:((f=I.actions)===null||f===void 0?void 0:f.array().firstOfType(a_))||((m=this.metadata)===null||m===void 0?void 0:m.likes),date:((_=I.actions)===null||_===void 0?void 0:_.array().firstOfType(n_))||((b=this.metadata)===null||b===void 0?void 0:b.date)},this.emit("metadata-update",this.metadata),yield u(this,Ye,"m",Bo).call(this,5e3),this.running&&u(this,Ye,"m",t).call(this)}catch(w){yield u(this,Ye,"m",Bo).call(this,2e3),this.running&&u(this,Ye,"m",t).call(this)}})},"_LiveChat_pollMetadata"),Bo=n(function(e){return x(this,void 0,void 0,function*(){return new Promise(i=>setTimeout(()=>i(),e))})},"_LiveChat_wait");var Bv=Dv;var Fo,Uf,ds=class{constructor(e,i){Fo.set(this,void 0),Uf.set(this,void 0),S(this,Uf,e,"f"),S(this,Fo,d.parseResponse(i.data),"f"),this.header=u(this,Fo,"f").actions_memo.getType(d_).first(),this.contents=u(this,Fo,"f").actions_memo.getType(E_)}getContinuation(){return x(this,void 0,void 0,function*(){let e=u(this,Fo,"f").actions_memo.getType(De).first();if(!e)throw new g("Continuation not found");let i=yield e.endpoint.call(u(this,Uf,"f"),{parse:!1});return new ds(u(this,Uf,"f"),i)})}get page(){return u(this,Fo,"f")}};n(ds,"NotificationsMenu");Fo=new WeakMap,Uf=new WeakMap;var Lv=ds;var Yo=class extends xe{constructor(e,i,o=!1){var s,r,c,p,f,m;super(e,i,o);let _=((s=this.page.contents_memo)===null||s===void 0?void 0:s.getType(oe).first().contents)||((r=this.page.on_response_received_commands)===null||r===void 0?void 0:r.first().contents);if(!_)throw new g("No contents found in search response");this.page.header&&(this.header=this.page.header.item().as(K_)),this.results=(c=_.find(b=>b.is(ye)&&b.contents&&b.contents.length>0))===null||c===void 0?void 0:c.as(ye).contents,this.refinements=this.page.refinements||[],this.estimated_results=this.page.estimated_results,this.sub_menu=(p=this.page.contents_memo)===null||p===void 0?void 0:p.getType($_).first(),this.watch_card=(f=this.page.contents_memo)===null||f===void 0?void 0:f.getType(rv).first(),this.refinement_cards=(m=this.results)===null||m===void 0?void 0:m.firstOfType(Li)}selectRefinementCard(e){var i,o;return x(this,void 0,void 0,function*(){let s;if(typeof e=="string"){if(!this.refinement_cards)throw new g("No refinement cards found.");if(s=(o=(i=this.refinement_cards)===null||i===void 0?void 0:i.cards.get({query:e}))===null||o===void 0?void 0:o.as(mo),!s)throw new g(`Refinement card "${e}" not found`,{available_cards:this.refinement_card_queries})}else if(e.type==="SearchRefinementCard")s=e;else throw new g("Invalid refinement card!");let r=yield s.endpoint.call(this.actions,{parse:!0});return new Yo(this.actions,r,!0)})}get refinement_card_queries(){var e;return((e=this.refinement_cards)===null||e===void 0?void 0:e.cards.as(mo).map(i=>i.query))||[]}getContinuation(){return x(this,void 0,void 0,function*(){let e=yield this.getContinuationData();if(!e)throw new g("Could not get continuation data");return new Yo(this.actions,e,!0)})}};n(Yo,"Search");var Fv=Yo;var jo,Wf,ps=class{constructor(e,i){var o,s,r,c;if(jo.set(this,void 0),Wf.set(this,void 0),S(this,Wf,e,"f"),S(this,jo,d.parseResponse(i.data),"f"),this.sidebar=(o=u(this,jo,"f").sidebar)===null||o===void 0?void 0:o.as(Q_),!u(this,jo,"f").contents)throw new g("Page contents not found");let p=u(this,jo,"f").contents.item().as(Hi).tabs.array().as(we).get({selected:!0});if(!p)throw new g("Target tab not found");let f=(s=p.content)===null||s===void 0?void 0:s.as(oe).contents.as(ye);this.introduction=(c=(r=f==null?void 0:f.shift())===null||r===void 0?void 0:r.contents)===null||c===void 0?void 0:c.firstOfType(A_),this.sections=f==null?void 0:f.map(m=>{var _;return{title:((_=m.header)===null||_===void 0?void 0:_.title.toString())||null,contents:m.contents}})}selectSidebarItem(e){return x(this,void 0,void 0,function*(){if(!this.sidebar)throw new g("Sidebar not available");let i;if(typeof e=="string"){if(i=this.sidebar.items.get({title:e}),!i)throw new g(`Item "${e}" not found`,{available_items:this.sidebar_items})}else if(e!=null&&e.is(Mn))i=e;else throw new g("Invalid item",{target_item:e});let o=yield i.endpoint.call(u(this,Wf,"f"),{parse:!1});return new ps(u(this,Wf,"f"),o)})}getSettingOption(e){var i;if(!this.sections)throw new g("Sections not available");for(let o of this.sections)if(!!o.contents)for(let s of o.contents){let r=s.as(Kn).options;if(r){for(let c of r)if(c.is(zn)&&((i=c.title)===null||i===void 0?void 0:i.toString())===e)return c}}throw new g(`Option "${e}" not found`,{available_options:this.setting_options})}get setting_options(){if(!this.sections)throw new g("Sections not available");let e=[];for(let i of this.sections)if(!!i.contents)for(let o of i.contents)o.as(Kn).options&&(e=e.concat(o.as(Kn).options));return e.map(i=>{var o;return(o=i.title)===null||o===void 0?void 0:o.toString()}).filter(i=>i)}get sidebar_items(){if(!this.sidebar)throw new g("Sidebar not available");return this.sidebar.items.map(e=>e.title.toString())}get page(){return u(this,jo,"f")}};n(ps,"Settings");jo=new WeakMap,Wf=new WeakMap;var Yv=ps;var fs,jv=class{constructor(e){var i;if(fs.set(this,void 0),S(this,fs,d.parseResponse(e.data),"f"),!u(this,fs,"f").contents)throw new g("Page contents not found");let o=u(this,fs,"f").contents.item().as(oi).tabs.get({selected:!0});if(!o)throw new g("Could not find target tab.");this.contents=(i=o.content)===null||i===void 0?void 0:i.as(oe).contents.as(ye)}get page(){return u(this,fs,"f")}};n(jv,"TimeWatched");fs=new WeakMap;var Uv=jv;var Rg={};U(Rg,{Feed:()=>xe,FilterableFeed:()=>Ki,MediaInfo:()=>Xi,TabbedFeed:()=>is});var te,Ce,TT,Cg,Wv,Eg,bT,Pg,yT,Ng,wT,Hf=class{static download(e,i,o,s,r,c){return x(this,void 0,void 0,function*(){if((o==null?void 0:o.status)==="UNPLAYABLE")throw new g("Video is unplayable",{error_type:"UNPLAYABLE"});if((o==null?void 0:o.status)==="LOGIN_REQUIRED")throw new g("Video is login required",{error_type:"LOGIN_REQUIRED"});if(!s)throw new g("Streaming data not available.",{error_type:"NO_STREAMING_DATA"});let p=Object.assign({quality:"360p",type:"video+audio",format:"mp4",range:void 0},e),f=this.chooseFormat(p,s),m=f.decipher(r);if(p.type==="video+audio"&&!e.range){let P=yield i.session.http.fetch_function(`${m}&cpn=${c}`,{method:"GET",headers:wn,redirect:"follow"});if(!P.ok)throw new g("The server responded with a non 2xx status code",{error_type:"FETCH_FAILED",response:P});let R=P.body;if(!R)throw new g("Could not get ReadableStream from fetch Response.",{error_type:"FETCH_FAILED",response:P});return R}let _=1048576*10,b=e.range?e.range.start:0,w=e.range?e.range.end:_,T=!1,I;return new B.shim.ReadableStream({start(){},pull:P=>x(this,void 0,void 0,function*(){if(T){P.close();return}return(w>=(f.content_length?f.content_length:0)||e.range)&&(T=!0),new Promise((R,V)=>x(this,void 0,void 0,function*(){var A,K,Z,ue;try{I=new AbortController;let z=yield i.session.http.fetch_function(`${m}&cpn=${c}&range=${b}-${w||""}`,{method:"GET",headers:Object.assign({},wn),signal:I.signal}),ie=z.body;if(!ie)throw new g("Could not get ReadableStream from fetch Response.",{video:this,error_type:"FETCH_FAILED",response:z});try{for(var ve=!0,Ne=kx(Ag(ie)),X;X=yield Ne.next(),A=X.done,!A;ve=!0){ue=X.value,ve=!1;let ee=ue;P.enqueue(ee)}}catch(ee){K={error:ee}}finally{try{!ve&&!A&&(Z=Ne.return)&&(yield Z.call(Ne))}finally{if(K)throw K.error}}b=w+1,w+=_,R()}catch(z){V(z)}}))}),cancel(P){return x(this,void 0,void 0,function*(){I.abort(P)})}},{highWaterMark:1,size(P){return P.byteLength}})})}static chooseFormat(e,i){if(!i)throw new g("Streaming data not available");let o=[...i.formats||[],...i.adaptive_formats||[]],s=e.type?e.type.includes("audio"):!0,r=e.type?e.type.includes("video"):!0,c=e.language||"original",p=e.quality||"best",f=-1,m=["best","bestefficiency"].includes(p),_=p!=="best",b=o.filter(w=>s&&!w.has_audio||r&&!w.has_video||e.format!=="any"&&!w.mime_type.includes(e.format||"mp4")||!m&&w.quality_label!==p?!1:(f<w.width&&(f=w.width),!0));if(!b.length)throw new g("No matching formats found",{options:e});if(m&&r&&(b=b.filter(w=>w.width===f)),s&&!r){let w=b.filter(T=>c!=="original"?!T.has_video&&T.language===c:!T.has_video&&T.is_original);w.length>0&&(b=w)}return _?b.sort((w,T)=>w.bitrate-T.bitrate):b.sort((w,T)=>T.bitrate-w.bitrate),b[0]}static toDash(e,i=f=>f,o,s,r,c,p){return x(this,void 0,void 0,function*(){if(!e)throw new g("Streaming data not available");let f;if(o?f=e.adaptive_formats.filter(T=>!o(T)):f=e.adaptive_formats,!f.length)throw new g("No adaptive formats found");let m=f[0].approx_duration_ms/1e3,_=new B.shim.DOMParser().parseFromString('<?xml version="1.0" encoding="utf-8"?><MPD />',"application/xml"),b=_.querySelector("MPD"),w=_.createElement("Period");return b.replaceWith(u(this,te,"m",Ce).call(this,_,"MPD",{xmlns:"urn:mpeg:dash:schema:mpd:2011",minBufferTime:"PT1.500S",profiles:"urn:mpeg:dash:profile:isoff-main:2011",type:"static",mediaPresentationDuration:`PT${m}S`,"xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation":"urn:mpeg:dash:schema:mpd:2011 http://standards.iso.org/ittf/PubliclyAvailableStandards/MPEG-DASH_schema_files/DASH-MPD.xsd"},[w])),yield u(this,te,"m",TT).call(this,_,w,f,i,s,r,c,p),B.shim.serializeDOM(_)})}};n(Hf,"FormatUtils");te=Hf,Ce=n(function(e,i,o,s=[]){let r=e.createElement(i);for(let[c,p]of Object.entries(o))p&&r.setAttribute(c,p);for(let c of s)typeof c>"u"||r.appendChild(c);return r},"_FormatUtils_el"),TT=n(function(e,i,o,s,r,c,p,f){var m,_,b;return x(this,void 0,void 0,function*(){let w=[],T=[[]];o.forEach(C=>{if((!C.index_range||!C.init_range)&&!C.is_type_otf)return;let P=C.mime_type,R=w.indexOf(P);R>-1?T[R].push(C):(w.push(P),T.push([]),T[w.length-1].push(C))});let I=0;for(let C=0;C<w.length;C++)if(T[C][0].has_audio&&T[C][0].audio_track){let P=[],R=[[]];T[C].forEach(V=>{var A,K;let Z=P.indexOf((A=V.audio_track)===null||A===void 0?void 0:A.id);Z>-1?R[Z].push(V):(P.push((K=V.audio_track)===null||K===void 0?void 0:K.id),R.push([]),R[P.length-1].push(V))});for(let V=0;V<P.length;V++){let A=R[V][0],K=[],Z;!((m=A.audio_track)===null||m===void 0)&&m.audio_is_default?Z="main":A.is_dubbed?Z="dub":A.is_descriptive?Z="description":Z="alternate",K.push(u(this,te,"m",Ce).call(this,e,"Role",{schemeIdUri:"urn:mpeg:dash:role:2011",value:Z}),u(this,te,"m",Ce).call(this,e,"Label",{id:I.toString()},[e.createTextNode((_=A.audio_track)===null||_===void 0?void 0:_.display_name)]));let ue=u(this,te,"m",Ce).call(this,e,"AdaptationSet",{id:`${I++}`,mimeType:w[C].split(";")[0],startWithSAP:"1",subsegmentAlignment:"true",lang:A.language,label:(b=A.audio_track)===null||b===void 0?void 0:b.display_name},K),ve=[];u(this,te,"m",Cg).call(this,ue,R[V],ve),u(this,te,"m",Wv).call(this,ue,R[V],"audioSamplingRate","audio_sample_rate",ve),u(this,te,"m",Eg).call(this,e,ue,R[V],ve),i.appendChild(ue);for(let Ne of R[V])yield u(this,te,"m",Pg).call(this,e,ue,Ne,s,ve,r,c,p)}}else{let P=u(this,te,"m",Ce).call(this,e,"AdaptationSet",{id:`${I++}`,mimeType:w[C].split(";")[0],startWithSAP:"1",subsegmentAlignment:"true"}),R=T[C][0].color_info;if(typeof R<"u"){if(R.primaries){let A="";switch(R.primaries){case"BT709":A="1";break;case"BT2020":A="9";break}A!==""&&P.appendChild(u(this,te,"m",Ce).call(this,e,"EssentialProperty",{schemeIdUri:"urn:mpeg:mpegB:cicp:ColourPrimaries",value:A}))}if(R.transfer_characteristics){let A="";switch(R.transfer_characteristics){case"BT709":A="1";break;case"BT2020_10":A="14";break;case"SMPTEST2084":A="16";break;case"ARIB_STD_B67":A="18";break}A!==""&&P.appendChild(u(this,te,"m",Ce).call(this,e,"EssentialProperty",{schemeIdUri:"urn:mpeg:mpegB:cicp:TransferCharacteristics",value:A}))}if(R.matrix_coefficients){let A="";switch(R.matrix_coefficients){case"BT709":A="1";break;case"BT2020_NCL":A="14";break;default:{let K=T[C][0],Z=new URL(K.url),ue=JSON.parse(JSON.stringify(K));ue.url="REDACTED",ue.signature_cipher="REDACTED",ue.cipher="REDACTED",console.warn(`YouTube.js toDash(): Unknown matrix coefficients "${R.matrix_coefficients}", the DASH manifest is still usuable without this.
Please report it at ${B.shim.info.bugs_url} so we can add support for it.
Innertube client: ${Z.searchParams.get("c")}
format:`,ue)}}A!==""&&P.appendChild(u(this,te,"m",Ce).call(this,e,"EssentialProperty",{schemeIdUri:"urn:mpeg:mpegB:cicp:MatrixCoefficients",value:A}))}}let V=[];if(u(this,te,"m",Cg).call(this,P,T[C],V),T[C][0].has_audio){u(this,te,"m",Wv).call(this,P,T[C],"audioSamplingRate","audio_sample_rate",V),u(this,te,"m",Eg).call(this,e,P,T[C],V);let A=T[C][0].language;A&&P.setAttribute("lang",A)}else P.setAttribute("maxPlayoutRate","1"),u(this,te,"m",Wv).call(this,P,T[C],"frameRate","fps",V);i.appendChild(P);for(let A of T[C])A.has_video?yield u(this,te,"m",bT).call(this,e,P,A,s,V,r,c,p):yield u(this,te,"m",Pg).call(this,e,P,A,s,V,r,c,p)}if(f&&p){let C=[],P=[[]];for(let V of f.boards){let A=new URL(V.template_url).pathname.split(".").at(-1),K="";switch(A){case"jpg":K="image/jpeg";break;case"png":K="image/png";break;case"webp":K="image/webp";break}let Z=C.indexOf(K);Z>-1?P[Z].push(V):(C.push(K),P.push([]),P[C.length-1].push(V))}let R=o[0].approx_duration_ms/1e3;for(let V=0;V<C.length;V++){let A=u(this,te,"m",Ce).call(this,e,"AdaptationSet",{id:`${I++}`,mimeType:C[V],contentType:"image"});i.appendChild(A);for(let K of P[V])yield u(this,te,"m",yT).call(this,e,A,K,R,s,p)}}})},"_FormatUtils_generateAdaptationSet"),Cg=n(function(e,i,o){i.length>1&&new Set(i.map(s=>$e(s.mime_type,'codecs="','"'))).size===1&&(e.setAttribute("codecs",$e(i[0].mime_type,'codecs="','"')),o.push("codecs"))},"_FormatUtils_hoistCodecsIfPossible"),Wv=n(function(e,i,o,s,r){var c;i.length>1&&new Set(i.map(p=>p.fps)).size===1&&(e.setAttribute(o,(c=i[0][s])===null||c===void 0?void 0:c.toString()),r.push(o))},"_FormatUtils_hoistNumberAttributeIfPossible"),Eg=n(function(e,i,o,s){var r;o.length>1&&new Set(o.map(c=>{var p;return((p=c.audio_channels)===null||p===void 0?void 0:p.toString())||"2"})).size===1&&(i.appendChild(u(this,te,"m",Ce).call(this,e,"AudioChannelConfiguration",{schemeIdUri:"urn:mpeg:dash:23003:3:audio_channel_configuration:2011",value:((r=o[0].audio_channels)===null||r===void 0?void 0:r.toString())||"2"})),s.push("AudioChannelConfiguration"))},"_FormatUtils_hoistAudioChannelsIfPossible"),bT=n(function(e,i,o,s,r,c,p,f){var m,_,b,w,T,I;return x(this,void 0,void 0,function*(){let C=new URL(o.decipher(p));C.searchParams.set("cpn",c||"");let P=u(this,te,"m",Ce).call(this,e,"Representation",{id:(m=o.itag)===null||m===void 0?void 0:m.toString(),bandwidth:(_=o.bitrate)===null||_===void 0?void 0:_.toString(),width:(b=o.width)===null||b===void 0?void 0:b.toString(),height:(w=o.height)===null||w===void 0?void 0:w.toString()});if(!r.includes("codecs")){let R=$e(o.mime_type,'codecs="','"');P.setAttribute("codecs",R)}r.includes("frameRate")||P.setAttribute("frameRate",(T=o.fps)===null||T===void 0?void 0:T.toString()),i.appendChild(P),yield u(this,te,"m",Ng).call(this,e,P,o,(I=s(C))===null||I===void 0?void 0:I.toString(),f)})},"_FormatUtils_generateRepresentationVideo"),Pg=n(function(e,i,o,s,r,c,p,f){var m,_,b,w,T,I;return x(this,void 0,void 0,function*(){let C=new URL(o.decipher(p));C.searchParams.set("cpn",c||"");let P;o.audio_track?P=`${(m=o.itag)===null||m===void 0?void 0:m.toString()}-${o.audio_track.id}`:P=(_=o.itag)===null||_===void 0?void 0:_.toString();let R=u(this,te,"m",Ce).call(this,e,"Representation",{id:P,bandwidth:(b=o.bitrate)===null||b===void 0?void 0:b.toString()});if(!r.includes("codecs")){let V=$e(o.mime_type,'codecs="','"');R.setAttribute("codecs",V)}r.includes("audioSamplingRate")||R.setAttribute("audioSamplingRate",(w=o.audio_sample_rate)===null||w===void 0?void 0:w.toString()),r.includes("AudioChannelConfiguration")||R.appendChild(u(this,te,"m",Ce).call(this,e,"AudioChannelConfiguration",{schemeIdUri:"urn:mpeg:dash:23003:3:audio_channel_configuration:2011",value:((T=o.audio_channels)===null||T===void 0?void 0:T.toString())||"2"})),i.appendChild(R),yield u(this,te,"m",Ng).call(this,e,R,o,(I=s(C))===null||I===void 0?void 0:I.toString(),f)})},"_FormatUtils_generateRepresentationAudio"),yT=n(function(e,i,o,s,r,c){return x(this,void 0,void 0,function*(){let p=o.template_url,f=[],m=o.storyboard_count>10?10:o.storyboard_count;for(let I=0;I<m;I++){let C=c.session.http.fetch_function(new URL(p.replace("$M",I.toString())),{method:"HEAD",headers:wn});f.push(C)}let _=yield Promise.all(f),b=[];for(let I of _){b.push(parseInt(I.headers.get("Content-Length")||"0",10));let C=I.headers.get("Content-Type");C&&C.length>0&&i.getAttribute("mimeType")!==C&&i.setAttribute("mimeType",C)}let w=Math.ceil(Math.max(...b)/(o.rows*o.columns)*8),T=u(this,te,"m",Ce).call(this,e,"Representation",{id:`thumbnails_${o.thumbnail_width}x${o.thumbnail_height}`,bandwidth:w.toString(),width:(o.thumbnail_width*o.columns).toString(),height:(o.thumbnail_height*o.rows).toString()},[u(this,te,"m",Ce).call(this,e,"EssentialProperty",{schemeIdUri:"http://dashif.org/thumbnail_tile",value:`${o.columns}x${o.rows}`}),u(this,te,"m",Ce).call(this,e,"SegmentTemplate",{media:r(new URL(p.replace("$M","$Number$"))).toString(),duration:(s/o.storyboard_count).toString(),startNumber:"0"})]);i.appendChild(T)})},"_FormatUtils_generateRepresentationImage"),Ng=n(function(e,i,o,s,r){return x(this,void 0,void 0,function*(){if(o.is_type_otf){if(!r)throw new g("Unable to get segment durations for this OTF stream without an Actions instance",{format:o});let{resolved_url:c,segment_durations:p}=yield u(this,te,"m",wT).call(this,s,r),f=[];for(let m of p){let _;typeof m.repeat_count>"u"?_={d:m.duration.toString()}:_={d:m.duration.toString(),r:m.repeat_count.toString()},f.push(u(this,te,"m",Ce).call(this,e,"S",_))}i.appendChild(u(this,te,"m",Ce).call(this,e,"SegmentTemplate",{startNumber:"1",timescale:"1000",initialization:`${c}&sq=0`,media:`${c}&sq=$Number$`},[u(this,te,"m",Ce).call(this,e,"SegmentTimeline",{},f)]))}else{if(!o.index_range||!o.init_range)throw new g("Index and init ranges not available",{format:o});i.appendChild(u(this,te,"m",Ce).call(this,e,"BaseURL",{},[e.createTextNode(s)])),i.appendChild(u(this,te,"m",Ce).call(this,e,"SegmentBase",{indexRange:`${o.index_range.start}-${o.index_range.end}`},[u(this,te,"m",Ce).call(this,e,"Initialization",{range:`${o.init_range.start}-${o.init_range.end}`})]))}})},"_FormatUtils_generateSegmentInformation"),wT=n(function(e,i){var o;return x(this,void 0,void 0,function*(){let s=yield i.session.http.fetch_function(`${e}&rn=0&sq=0`,{method:"GET",headers:wn,redirect:"follow"}),r=s.url.replace("&rn=0","").replace("&sq=0",""),c=yield s.text(),p=(o=$e(c,"Segment-Durations-Ms:",`\r
`))===null||o===void 0?void 0:o.split(",");if(!p)throw new g("Failed to extract the segment durations from this OTF stream",{url:e});let f=[];for(let m of p){let _=m.trim();if(_.length===0)continue;let b,w=$e(_,"(r=",")");w&&(b=parseInt(w)),f.push({duration:parseInt(_),repeat_count:b})}return{resolved_url:r,segment_durations:f}})},"_FormatUtils_getOTFSegmentInformation");var Jf=Hf;var hs,wi,ms,Gf,Hv=class{constructor(e,i,o){var s,r;hs.set(this,void 0),wi.set(this,void 0),ms.set(this,void 0),Gf.set(this,void 0),S(this,wi,i,"f");let c=d.parseResponse(e[0].data),p=!((s=e==null?void 0:e[1])===null||s===void 0)&&s.data?d.parseResponse(e[1].data):void 0;if(S(this,hs,[c,p],"f"),S(this,ms,o,"f"),((r=c.playability_status)===null||r===void 0?void 0:r.status)==="ERROR")throw new g("This video is unavailable",c.playability_status);this.streaming_data=c.streaming_data,this.playability_status=c.playability_status,S(this,Gf,c.playback_tracking,"f")}toDash(e,i,o={include_thumbnails:!1}){var s;return x(this,void 0,void 0,function*(){let r;return o.include_thumbnails&&((s=u(this,hs,"f")[0].storyboards)===null||s===void 0?void 0:s.is(Sn))&&(r=u(this,hs,"f")[0].storyboards),Jf.toDash(this.streaming_data,e,i,u(this,ms,"f"),u(this,wi,"f").session.player,u(this,wi,"f"),r)})}chooseFormat(e){return Jf.chooseFormat(e,this.streaming_data)}download(e={}){return x(this,void 0,void 0,function*(){return Jf.download(e,u(this,wi,"f"),this.playability_status,this.streaming_data,u(this,wi,"f").session.player,this.cpn)})}addToWatchHistory(e=Q.WEB.NAME,i=Q.WEB.VERSION,o="https://www."){return x(this,void 0,void 0,function*(){if(!u(this,Gf,"f"))throw new g("Playback tracking not available");let s={cpn:u(this,ms,"f"),fmt:251,rtn:0,rt:0},r=u(this,Gf,"f").videostats_playback_url.replace("https://s.",o);return yield u(this,wi,"f").stats(r,{client_name:e,client_version:i},s)})}get actions(){return u(this,wi,"f")}get cpn(){return u(this,ms,"f")}get page(){return u(this,hs,"f")}};n(Hv,"MediaInfo");hs=new WeakMap,wi=new WeakMap,ms=new WeakMap,Gf=new WeakMap;var Xi=Hv;var Qi,_s=class extends Xi{constructor(e,i,o){var s,r,c,p,f,m,_,b,w,T,I,C,P,R,V,A,K,Z,ue,ve,Ne,X,z,ie,ee,Ve,lt,ct,dt,Xe,tt,it,ge,Le,Jt,Gt,zt,Kt,wt,xn,bn,yr;super(e,i,o),Qi.set(this,void 0);let[me,di]=this.page;if(me.microformat&&!(!((s=me.microformat)===null||s===void 0)&&s.is(Vt,Zt)))throw new g("Invalid microformat",me.microformat);if(this.basic_info=Object.assign(Object.assign(Object.assign({},me.video_details),{embed:!((r=me.microformat)===null||r===void 0)&&r.is(Vt)?(c=me.microformat)===null||c===void 0?void 0:c.embed:null,channel:!((p=me.microformat)===null||p===void 0)&&p.is(Vt)?(f=me.microformat)===null||f===void 0?void 0:f.channel:null,is_unlisted:(m=me.microformat)===null||m===void 0?void 0:m.is_unlisted,is_family_safe:(_=me.microformat)===null||_===void 0?void 0:_.is_family_safe,category:!((b=me.microformat)===null||b===void 0)&&b.is(Vt)?(w=me.microformat)===null||w===void 0?void 0:w.category:null,has_ypc_metadata:!((T=me.microformat)===null||T===void 0)&&T.is(Vt)?(I=me.microformat)===null||I===void 0?void 0:I.has_ypc_metadata:null,start_timestamp:!((C=me.microformat)===null||C===void 0)&&C.is(Vt)?me.microformat.start_timestamp:null,view_count:((P=me.microformat)===null||P===void 0?void 0:P.is(Vt))&&isNaN((R=me.video_details)===null||R===void 0?void 0:R.view_count)?me.microformat.view_count:(V=me.video_details)===null||V===void 0?void 0:V.view_count}),{like_count:void 0,is_liked:void 0,is_disliked:void 0}),this.annotations=me.annotations,this.storyboards=me.storyboards,this.endscreen=me.endscreen,this.captions=me.captions,this.cards=me.cards,this.streaming_data){let Fe=this.streaming_data.adaptive_formats.find($t=>{var He;return(He=$t.audio_track)===null||He===void 0?void 0:He.audio_is_default});if(Fe)this.streaming_data.formats.forEach($t=>$t.language=Fe.language);else if(typeof((A=this.captions)===null||A===void 0?void 0:A.default_audio_track_index)<"u"&&((K=this.captions)===null||K===void 0?void 0:K.audio_tracks)&&this.captions.caption_tracks){let $t=this.captions.audio_tracks[this.captions.default_audio_track_index],He=$t.default_caption_track_index,V1=$t.caption_track_indices[He||0],yx=this.captions.caption_tracks[V1].language_code;this.streaming_data.adaptive_formats.forEach(_h=>{_h.has_audio&&(_h.language=yx)}),this.streaming_data.formats.forEach(_h=>_h.language=yx)}}let ot=(Z=di==null?void 0:di.contents)===null||Z===void 0?void 0:Z.item().as(qn),yn=ot==null?void 0:ot.results,mh=ot==null?void 0:ot.secondary_results;if(yn&&mh){if(((ue=me.microformat)===null||ue===void 0?void 0:ue.is(Vt))&&((ve=me.microformat)===null||ve===void 0?void 0:ve.category)==="Gaming"){let He=(z=(X=(Ne=yn.firstOfType(xf))===null||Ne===void 0?void 0:Ne.metadata)===null||X===void 0?void 0:X.rows)===null||z===void 0?void 0:z.firstOfType(cp);He!=null&&He.is(cp)&&(this.game_info={title:(ee=(ie=He==null?void 0:He.contents)===null||ie===void 0?void 0:ie.firstOfType(up))===null||ee===void 0?void 0:ee.title,release_year:(lt=(Ve=He==null?void 0:He.contents)===null||Ve===void 0?void 0:Ve.firstOfType(up))===null||lt===void 0?void 0:lt.subtitle})}this.primary_info=yn.firstOfType(av),this.secondary_info=yn.firstOfType(xf),this.merchandise=yn.firstOfType(p_),this.related_chip_cloud=(ct=mh.firstOfType(J_))===null||ct===void 0?void 0:ct.content.as(ht),ot!=null&&ot.playlist&&(this.playlist=ot.playlist),this.watch_next_feed=((dt=mh.firstOfType(ye))===null||dt===void 0?void 0:dt.contents)||mh,this.watch_next_feed&&Array.isArray(this.watch_next_feed)&&((Xe=this.watch_next_feed.at(-1))===null||Xe===void 0?void 0:Xe.is(De))&&S(this,Qi,(tt=this.watch_next_feed.pop())===null||tt===void 0?void 0:tt.as(De),"f"),this.player_overlays=(it=di==null?void 0:di.player_overlays)===null||it===void 0?void 0:it.item().as(Ui),ot!=null&&ot.autoplay&&(this.autoplay=ot.autoplay);let Fe=(Le=(ge=this.primary_info)===null||ge===void 0?void 0:ge.menu)===null||Le===void 0?void 0:Le.top_level_buttons.firstOfType(So);((Jt=Fe==null?void 0:Fe.like_button)===null||Jt===void 0?void 0:Jt.is(Ue))&&((Gt=Fe==null?void 0:Fe.dislike_button)===null||Gt===void 0?void 0:Gt.is(Ue))&&(this.basic_info.like_count=(zt=Fe==null?void 0:Fe.like_button)===null||zt===void 0?void 0:zt.like_count,this.basic_info.is_liked=(Kt=Fe==null?void 0:Fe.like_button)===null||Kt===void 0?void 0:Kt.is_toggled,this.basic_info.is_disliked=(wt=Fe==null?void 0:Fe.dislike_button)===null||wt===void 0?void 0:wt.is_toggled);let $t=(xn=yn.get({target_id:"comments-entry-point"}))===null||xn===void 0?void 0:xn.as(ye);this.comments_entry_point_header=(bn=$t==null?void 0:$t.contents)===null||bn===void 0?void 0:bn.firstOfType(pm),this.livechat=(yr=di==null?void 0:di.contents_memo)===null||yr===void 0?void 0:yr.getType(Qm).first()}}selectFilter(e){var i,o,s,r;return x(this,void 0,void 0,function*(){if(!this.related_chip_cloud)throw new g("Chip cloud not found, cannot apply filter");let c;if(typeof e=="string"){let m=(o=(i=this.related_chip_cloud)===null||i===void 0?void 0:i.chips)===null||o===void 0?void 0:o.get({text:e});if(!m)throw new g("Invalid filter",{available_filters:this.filters});c=m}else if(e!=null&&e.is(be))c=e;else throw new g("Invalid cloud chip",e);if(c.is_selected)return this;let p=yield(s=c.endpoint)===null||s===void 0?void 0:s.call(this.actions,{parse:!0}),f=(r=p==null?void 0:p.on_response_received_endpoints)===null||r===void 0?void 0:r.get({target_id:"watch-next-feed"});return this.watch_next_feed=f==null?void 0:f.contents,this})}addToWatchHistory(){let e=Object.create(null,{addToWatchHistory:{get:()=>super.addToWatchHistory}});return x(this,void 0,void 0,function*(){return e.addToWatchHistory.call(this)})}getWatchNextContinuation(){var e,i,o,s,r;return x(this,void 0,void 0,function*(){if(!u(this,Qi,"f"))throw new g("Watch next feed continuation not found");let c=yield(e=u(this,Qi,"f"))===null||e===void 0?void 0:e.endpoint.call(this.actions,{parse:!0}),p=(i=c==null?void 0:c.on_response_received_endpoints)===null||i===void 0?void 0:i.get({type:"appendContinuationItemsAction"});if(!p)throw new g("AppendContinuationItemsAction not found");return this.watch_next_feed=p==null?void 0:p.contents,!((s=(o=this.watch_next_feed)===null||o===void 0?void 0:o.at(-1))===null||s===void 0)&&s.is(De)?S(this,Qi,(r=this.watch_next_feed.pop())===null||r===void 0?void 0:r.as(De),"f"):S(this,Qi,void 0,"f"),this})}like(){var e,i;return x(this,void 0,void 0,function*(){let o=(i=(e=this.primary_info)===null||e===void 0?void 0:e.menu)===null||i===void 0?void 0:i.top_level_buttons.firstOfType(So),s=o==null?void 0:o.like_button;if(!s)throw new g("Like button not found",{video_id:this.basic_info.id});if(!s.is(Ue))throw new g("Like button is not a toggle button. This action is likely disabled for this video.",{video_id:this.basic_info.id});if(s.is_toggled)throw new g("This video is already liked",{video_id:this.basic_info.id});return yield s.endpoint.call(this.actions)})}dislike(){var e,i;return x(this,void 0,void 0,function*(){let o=(i=(e=this.primary_info)===null||e===void 0?void 0:e.menu)===null||i===void 0?void 0:i.top_level_buttons.firstOfType(So),s=o==null?void 0:o.dislike_button;if(!s)throw new g("Dislike button not found",{video_id:this.basic_info.id});if(!s.is(Ue))throw new g("Dislike button is not a toggle button. This action is likely disabled for this video.",{video_id:this.basic_info.id});if(s.is_toggled)throw new g("This video is already disliked",{video_id:this.basic_info.id});return yield s.endpoint.call(this.actions)})}removeRating(){var e,i;return x(this,void 0,void 0,function*(){let o,s=(i=(e=this.primary_info)===null||e===void 0?void 0:e.menu)===null||i===void 0?void 0:i.top_level_buttons.firstOfType(So),r=s==null?void 0:s.like_button,c=s==null?void 0:s.dislike_button;if(!(r!=null&&r.is(Ue))||!(c!=null&&c.is(Ue)))throw new g("Like/Dislike button is not a toggle button. This action is likely disabled for this video.",{video_id:this.basic_info.id});if(r!=null&&r.is_toggled?o=r:c!=null&&c.is_toggled&&(o=c),!o)throw new g("This video is not liked/disliked",{video_id:this.basic_info.id});return yield o.toggled_endpoint.call(this.actions)})}getLiveChat(){if(!this.livechat)throw new g("Live Chat is not available",{video_id:this.basic_info.id});return new Bv(this)}getTrailerInfo(){var e,i;if(this.has_trailer){let o=(i=(e=this.playability_status.error_screen)===null||e===void 0?void 0:e.as(Md).trailer)===null||i===void 0?void 0:i.player_response;if(o)return new _s([{data:o}],this.actions,this.cpn)}return null}get filters(){var e,i;return((i=(e=this.related_chip_cloud)===null||e===void 0?void 0:e.chips)===null||i===void 0?void 0:i.map(o=>{var s;return(s=o.text)===null||s===void 0?void 0:s.toString()}))||[]}get wn_has_continuation(){return!!u(this,Qi,"f")}get autoplay_video_endpoint(){var e,i,o;return((o=(i=(e=this.autoplay)===null||e===void 0?void 0:e.sets)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.autoplay_video)||null}get has_trailer(){var e;return!!(!((e=this.playability_status.error_screen)===null||e===void 0)&&e.is(Md))}get music_tracks(){var e,i,o,s,r,c;let p=(i=(e=this.page[1])===null||e===void 0?void 0:e.engagement_panels)===null||i===void 0?void 0:i.filter(f=>{var m;return(m=f.content)===null||m===void 0?void 0:m.is(vo)});if(p!==void 0&&p.length>0){let f=(r=(s=(o=p[0].content)===null||o===void 0?void 0:o.as(vo))===null||s===void 0?void 0:s.items)===null||r===void 0?void 0:r.filterType(Fn);if(f!==void 0&&f.length>0)return(c=f[0].carousel_lockups)===null||c===void 0?void 0:c.map(m=>{var _,b,w,T,I,C,P,R,V,A,K,Z,ue,ve,Ne,X,z,ie,ee;let Ve,lt,ct,dt,Xe,tt;Ve=(b=(_=m.video_lockup)===null||_===void 0?void 0:_.title)===null||b===void 0?void 0:b.toString(),Xe=(w=m.video_lockup)===null||w===void 0?void 0:w.endpoint.payload.videoId;for(let it=0;it<m.info_rows.length;it++){let ge=m.info_rows[it];if(ge.info_row_expand_status_key===void 0)if(Ve===void 0){if(Ve=((T=ge.default_metadata)===null||T===void 0?void 0:T.toString())||((I=ge.expanded_metadata)===null||I===void 0?void 0:I.toString()),Xe===void 0){let Le=((C=ge.default_metadata)===null||C===void 0?void 0:C.endpoint)||((P=ge.expanded_metadata)===null||P===void 0?void 0:P.endpoint);Xe=(R=Le==null?void 0:Le.payload)===null||R===void 0?void 0:R.videoId}}else ct=((V=ge.default_metadata)===null||V===void 0?void 0:V.toString())||((A=ge.expanded_metadata)===null||A===void 0?void 0:A.toString());else{if(((K=ge.info_row_expand_status_key)===null||K===void 0?void 0:K.indexOf("structured-description-music-section-artists-row-state-id"))!==-1&&(lt=((Z=ge.default_metadata)===null||Z===void 0?void 0:Z.toString())||((ue=ge.expanded_metadata)===null||ue===void 0?void 0:ue.toString()),tt===void 0)){let Le=((ve=ge.default_metadata)===null||ve===void 0?void 0:ve.endpoint)||((Ne=ge.expanded_metadata)===null||Ne===void 0?void 0:Ne.endpoint);tt=(X=Le==null?void 0:Le.payload)===null||X===void 0?void 0:X.browseId}((z=ge.info_row_expand_status_key)===null||z===void 0?void 0:z.indexOf("structured-description-music-section-licenses-row-state-id"))!==-1&&(dt=((ie=ge.default_metadata)===null||ie===void 0?void 0:ie.toString())||((ee=ge.expanded_metadata)===null||ee===void 0?void 0:ee.toString()))}}return{song:Ve,artist:lt,album:ct,license:dt,videoId:Xe,channelId:tt}})}return[]}};n(_s,"VideoInfo");Qi=new WeakMap;var zf=_s;var Og={};U(Og,{Album:()=>Gv,Artist:()=>$v,Explore:()=>Xv,HomeFeed:()=>Qv,Library:()=>Zv,LibraryContinuation:()=>Jo,Playlist:()=>Ts,Recap:()=>t0,Search:()=>i0,TrackInfo:()=>Zf});var Ti,Jv=class{constructor(e){var i,o,s;if(Ti.set(this,void 0),S(this,Ti,d.parseResponse(e.data),"f"),this.header=(i=u(this,Ti,"f").header)===null||i===void 0?void 0:i.item().as(wo),this.url=((o=u(this,Ti,"f").microformat)===null||o===void 0?void 0:o.as(Zt).url_canonical)||null,!u(this,Ti,"f").contents_memo)throw new Error("No contents found in the response");this.contents=(s=u(this,Ti,"f").contents_memo.getType(Ie))===null||s===void 0?void 0:s.first().contents,this.sections=u(this,Ti,"f").contents_memo.getType(Re)||[]}get page(){return u(this,Ti,"f")}};n(Jv,"Album");Ti=new WeakMap;var Gv=Jv;var vs,zv,Kv=class{constructor(e,i){var o,s,r;vs.set(this,void 0),zv.set(this,void 0),S(this,vs,d.parseResponse(e.data),"f"),S(this,zv,i,"f"),this.header=(o=this.page.header)===null||o===void 0?void 0:o.item().as(w_,C_,ji);let c=((s=u(this,vs,"f").contents_memo)===null||s===void 0?void 0:s.getType(Ie))||[],p=((r=u(this,vs,"f").contents_memo)===null||r===void 0?void 0:r.getType(Re))||[];this.sections=[...c,...p]}getAllSongs(){var e,i;return x(this,void 0,void 0,function*(){let o=this.sections.filter(p=>p.type==="MusicShelf");if(!o.length)throw new g("Could not find any node of type MusicShelf.");let s=o.find(p=>p.title.toString()==="Songs");if(!s)throw new g("Could not find target shelf (Songs).");if(!s.endpoint)throw new g("Target shelf (Songs) did not have an endpoint.");return(i=(e=(yield s.endpoint.call(u(this,zv,"f"),{client:"YTMUSIC",parse:!0})).contents_memo)===null||e===void 0?void 0:e.getType(To))===null||i===void 0?void 0:i.first()})}get page(){return u(this,vs,"f")}};n(Kv,"Artist");vs=new WeakMap,zv=new WeakMap;var $v=Kv;var Kf,qv=class{constructor(e){var i,o,s;Kf.set(this,void 0),S(this,Kf,d.parseResponse(e.data),"f");let r=(i=u(this,Kf,"f").contents)===null||i===void 0?void 0:i.item().as(oi).tabs.get({selected:!0});if(!r)throw new g("Could not find target tab.");let c=(o=r.content)===null||o===void 0?void 0:o.as(oe);if(!c)throw new g("Target tab did not have any content.");this.top_buttons=((s=c.contents.firstOfType(go))===null||s===void 0?void 0:s.items.as(Wn))||[],this.sections=c.contents.filterType(Re)}get page(){return u(this,Kf,"f")}};n(qv,"Explore");Kf=new WeakMap;var Xv=qv;var Zi,Uo,Wo,Ho=class{constructor(e,i){var o,s,r,c,p,f;Zi.set(this,void 0),Uo.set(this,void 0),Wo.set(this,void 0),S(this,Uo,i,"f"),S(this,Zi,d.parseResponse(e.data),"f");let m=(o=u(this,Zi,"f").contents)===null||o===void 0?void 0:o.item().as(oi).tabs.get({selected:!0});if(!m)throw new g("Could not find Home tab.");if(m.key("content").isNull()){if(!u(this,Zi,"f").continuation_contents)throw new g("Continuation did not have any content.");S(this,Wo,u(this,Zi,"f").continuation_contents.as(mt).continuation,"f"),this.sections=(s=u(this,Zi,"f").continuation_contents.as(mt).contents)===null||s===void 0?void 0:s.as(Re);return}this.header=(c=(r=m.content)===null||r===void 0?void 0:r.as(oe).header)===null||c===void 0?void 0:c.as(ht),S(this,Wo,(p=m.content)===null||p===void 0?void 0:p.as(oe).continuation,"f"),this.sections=(f=m.content)===null||f===void 0?void 0:f.as(oe).contents.as(Re,k_)}getContinuation(){return x(this,void 0,void 0,function*(){if(!u(this,Wo,"f"))throw new g("Continuation not found.");let e=yield u(this,Uo,"f").execute("/browse",{client:"YTMUSIC",continuation:u(this,Wo,"f")});return new Ho(e,u(this,Uo,"f"))})}applyFilter(e){var i,o;return x(this,void 0,void 0,function*(){let s;if(typeof e=="string"){if(s=(o=(i=this.header)===null||i===void 0?void 0:i.chips)===null||o===void 0?void 0:o.as(be).get({text:e}),!s)throw new g("Could not find filter with given name.",{available_filters:this.filters})}else e!=null&&e.is(be)&&(s=e);if(!s)throw new g("Invalid filter",{available_filters:this.filters});if(s!=null&&s.is_selected)return this;if(!s.endpoint)throw new g("Selected filter does not have an endpoint.");let r=yield s.endpoint.call(u(this,Uo,"f"),{client:"YTMUSIC"});return new Ho(r,u(this,Uo,"f"))})}get filters(){var e,i;return((i=(e=this.header)===null||e===void 0?void 0:e.chips)===null||i===void 0?void 0:i.as(be).map(o=>o.text))||[]}get has_continuation(){return!!u(this,Wo,"f")}get page(){return u(this,Zi,"f")}};n(Ho,"HomeFeed");Zi=new WeakMap,Uo=new WeakMap,Wo=new WeakMap;var Qv=Ho;var ri,eo,gs,to,$f,xs,bs=class{constructor(e,i){var o,s,r,c,p;ri.set(this,void 0),eo.set(this,void 0),gs.set(this,void 0),S(this,ri,d.parseResponse(e.data),"f"),S(this,eo,i,"f");let f=(o=u(this,ri,"f").contents_memo)===null||o===void 0?void 0:o.getType(oe).first();this.header=(s=f==null?void 0:f.header)===null||s===void 0?void 0:s.as(S_),this.contents=(r=f==null?void 0:f.contents)===null||r===void 0?void 0:r.as(go,Ie),S(this,gs,(p=(c=this.contents)===null||c===void 0?void 0:c.find(m=>m.continuation))===null||p===void 0?void 0:p.continuation,"f")}applySort(e){var i,o,s,r,c,p,f,m,_,b;return x(this,void 0,void 0,function*(){let w;if(typeof e=="string"){let P=(i=u(this,ri,"f").contents_memo)===null||i===void 0?void 0:i.getType(yd).first(),R=(o=P==null?void 0:P.menu)===null||o===void 0?void 0:o.options.filter(V=>V instanceof Rt);if(w=R==null?void 0:R.find(V=>V.title===e),!w)throw new g(`Sort option "${e}" not found`,{available_filters:R.map(V=>V.title)})}else e instanceof Rt&&(w=e);if(!w)throw new g("Invalid sort option");if(w.selected)return this;let T=(p=(c=(r=(s=w.endpoint)===null||s===void 0?void 0:s.payload)===null||r===void 0?void 0:r.commands)===null||c===void 0?void 0:c.find(P=>P.browseSectionListReloadEndpoint))===null||p===void 0?void 0:p.browseSectionListReloadEndpoint;if(!T)throw new g("Failed to find sort option command");let I=yield u(this,eo,"f").execute("/browse",{client:"YTMUSIC",continuation:T.continuation.reloadContinuationData.continuation,parse:!0}),C=(m=(f=u(this,ri,"f").contents_memo)===null||f===void 0?void 0:f.getType(Rt))===null||m===void 0?void 0:m.find(P=>P.selected);return C&&(C.selected=!1),w.selected=!0,this.contents=(b=(_=I.continuation_contents)===null||_===void 0?void 0:_.as(mt).contents)===null||b===void 0?void 0:b.as(go,Ie),this})}applyFilter(e){var i,o,s,r;return x(this,void 0,void 0,function*(){let c,p=(i=u(this,ri,"f").contents_memo)===null||i===void 0?void 0:i.getType(ht).first();if(typeof e=="string"){if(c=p==null?void 0:p.chips.get({text:e}),!c)throw new g(`Filter "${e}" not found`,{available_filters:this.filters})}else e instanceof be&&(c=e);if(!c)throw new g("Invalid filter",e);let m=yield new v((r=(s=(o=c.endpoint)===null||o===void 0?void 0:o.payload)===null||s===void 0?void 0:s.commands)===null||r===void 0?void 0:r[0]).call(u(this,eo,"f"),{client:"YTMUSIC"});return new bs(m,u(this,eo,"f"))})}getContinuation(){return x(this,void 0,void 0,function*(){if(!u(this,gs,"f"))throw new g("No continuation available");let e=yield u(this,eo,"f").execute("/browse",{client:"YTMUSIC",continuation:u(this,gs,"f")});return new Jo(e,u(this,eo,"f"))})}get has_continuation(){return!!u(this,gs,"f")}get sort_options(){var e,i;let o=(e=u(this,ri,"f").contents_memo)===null||e===void 0?void 0:e.getType(yd).first();return((i=o==null?void 0:o.menu)===null||i===void 0?void 0:i.options.filter(r=>r instanceof Rt)).map(r=>r.title)}get filters(){var e,i;return((i=(e=u(this,ri,"f").contents_memo)===null||e===void 0?void 0:e.getType(ht))===null||i===void 0?void 0:i.first().chips.map(o=>o.text))||[]}get page(){return u(this,ri,"f")}};n(bs,"Library");ri=new WeakMap,eo=new WeakMap,gs=new WeakMap;var Jo=class{constructor(e,i){var o,s;if(to.set(this,void 0),$f.set(this,void 0),xs.set(this,void 0),S(this,to,d.parseResponse(e.data),"f"),S(this,$f,i,"f"),!u(this,to,"f").continuation_contents)throw new g("No continuation contents found");this.contents=u(this,to,"f").continuation_contents.as(gi,Po),S(this,xs,!((o=u(this,to,"f").continuation_contents)===null||o===void 0)&&o.key("continuation").isNull()?null:(s=u(this,to,"f").continuation_contents)===null||s===void 0?void 0:s.key("continuation").string(),"f")}getContinuation(){return x(this,void 0,void 0,function*(){if(!u(this,xs,"f"))throw new g("No continuation available");let e=yield u(this,$f,"f").execute("/browse",{client:"YTMUSIC",continuation:u(this,xs,"f")});return new Jo(e,u(this,$f,"f"))})}get has_continuation(){return!!u(this,xs,"f")}get page(){return u(this,to,"f")}};n(Jo,"LibraryContinuation");to=new WeakMap,$f=new WeakMap,xs=new WeakMap;var Zv=bs;var Vg,_t,zo,Go,ys,qf,ST,ws=class{constructor(e,i){var o,s,r,c,p,f,m;if(Vg.add(this),_t.set(this,void 0),zo.set(this,void 0),Go.set(this,void 0),ys.set(this,void 0),qf.set(this,void 0),S(this,zo,i,"f"),S(this,_t,d.parseResponse(e.data),"f"),S(this,ys,null,"f"),S(this,qf,null,"f"),u(this,_t,"f").continuation_contents){let _=(o=u(this,_t,"f").continuation_contents)===null||o===void 0?void 0:o.as(Eo);this.items=_.contents,S(this,Go,_.continuation,"f")}else((s=u(this,_t,"f").header)===null||s===void 0?void 0:s.item().type)==="MusicEditablePlaylistDetailHeader"?this.header=(c=(r=u(this,_t,"f").header)===null||r===void 0?void 0:r.item().as(y_).header)===null||c===void 0?void 0:c.as(wo):this.header=(p=u(this,_t,"f").header)===null||p===void 0?void 0:p.item().as(wo),this.items=((f=u(this,_t,"f").contents_memo)===null||f===void 0?void 0:f.getType(To).first().contents)||null,S(this,Go,((m=u(this,_t,"f").contents_memo)===null||m===void 0?void 0:m.getType(To).first().continuation)||null,"f")}getContinuation(){return x(this,void 0,void 0,function*(){if(!u(this,Go,"f"))throw new g("Continuation not found.");let e=yield u(this,zo,"f").execute("/browse",{client:"YTMUSIC",continuation:u(this,Go,"f")});return new ws(e,u(this,zo,"f"))})}getRelated(){var e,i,o,s,r;return x(this,void 0,void 0,function*(){let c=(i=(e=u(this,_t,"f").contents_memo)===null||e===void 0?void 0:e.getType(oe))===null||i===void 0?void 0:i[0].continuation;for(;c;){let f=(o=(yield u(this,zo,"f").execute("/browse",{client:"YTMUSIC",continuation:c,parse:!0})).continuation_contents)===null||o===void 0?void 0:o.as(mt),m=(s=f==null?void 0:f.contents)===null||s===void 0?void 0:s.as(Re,Ie),_=(r=m==null?void 0:m.matchCondition(b=>b.is(Re)))===null||r===void 0?void 0:r.as(Re);if(_)return _;c=f==null?void 0:f.continuation}throw new g("Target section not found.")})}getSuggestions(e=!0){return x(this,void 0,void 0,function*(){let s=yield e||!u(this,ys,"f")?u(this,Vg,"m",ST).call(this):Promise.resolve(null);return s&&(S(this,ys,s.items,"f"),S(this,qf,s.continuation,"f")),(s==null?void 0:s.items)||u(this,ys,"f")})}get page(){return u(this,_t,"f")}get has_continuation(){return!!u(this,Go,"f")}};n(ws,"Playlist");_t=new WeakMap,zo=new WeakMap,Go=new WeakMap,ys=new WeakMap,qf=new WeakMap,Vg=new WeakSet,ST=n(function(){var e,i,o,s,r;return x(this,void 0,void 0,function*(){let c=u(this,qf,"f")||((i=(e=u(this,_t,"f").contents_memo)===null||e===void 0?void 0:e.get("SectionList"))===null||i===void 0?void 0:i[0].as(oe).continuation);if(c){let f=(o=(yield u(this,zo,"f").execute("/browse",{client:"YTMUSIC",continuation:c,parse:!0})).continuation_contents)===null||o===void 0?void 0:o.as(mt),m=(s=f==null?void 0:f.contents)===null||s===void 0?void 0:s.as(Re,Ie),_=(r=m==null?void 0:m.matchCondition(b=>b.is(Ie)))===null||r===void 0?void 0:r.as(Ie);return{items:(_==null?void 0:_.contents)||[],continuation:(_==null?void 0:_.continuation)||null}}return{items:[],continuation:null}})},"_Playlist_fetchSuggestions");var Ts=ws;var io,Xf,e0=class{constructor(e,i){var o,s,r,c,p,f,m;io.set(this,void 0),Xf.set(this,void 0),S(this,io,d.parseResponse(e.data),"f"),S(this,Xf,i,"f");let _=(o=u(this,io,"f").header)===null||o===void 0?void 0:o.item();this.header=_!=null&&_.is(ad)?(c=(r=(s=u(this,io,"f").header)===null||s===void 0?void 0:s.item().as(ad).element)===null||r===void 0?void 0:r.model)===null||c===void 0?void 0:c.as(wl):(p=u(this,io,"f").header)===null||p===void 0?void 0:p.item().as(ji);let b=(f=u(this,io,"f").contents)===null||f===void 0?void 0:f.item().as(oi).tabs.firstOfType(we);if(!b)throw new g("Target tab not found");this.sections=(m=b.content)===null||m===void 0?void 0:m.as(oe).contents.as(ye,Re,Je)}getPlaylist(){return x(this,void 0,void 0,function*(){if(!this.header)throw new g("Header not found");if(!this.header.is(wl))throw new g("Recap playlist not available, check back later.");let i=yield this.header.panels[0].text_on_tap_endpoint.call(u(this,Xf,"f"),{client:"YTMUSIC"});return new Ts(i,u(this,Xf,"f"))})}get page(){return u(this,io,"f")}};n(e0,"Recap");io=new WeakMap,Xf=new WeakMap;var t0=e0;var ai,Si,Ss,Qf,Is,Ko=class{constructor(e,i,o){var s,r,c;if(ai.set(this,void 0),Si.set(this,void 0),Ss.set(this,void 0),S(this,Si,i,"f"),S(this,ai,d.parseResponse(e.data),"f"),!u(this,ai,"f").contents||!u(this,ai,"f").contents_memo)throw new g("Response did not contain any contents.");let p=u(this,ai,"f").contents.item().as(ov).tabs.get({selected:!0});if(!p)throw new g("Could not find target tab.");let f=(s=p.content)===null||s===void 0?void 0:s.as(oe);if(!f)throw new g("Target tab did not have any content.");this.header=(r=f.header)===null||r===void 0?void 0:r.as(ht),this.contents=f.contents.as(Ie,v_,ye),o&&S(this,Ss,(c=this.contents.firstOfType(Ie))===null||c===void 0?void 0:c.continuation,"f")}getMore(e){return x(this,void 0,void 0,function*(){if(!e||!e.endpoint)throw new g("Cannot retrieve more items for this shelf because it does not have an endpoint.");let i=yield e.endpoint.call(u(this,Si,"f"),{client:"YTMUSIC"});if(!i)throw new g("Endpoint did not return any data");return new Ko(i,u(this,Si,"f"),!0)})}getContinuation(){return x(this,void 0,void 0,function*(){if(!u(this,Ss,"f"))throw new g("Continuation not found.");let e=yield u(this,Si,"f").execute("/search",{continuation:u(this,Ss,"f"),client:"YTMUSIC"});return new ks(u(this,Si,"f"),e)})}applyFilter(e){var i,o;return x(this,void 0,void 0,function*(){let s;if(typeof e=="string"){if(s=(o=(i=this.header)===null||i===void 0?void 0:i.chips)===null||o===void 0?void 0:o.as(be).get({text:e}),!s)throw new g("Could not find filter with given name.",{available_filters:this.filters})}else e!=null&&e.is(be)&&(s=e);if(!s)throw new g("Invalid filter",{available_filters:this.filters});if(s!=null&&s.is_selected)return this;if(!s.endpoint)throw new g("Selected filter does not have an endpoint.");let r=yield s.endpoint.call(u(this,Si,"f"),{client:"YTMUSIC"});return new Ko(r,u(this,Si,"f"),!0)})}get filters(){var e,i;return((i=(e=this.header)===null||e===void 0?void 0:e.chips)===null||i===void 0?void 0:i.as(be).map(o=>o.text))||[]}get has_continuation(){return!!u(this,Ss,"f")}get did_you_mean(){var e;return(e=u(this,ai,"f").contents_memo)===null||e===void 0?void 0:e.getType(ym).first()}get showing_results_for(){var e;return(e=u(this,ai,"f").contents_memo)===null||e===void 0?void 0:e.getType(ev).first()}get message(){var e;return(e=u(this,ai,"f").contents_memo)===null||e===void 0?void 0:e.getType(Je).first()}get songs(){var e;return(e=this.contents)===null||e===void 0?void 0:e.filterType(Ie).find(i=>i.title.toString()==="Songs")}get videos(){var e;return(e=this.contents)===null||e===void 0?void 0:e.filterType(Ie).find(i=>i.title.toString()==="Videos")}get albums(){var e;return(e=this.contents)===null||e===void 0?void 0:e.filterType(Ie).find(i=>i.title.toString()==="Albums")}get artists(){var e;return(e=this.contents)===null||e===void 0?void 0:e.filterType(Ie).find(i=>i.title.toString()==="Artists")}get playlists(){var e;return(e=this.contents)===null||e===void 0?void 0:e.filterType(Ie).find(i=>i.title.toString()==="Community playlists")}get results(){var e,i;return(i=(e=this.contents)===null||e===void 0?void 0:e.firstOfType(Ie))===null||i===void 0?void 0:i.contents}get sections(){var e;return(e=this.contents)===null||e===void 0?void 0:e.filterType(Ie)}get page(){return u(this,ai,"f")}};n(Ko,"Search");ai=new WeakMap,Si=new WeakMap,Ss=new WeakMap;var i0=Ko,ks=class{constructor(e,i){var o,s;Qf.set(this,void 0),Is.set(this,void 0),S(this,Qf,e,"f"),S(this,Is,d.parseResponse(i.data),"f"),this.header=(o=u(this,Is,"f").header)===null||o===void 0?void 0:o.item().as(ji),this.contents=(s=u(this,Is,"f").continuation_contents)===null||s===void 0?void 0:s.as(gi)}getContinuation(){var e;return x(this,void 0,void 0,function*(){if(!(!((e=this.contents)===null||e===void 0)&&e.continuation))throw new g("Continuation not found.");let i=yield u(this,Qf,"f").execute("/search",{continuation:this.contents.continuation,client:"YTMUSIC"});return new ks(u(this,Qf,"f"),i)})}get has_continuation(){var e;return!!(!((e=this.contents)===null||e===void 0)&&e.continuation)}get page(){return u(this,Is,"f")}};n(ks,"SearchContinuation");Qf=new WeakMap,Is=new WeakMap;var o0=class extends Xi{constructor(e,i,o){var s,r,c,p,f,m,_,b,w;super(e,i,o);let[T,I]=this.page;if(!(!((s=T.microformat)===null||s===void 0)&&s.is(Zt)))throw new g("Invalid microformat",T.microformat);if(this.basic_info=Object.assign(Object.assign({},T.video_details),{description:(r=T.microformat)===null||r===void 0?void 0:r.description,is_unlisted:(c=T.microformat)===null||c===void 0?void 0:c.is_unlisted,is_family_safe:(p=T.microformat)===null||p===void 0?void 0:p.is_family_safe,url_canonical:(f=T.microformat)===null||f===void 0?void 0:f.url_canonical,tags:(m=T.microformat)===null||m===void 0?void 0:m.tags}),this.storyboards=T.storyboards,this.endscreen=T.endscreen,I){let C=(b=(_=I.contents_memo)===null||_===void 0?void 0:_.getType(lv))===null||b===void 0?void 0:b[0];this.tabs=C==null?void 0:C.tabs.array().as(we),this.current_video_endpoint=I.current_video_endpoint,this.player_overlays=(w=I.player_overlays)===null||w===void 0?void 0:w.item().as(Ui)}}getTab(e){var i,o;return x(this,void 0,void 0,function*(){if(!this.tabs)throw new g("Could not find any tab");let s=this.tabs.get({title:e})||this.tabs.matchCondition(c=>{var p,f;return((f=(p=c.endpoint.payload.browseEndpointContextSupportedConfigs)===null||p===void 0?void 0:p.browseEndpointContextMusicConfig)===null||f===void 0?void 0:f.pageType)===e})||((i=this.tabs)===null||i===void 0?void 0:i[0]);if(!s)throw new g(`Tab "${e}" not found`,{available_tabs:this.available_tabs});if(s.content)return s.content;let r=yield s.endpoint.call(this.actions,{client:"YTMUSIC",parse:!0});if(((o=r.contents)===null||o===void 0?void 0:o.item().key("type").string())==="Message")return r.contents.item().as(Je);if(!r.contents)throw new g("Page contents was empty",r);return r.contents.item().as(oe).contents})}getUpNext(e=!0){var i,o;return x(this,void 0,void 0,function*(){let s=yield this.getTab("Up next");if(!s||!s.content)throw new g("Music queue was empty, the video id is probably invalid.",s);let r=s.content.as(ii);if(!r.playlist_id&&e){let c=r.contents.firstOfType(Di);if(!c)throw new g("Automix item not found");let p=yield(i=c.playlist_video)===null||i===void 0?void 0:i.endpoint.call(this.actions,{videoId:this.basic_info.id,client:"YTMUSIC",parse:!0});if(!p||!p.contents_memo)throw new g("Could not fetch automix");return(o=p.contents_memo.getType(ii))===null||o===void 0?void 0:o[0]}return r})}getRelated(){return x(this,void 0,void 0,function*(){return yield this.getTab("MUSIC_PAGE_TYPE_TRACK_RELATED")})}getLyrics(){return x(this,void 0,void 0,function*(){return(yield this.getTab("MUSIC_PAGE_TYPE_TRACK_LYRICS")).firstOfType(yo)})}addToWatchHistory(){let e=Object.create(null,{addToWatchHistory:{get:()=>super.addToWatchHistory}});return x(this,void 0,void 0,function*(){return e.addToWatchHistory.call(this,Q.YTMUSIC.NAME,Q.YTMUSIC.VERSION,"https://music.")})}get available_tabs(){return this.tabs?this.tabs.map(e=>e.title):[]}};n(o0,"TrackInfo");var Zf=o0;var Dg={};U(Dg,{Channel:()=>n0,HomeFeed:()=>s0,Search:()=>a0,VideoInfo:()=>l0});var Cs=class extends xe{constructor(e,i,o=!1){var s,r;super(e,i,o),this.header=(s=this.page.header)===null||s===void 0?void 0:s.item().as(kn),this.contents=this.memo.getType(ye).first()||((r=this.page.continuation_contents)===null||r===void 0?void 0:r.as(Io))}getContinuation(){var e;return x(this,void 0,void 0,function*(){let i=yield this.actions.execute("/browse",{continuation:(e=this.contents)===null||e===void 0?void 0:e.continuation,client:"YTKIDS"});return new Cs(this.actions,i)})}get has_continuation(){var e;return!!(!((e=this.contents)===null||e===void 0)&&e.continuation)}};n(Cs,"Channel");var n0=Cs;var Es=class extends xe{constructor(e,i,o=!1){var s,r;super(e,i,o),this.header=(s=this.page.header)===null||s===void 0?void 0:s.item().as(dv),this.contents=(r=this.page.contents)===null||r===void 0?void 0:r.item().as(pv)}selectCategoryTab(e){var i;return x(this,void 0,void 0,function*(){let o;if(typeof e=="string"?o=(i=this.header)===null||i===void 0?void 0:i.category_tabs.find(r=>r.title.toString()===e):e!=null&&e.is(Qn)&&(o=e),!o)throw new g(`Tab "${e}" not found`);let s=yield o.endpoint.call(this.actions,{client:"YTKIDS",parse:!0});return s.header=this.page.header,s.header_memo=this.page.header_memo,new Es(this.actions,s,!0)})}get categories(){var e;return((e=this.header)===null||e===void 0?void 0:e.category_tabs.map(i=>i.title.toString()))||[]}};n(Es,"HomeFeed");var s0=Es;var r0=class extends xe{constructor(e,i){super(e,i),this.estimated_results=this.page.estimated_results;let o=this.memo.getType(ye).first();if(!o)throw new g("No item section found in search response.");this.contents=o.contents}};n(r0,"Search");var a0=r0;var u0=class extends Xi{constructor(e,i,o){var s,r,c,p,f;super(e,i,o);let[m,_]=this.page;this.basic_info=m.video_details,this.captions=m.captions;let b=(s=_==null?void 0:_.contents)===null||s===void 0?void 0:s.item().as(qn),w=b==null?void 0:b.results,T=b==null?void 0:b.secondary_results;w&&T&&(this.slim_video_metadata=(c=(r=w.firstOfType(ye))===null||r===void 0?void 0:r.contents)===null||c===void 0?void 0:c.firstOfType(tv),this.watch_next_feed=((p=T.firstOfType(ye))===null||p===void 0?void 0:p.contents)||T,this.current_video_endpoint=_==null?void 0:_.current_video_endpoint,this.player_overlays=(f=_==null?void 0:_.player_overlays)===null||f===void 0?void 0:f.item().as(Ui))}addToWatchHistory(){let e=Object.create(null,{addToWatchHistory:{get:()=>super.addToWatchHistory}});return x(this,void 0,void 0,function*(){return e.addToWatchHistory.call(this)})}};n(u0,"VideoInfo");var l0=u0;var d=W;var vt,c0=class{constructor(e,i,o,s){var r,c,p,f,m,_,b,w,T,I,C,P,R,V,A,K,Z,ue,ve,Ne,X,z,ie,ee,Ve,lt,ct,dt,Xe,tt,it,ge,Le,Jt,Gt,zt,Kt;vt.set(this,void 0),S(this,vt,new l(e),"f"),this.id=s||((m=(f=(p=(c=(r=u(this,vt,"f"))===null||r===void 0?void 0:r.runs)===null||c===void 0?void 0:c[0])===null||p===void 0?void 0:p.endpoint)===null||f===void 0?void 0:f.payload)===null||m===void 0?void 0:m.browseId)||((w=(b=(_=u(this,vt,"f"))===null||_===void 0?void 0:_.endpoint)===null||b===void 0?void 0:b.payload)===null||w===void 0?void 0:w.browseId)||"N/A",this.name=((T=u(this,vt,"f"))===null||T===void 0?void 0:T.text)||"N/A",this.thumbnails=o?y.fromResponse(o):[],this.endpoint=((P=(C=(I=u(this,vt,"f"))===null||I===void 0?void 0:I.runs)===null||C===void 0?void 0:C[0])===null||P===void 0?void 0:P.endpoint)||((R=u(this,vt,"f"))===null||R===void 0?void 0:R.endpoint),this.badges=Array.isArray(i)?d.parseArray(i):pe([]),this.is_moderator=(V=this.badges)===null||V===void 0?void 0:V.some(wt=>wt.icon_type=="MODERATOR"),this.is_verified=(A=this.badges)===null||A===void 0?void 0:A.some(wt=>wt.style=="BADGE_STYLE_TYPE_VERIFIED"),this.is_verified_artist=(K=this.badges)===null||K===void 0?void 0:K.some(wt=>wt.style=="BADGE_STYLE_TYPE_VERIFIED_ARTIST"),this.url=((X=(Ne=(ve=(ue=(Z=u(this,vt,"f"))===null||Z===void 0?void 0:Z.runs)===null||ue===void 0?void 0:ue[0])===null||ve===void 0?void 0:ve.endpoint)===null||Ne===void 0?void 0:Ne.metadata)===null||X===void 0?void 0:X.api_url)==="/browse"&&`${_e.YT_BASE}${((lt=(Ve=(ee=(ie=(z=u(this,vt,"f"))===null||z===void 0?void 0:z.runs)===null||ie===void 0?void 0:ie[0])===null||ee===void 0?void 0:ee.endpoint)===null||Ve===void 0?void 0:Ve.payload)===null||lt===void 0?void 0:lt.canonicalBaseUrl)||`/u/${(it=(tt=(Xe=(dt=(ct=u(this,vt,"f"))===null||ct===void 0?void 0:ct.runs)===null||dt===void 0?void 0:dt[0])===null||Xe===void 0?void 0:Xe.endpoint)===null||tt===void 0?void 0:tt.payload)===null||it===void 0?void 0:it.browseId}`}`||`${_e.YT_BASE}${((Jt=(Le=(ge=u(this,vt,"f"))===null||ge===void 0?void 0:ge.endpoint)===null||Le===void 0?void 0:Le.payload)===null||Jt===void 0?void 0:Jt.canonicalBaseUrl)||`/u/${(Kt=(zt=(Gt=u(this,vt,"f"))===null||Gt===void 0?void 0:Gt.endpoint)===null||zt===void 0?void 0:zt.payload)===null||Kt===void 0?void 0:Kt.browseId}`}`}get best_thumbnail(){return this.thumbnails[0]}};n(c0,"Author");vt=new WeakMap;var F=c0;var IT={desktop:["Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.3 Safari/605.1.15","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36 Edg/109.0.1518.61","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.2 Safari/605.1.15","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36"],mobile:["Mozilla/5.0 (iPhone; CPU iPhone OS 16_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.1 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (Linux; Android 12; SM-G990U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 13; SM-G998B) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) FxiOS/108.1  Mobile/15E148 Safari/605.1.15","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 11_4_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15G77 ChannelId(73) NebulaSDK/1.8.100112 Nebula PSDType(1) AlipayDefined(nt:4G,ws:320|504|2.0) AliApp(AP/10.1.30.300) AlipayClient/10.1.30.300 Alipay Language/zh-Hans","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.2 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.1 Mobile/15E148 Safari/604.1","Mozilla/5.0 (Linux; Android 13; SM-N981U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 13; SM-A515F) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.2 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.0 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (Linux; Android 12; M2010J19SG) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (iPhone; CPU iPhone OS 15_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.5 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.1 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 15_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.1 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.1 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (Linux; Android 11; M2102J20SG) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.2 Mobile/15E148 Safari/604.1"]};var d0,p0,B=class{static load(e){S(B,d0,e,"f",p0)}static get shim(){if(!u(B,d0,"f",p0))throw new Error("Platform is not loaded");return u(B,d0,"f",p0)}};n(B,"Platform");d0=B;p0={value:void 0};var g=class extends Error{constructor(e,i){super(e),i&&(this.info=i),this.date=new Date,this.version=B.shim.info.version}};n(g,"InnertubeError");var pt=class extends g{};n(pt,"ParsingError");var $o=class extends g{};n($o,"MissingParamError");var ui=class extends g{};n(ui,"OAuthError");var gt=class extends Error{};n(gt,"PlayerError");var Ps=class extends Error{};n(Ps,"SessionError");var ns=class extends Error{};n(ns,"ChannelError");function vh(t,e){return Reflect.ownKeys(t).some(o=>{let s=e[o]instanceof l;return!s&&typeof e[o]=="object"?JSON.stringify(t[o])===JSON.stringify(e[o]):t[o]===(s?e[o].toString():e[o])})}n(vh,"deepCompare");function $e(t,e,i){let o=new RegExp(`${Lg(e)}(.*?)${Lg(i)}`,"s"),s=t.match(o);return s?s[1]:void 0}n($e,"getStringBetweenStrings");function Lg(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}n(Lg,"escapeStringRegexp");function qo(t){let e=IT[t],i=Math.floor(Math.random()*e.length);return e[i]}n(qo,"getRandomUserAgent");function Fg(t){return x(this,void 0,void 0,function*(){let e="https://www.youtube.com",i=Math.floor(new Date().getTime()/1e3),o=[i,t,e].join(" "),s=yield B.shim.sha1Hash(o);return["SAPISIDHASH",[i,s].join("_")].join(" ")})}n(Fg,"generateSidAuth");function It(t){let e=[],i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";for(let o=0;o<t;o++)e.push(i.charAt(Math.floor(Math.random()*i.length)));return e.join("")}n(It,"generateRandomString");function ze(t){let e=t.split(":").map(i=>parseInt(i.replace(/\D/g,"")));switch(e.length){case 1:return e[0];case 2:return e[0]*60+e[1];case 3:return e[0]*3600+e[1]*60+e[2];default:throw new Error("Invalid time string")}}n(ze,"timeToSeconds");function Sg(...t){let e=new Ni;for(let i of t)if(!!i)for(let o of i)e.set(...o);return e}n(Sg,"concatMemos");function re(t){for(let[e,i]of Object.entries(t))if(!i)throw new $o(`${e} is missing`)}n(re,"throwIfMissing");function aS(t,...e){for(let i of e)if(!Reflect.has(t,i)||t[i]===void 0)return!1;return!0}n(aS,"hasKeys");function Ag(t){return Ix(this,arguments,n(function*(){let i=t.getReader();try{for(;;){let{done:o,value:s}=yield ao(i.read());if(o)return yield ao(void 0);yield yield ao(s)}}finally{i.releaseLock()}},"streamToIterable_1"))}n(Ag,"streamToIterable");var uS=n((t,e)=>{let i=typeof t=="string"?new URL(t):t instanceof URL?t:new URL(t.url),o=e!=null&&e.headers?new Headers(e.headers):t instanceof Request?t.headers:new Headers,s=[...o],r=e!=null&&e.body?typeof e.body=="string"?o.get("content-type")==="application/json"?JSON.stringify(JSON.parse(e.body),null,2):e.body:"    <binary>":"    (none)",c=s.length>0?`${s.map(([p,f])=>`    ${p}: ${f}`).join(`
`)}`:"    (none)";return console.log(`YouTube.js Fetch:
  url: ${i.toString()}
  method: ${(e==null?void 0:e.method)||"GET"}
  headers:
${c}
' + 
    '  body:
${r}`),B.shim.fetch(t,e)},"debugFetch");function Tt(t){return btoa(String.fromCharCode.apply(null,Array.from(t)))}n(Tt,"u8ToBase64");function _g(t){return new Uint8Array(atob(t).split("").map(e=>e.charCodeAt(0)))}n(_g,"base64ToU8");function Qe(t){return!("emoji"in t)}n(Qe,"isTextRun");function jg(t){return x(this,void 0,void 0,function*(){let e=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function i(o){let s=new Uint8Array(o),r=[];for(let c=0;c<s.length;++c)r.push(e[s[c]]);return r.join("")}return n(i,"hex"),i(yield crypto.subtle.digest("SHA-1",new TextEncoder().encode(t)))})}n(jg,"sha1Hash");var f0={name:"youtubei.js",version:"5.8.0",description:"A wrapper around YouTube's private API. Supports YouTube, YouTube Music, YouTube Kids and YouTube Studio (WIP).",type:"module",types:"./dist/src/platform/lib.d.ts",typesVersions:{"*":{agnostic:["./dist/src/platform/lib.d.ts"],web:["./dist/src/platform/lib.d.ts"],"web.bundle":["./dist/src/platform/lib.d.ts"],"web.bundle.min":["./dist/src/platform/lib.d.ts"]}},exports:{".":{node:{import:"./dist/src/platform/node.js",require:"./bundle/node.cjs"},deno:"./dist/src/platform/deno.js",types:"./dist/src/platform/lib.d.ts",browser:"./dist/src/platform/web.js",default:"./dist/src/platform/web.js"},"./agnostic":{types:"./dist/src/platform/lib.d.ts",default:"./dist/src/platform/lib.js"},"./web":{types:"./dist/src/platform/lib.d.ts",default:"./dist/src/platform/web.js"},"./web.bundle":{types:"./dist/src/platform/lib.d.ts",default:"./bundle/browser.js"},"./web.bundle.min":{types:"./dist/src/platform/lib.d.ts",default:"./bundle/browser.min.js"}},author:"LuanRT <luan.lrt4@gmail.com> (https://github.com/LuanRT)",funding:["https://github.com/sponsors/LuanRT"],contributors:["Wykerd (https://github.com/wykerd/)","MasterOfBob777 (https://github.com/MasterOfBob777)","patrickkfkan (https://github.com/patrickkfkan)","akkadaska (https://github.com/akkadaska)"],directories:{test:"./test",examples:"./examples",dist:"./dist"},scripts:{test:"npx jest --verbose",lint:"npx eslint ./src","lint:fix":"npx eslint --fix ./src",build:"npm run build:parser-map && npm run build:proto && npm run build:esm && npm run bundle:node && npm run bundle:browser && npm run bundle:browser:prod","build:parser-map":"node ./scripts/build-parser-map.cjs","build:proto":'npx pb-gen-ts --entry-path="src/proto" --out-dir="src/proto/generated" --ext-in-import=".js"',"build:esm":"npx tsc","build:deno":`npx cpy ./src ./deno && npx cpy ./package.json ./deno && npx replace ".js';" ".ts';" ./deno -r && npx replace '.js";' '.ts";' ./deno -r && npx replace "'linkedom';" "'https://esm.sh/linkedom';" ./deno -r && npx replace "'jintr';" "'https://esm.sh/jintr';" ./deno -r && npx replace "new Jinter.default" "new Jinter" ./deno -r`,"bundle:node":'npx esbuild ./dist/src/platform/node.js --bundle --target=node10 --keep-names --format=cjs --platform=node --outfile=./bundle/node.cjs --external:jintr --external:undici --external:linkedom --external:tslib --sourcemap --banner:js="/* eslint-disable */"',"bundle:browser":'npx esbuild ./dist/src/platform/web.js --banner:js="/* eslint-disable */" --bundle --target=chrome58 --keep-names --format=esm --sourcemap --define:global=globalThis --conditions=module --outfile=./bundle/browser.js --platform=browser',"bundle:browser:prod":"npm run bundle:browser -- --outfile=./bundle/browser.min.js --minify",prepare:"npm run build",watch:"npx tsc --watch"},repository:{type:"git",url:"git+https://github.com/LuanRT/YouTube.js.git"},license:"MIT",dependencies:{jintr:"^1.1.0",linkedom:"^0.14.12",tslib:"^2.5.0",undici:"^5.19.1"},devDependencies:{"@types/jest":"^28.1.7","@types/node":"^17.0.45","@typescript-eslint/eslint-plugin":"^5.30.6","@typescript-eslint/parser":"^5.30.6","cpy-cli":"^4.2.0",esbuild:"^0.14.49",eslint:"^8.19.0","eslint-plugin-tsdoc":"^0.2.16",glob:"^8.0.3",jest:"^28.1.3",pbkit:"^0.0.59",replace:"^1.2.2","ts-jest":"^28.0.8",typescript:"^5.0.0"},bugs:{url:"https://github.com/LuanRT/YouTube.js/issues"},homepage:"https://github.com/LuanRT/YouTube.js#readme",keywords:["yt","dl","ytdl","youtube","youtubedl","youtube-dl","youtube-downloader","youtube-music","youtube-studio","innertube","unofficial","downloader","livechat","studio","upload","ytmusic","search","music","api"]};var th={};U(th,{ArrayExpression:()=>Ns,ArrowFunctionExpression:()=>As,AssignmentExpression:()=>Rs,BinaryExpression:()=>Ms,BlockStatement:()=>Vs,BreakStatement:()=>Os,CallExpression:()=>Ds,ConditionalExpression:()=>Ls,ContinueStatement:()=>Fs,ExpressionStatement:()=>Ys,ForOfStatement:()=>js,ForStatement:()=>Us,FunctionDeclaration:()=>Ws,FunctionExpression:()=>Hs,Identifier:()=>Js,IfStatement:()=>Gs,Literal:()=>zs,LogicalExpression:()=>Ks,MemberExpression:()=>$s,NewExpression:()=>qs,ObjectExpression:()=>Xs,Property:()=>Qs,ReturnStatement:()=>Zs,SequenceExpression:()=>er,SwitchCase:()=>tr,SwitchStatement:()=>ir,ThisExpression:()=>or,ThrowStatement:()=>nr,TryStatement:()=>sr,UnaryExpression:()=>rr,UpdateExpression:()=>ar,VariableDeclaration:()=>ur,WhileStatement:()=>lr});var O=class{constructor(e,i){this.node=e,this.visitor=i}run(){}};n(O,"BaseJSNode");var Ns=class extends O{run(){return this.node.elements.map(e=>this.visitor.visitNode(e))}};n(Ns,"ArrayExpression");var Ug={};U(Ug,{namedFunction:()=>Xo});var Xo=n((t,e)=>Object.defineProperty(e,"name",{value:t}),"namedFunction");var As=class extends O{run(){let{params:e,body:i}=this.node;return Xo("anonymous function",s=>{let r=0;for(let c of e)this.visitor.visitNode(c),c.type==="Identifier"?this.visitor.scope.set(c.name,s[r]):console.warn("Unhandled param type",c.type),r++;return this.visitor.visitNode(i)})}};n(As,"ArrowFunctionExpression");var Rs=class extends O{run(){let e=this.node.operator,i=this.visitor.visitNode(this.node.right);switch(e){case"=":if(this.node.left.type==="MemberExpression"){let o=this.visitor.visitNode(this.node.left.object),s=this.visitor.visitNode(this.node.left.property);return o[s]=i}else if(this.node.left.type==="Identifier")return this.visitor.scope.set(this.node.left.name,i),this.visitor.scope.get(this.node.left.name);console.warn("Unhandled left node",this.node.left);break;case"+=":if(this.node.left.type==="MemberExpression"){let o=this.visitor.visitNode(this.node.left.object),s=this.visitor.visitNode(this.node.left.property);return o[s]+=i}else if(this.node.left.type==="Identifier"){let o=this.visitor.visitNode(this.node.left)+i;return this.visitor.scope.set(this.node.left.name,o),this.visitor.scope.get(this.node.left.name)}console.warn("Unhandled left node",this.node.left);break;case"-=":if(this.node.left.type==="MemberExpression"){let o=this.visitor.visitNode(this.node.left.object),s=this.visitor.visitNode(this.node.left.property);return o[s]-=i}else if(this.node.left.type==="Identifier"){let o=this.visitor.visitNode(this.node.left)-i;return this.visitor.scope.set(this.node.left.name,o),this.visitor.scope.get(this.node.left.name)}console.warn("Unhandled left node",this.node.left);break;case"*=":if(this.node.left.type==="MemberExpression"){let o=this.visitor.visitNode(this.node.left.object),s=this.visitor.visitNode(this.node.left.property);return o[s]*=i}else if(this.node.left.type==="Identifier"){let o=this.visitor.visitNode(this.node.left)*i;return this.visitor.scope.set(this.node.left.name,o),this.visitor.scope.get(this.node.left.name)}console.warn("Unhandled left node",this.node.left);break;case"/=":if(this.node.left.type==="MemberExpression"){let o=this.visitor.visitNode(this.node.left.object),s=this.visitor.visitNode(this.node.left.property);return o[s]/=i}else if(this.node.left.type==="Identifier"){let o=this.visitor.visitNode(this.node.left)/i;return this.visitor.scope.set(this.node.left.name,o),this.visitor.scope.get(this.node.left.name)}console.warn("Unhandled left node",this.node.left);break;case"%=":if(this.node.left.type==="MemberExpression"){let o=this.visitor.visitNode(this.node.left.object),s=this.visitor.visitNode(this.node.left.property);return o[s]%=i}else if(this.node.left.type==="Identifier"){let o=this.visitor.visitNode(this.node.left)%i;return this.visitor.scope.set(this.node.left.name,o),this.visitor.scope.get(this.node.left.name)}console.warn("Unhandled left node",this.node.left);break;case"**=":if(this.node.left.type==="MemberExpression"){let o=this.visitor.visitNode(this.node.left.object),s=this.visitor.visitNode(this.node.left.property);return o[s]**=i}else if(this.node.left.type==="Identifier"){let o=this.visitor.visitNode(this.node.left)**i;return this.visitor.scope.set(this.node.left.name,o),this.visitor.scope.get(this.node.left.name)}console.warn("Unhandled left node",this.node.left);break;case"<<=":if(this.node.left.type==="MemberExpression"){let o=this.visitor.visitNode(this.node.left.object),s=this.visitor.visitNode(this.node.left.property);return o[s]<<=i}else if(this.node.left.type==="Identifier"){let o=this.visitor.visitNode(this.node.left)<<i;return this.visitor.scope.set(this.node.left.name,o),this.visitor.scope.get(this.node.left.name)}console.warn("Unhandled left node",this.node.left);break;case">>=":if(this.node.left.type==="MemberExpression"){let o=this.visitor.visitNode(this.node.left.object),s=this.visitor.visitNode(this.node.left.property);return o[s]>>=i}else if(this.node.left.type==="Identifier"){let o=this.visitor.visitNode(this.node.left)>>i;return this.visitor.scope.set(this.node.left.name,o),this.visitor.scope.get(this.node.left.name)}console.warn("Unhandled left node",this.node.left);break;case">>>=":if(this.node.left.type==="MemberExpression"){let o=this.visitor.visitNode(this.node.left.object),s=this.visitor.visitNode(this.node.left.property);return o[s]>>>=i}else if(this.node.left.type==="Identifier"){let o=this.visitor.visitNode(this.node.left)>>>i;return this.visitor.scope.set(this.node.left.name,o),this.visitor.scope.get(this.node.left.name)}console.warn("Unhandled left node",this.node.left);break;case"&=":if(this.node.left.type==="MemberExpression"){let o=this.visitor.visitNode(this.node.left.object),s=this.visitor.visitNode(this.node.left.property);return o[s]&=i}else if(this.node.left.type==="Identifier"){let o=this.visitor.visitNode(this.node.left)&i;return this.visitor.scope.set(this.node.left.name,o),this.visitor.scope.get(this.node.left.name)}console.warn("Unhandled left node",this.node.left);break}}};n(Rs,"AssignmentExpression");var Ms=class extends O{run(){let e=this.node.operator,i=this.visitor.visitNode(this.node.left),o=this.visitor.visitNode(this.node.right);switch(e){case"!=":return i!=o;case"!==":return i!==o;case"%":return i%o;case"&":return i&o;case"*":return i*o;case"**":return i**o;case"+":return i+o;case"-":return i-o;case"/":return i/o;case"<":return i<o;case"<<":return i<<o;case"<=":return i<=o;case"==":return i==o;case"===":return i===o;case">":return i>o;case">=":return i>=o;case">>":return i>>o;case">>>":return i>>>o;case"^":return i^o;case"|":return i|o;case"in":return i in o;case"instanceof":return i instanceof o}}};n(Ms,"BinaryExpression");var Vs=class extends O{run(){for(let e of this.node.body){let i=this.visitor.visitNode(e);if(e.type==="ReturnStatement"||i==="break"||i==="continue"||(e.type==="WhileStatement"||e.type==="IfStatement"||e.type==="ForStatement"||e.type==="TryStatement")&&!!i)return i}}};n(Vs,"BlockStatement");var Os=class extends O{run(){return"break"}};n(Os,"BreakStatement");var kT=function(t,e,i,o){if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?o:i==="a"?o.call(t):o?o.value:e.get(t)},h0,Wg,Ds=class extends O{constructor(){super(...arguments),h0.add(this)}run(){let e,i;if(this.node.callee.type==="MemberExpression"?(e=this.visitor.getName(this.node.callee.object),i=this.visitor.getName(this.node.callee.property)):this.node.callee.type==="Identifier"&&(i=this.node.callee.name),e&&this.visitor.listeners[e]){let r=this.visitor.listeners[e](this.node,this.visitor);if(r!=="proceed")return r}if(i&&i!=="toString"&&this.visitor.listeners[i]){let r=this.visitor.listeners[i](this.node,this.visitor);if(r!=="proceed")return r}if(this.node.callee.type==="MemberExpression"){if(Bs.has(this.node,this.visitor))return Bs.execute(this.node,this.visitor);let r=this.visitor.visitNode(this.node.callee.object),c=this.node.callee.computed?this.visitor.visitNode(this.node.callee.property):this.visitor.getName(this.node.callee.property),p=this.node.arguments.map(f=>this.visitor.visitNode(f));return typeof r[c]!="function"&&kT(this,h0,"m",Wg).call(this),r[c].toString().includes("[native code]")?r[c](...p):r[c](p)}let o=this.visitor.visitNode(this.node.callee),s=this.node.arguments.map(r=>this.visitor.visitNode(r));return typeof o!="function"&&kT(this,h0,"m",Wg).call(this),o(s)}};n(Ds,"CallExpression");h0=new WeakSet,Wg=n(function(){if(this.node.callee.type==="MemberExpression")throw new Error(`${this.node.callee.object.type==="Identifier"?this.node.callee.object.name:"<object>"}.${this.node.callee.property.type==="Identifier"?this.node.callee.property.name:"?"} is not a function`);if(this.node.callee.type==="Identifier")throw new Error(`${this.node.callee.name} is not a function`);if(this.node.callee.type==="SequenceExpression"){let e=[],i=[];throw e.push("("),this.node.callee.expressions.forEach(o=>{o.type==="Literal"?i.push(o.raw||""):o.type==="Identifier"?i.push(o.name):o.type==="MemberExpression"&&(o.computed?i.push(`${this.visitor.getName(o.object)}[${this.visitor.getName(o.property)||"..."}]`):i.push(`${this.visitor.getName(o.object)}.${this.visitor.getName(o.property)}`))}),e.push(i.join(", ")),e.push(")"),new Error(`${e.join("")} is not a function`)}},"_CallExpression_throwError");var Bs=class{static has(e,i){var o;return e.callee.type==="MemberExpression"?!!(!((o=this.builtins)===null||o===void 0)&&o[i.getName(e.callee.property)||""]):!1}static execute(e,i){if(e.callee.type==="MemberExpression")return this.builtins[i.getName(e.callee.property)||""](e,i)}};n(Bs,"Builtins");Bs.builtins={forEach:(t,e)=>{let i=t.arguments.map(o=>e.visitNode(o));if(t.callee.type==="MemberExpression"){let o=e.visitNode(t.callee.object);i.length>1&&e.scope.set("_this",i.slice(-1)[0]);let s=0;for(let r of o)i[0]([r,s++,o])}else console.warn("Unhandled callee type:",t.callee.type)},toString:(t,e)=>{if(t.callee.type==="MemberExpression")return e.visitNode(t.callee.object).toString()}};var Ls=class extends O{run(){let{test:e,consequent:i,alternate:o}=this.node;return this.visitor.visitNode(e)?this.visitor.visitNode(i):this.visitor.visitNode(o)}};n(Ls,"ConditionalExpression");var Fs=class extends O{run(){return"continue"}};n(Fs,"ContinueStatement");var Ys=class extends O{run(){return this.visitor.visitNode(this.node.expression)}};n(Ys,"ExpressionStatement");var js=class extends O{run(){this.visitor.visitNode(this.node.left);let e=this.visitor.visitNode(this.node.right);for(let i of e){if(this.node.left.type==="VariableDeclaration"&&this.node.left.declarations[0].id.type==="Identifier")this.visitor.scope.set(this.node.left.declarations[0].id.name,i);else if(this.node.left.type==="VariableDeclaration"&&this.node.left.declarations[0].id.type==="ObjectPattern")for(let s of this.node.left.declarations[0].id.properties)s.type==="Property"&&s.value.type==="Identifier"&&s.key.type==="Identifier"&&this.visitor.scope.set(s.value.name,i[s.key.name]);let o=this.visitor.visitNode(this.node.body);if(o==="break")break;if(o!=="continue"&&o&&this.node.body.type!=="ExpressionStatement")return o}}};n(js,"ForOfStatement");var Us=class extends O{run(){this.node.init&&this.visitor.visitNode(this.node.init);let e=n(()=>this.node.test?this.visitor.visitNode(this.node.test):!0,"test");for(;e();){let o=this.visitor.visitNode(this.node.body);if(o!=="continue"){if(o==="break")break;if(this.node.update&&this.visitor.visitNode(this.node.update),o&&this.node.body.type!=="ExpressionStatement")return o}}}};n(Us,"ForStatement");var Ws=class extends O{run(){let{params:e,body:i}=this.node,o=this.visitor.visitNode(this.node.id),s=Xo(o,r=>{let c=0;for(let p of e)this.visitor.visitNode(p),p.type==="Identifier"?this.visitor.scope.set(p.name,r[c]):console.warn("Unhandled param type",p.type),c++;return this.visitor.visitNode(i)});this.visitor.scope.set(o,s)}};n(Ws,"FunctionDeclaration");var Hs=class extends O{run(){let{params:e,body:i}=this.node;return Xo("anonymous function",s=>{let r=0;for(let c of e)this.visitor.visitNode(c),c.type==="Identifier"?this.visitor.scope.set(c.name,s[r]):console.warn("Unhandled param type",c.type),r++;return this.visitor.visitNode(i)})}};n(Hs,"FunctionExpression");var Js=class extends O{run(){if(this.visitor.listeners[this.node.name]){let e=this.visitor.listeners[this.node.name](this.node,this.visitor);if(e!=="proceed")return e}return this.visitor.scope.has(this.node.name)?this.visitor.scope.get(this.node.name):this.node.name}};n(Js,"Identifier");var Gs=class extends O{run(){if(this.visitor.visitNode(this.node.test))return this.visitor.visitNode(this.node.consequent);if(this.node.alternate)return this.visitor.visitNode(this.node.alternate)}};n(Gs,"IfStatement");var zs=class extends O{run(){return this.node.value}};n(zs,"Literal");var Ks=class extends O{run(){switch(this.node.operator){case"&&":{let i=this.visitor.visitNode(this.node.left);return i===!0?this.visitor.visitNode(this.node.right):i}case"||":return this.visitor.visitNode(this.node.left)||this.visitor.visitNode(this.node.right);case"??":{let i=this.visitor.visitNode(this.node.left);return i!=null?i:this.visitor.visitNode(this.node.right)}}}};n(Ks,"LogicalExpression");var $s=class extends O{run(){let{object:e,property:i,computed:o}=this.node,s=this.visitor.visitNode(e),r=o?this.visitor.visitNode(i):this.visitor.getName(i);if(r!==void 0||r!==null){if(this.visitor.listeners[r]){let c=this.visitor.listeners[r](this.node,this.visitor);if(c!=="proceed")return c}return s==null?void 0:s[r]}}};n($s,"MemberExpression");var qs=class extends O{run(){let e=this.visitor.visitNode(this.node.callee),i=this.node.arguments.map(o=>this.visitor.visitNode(o));return new e(i)}};n(qs,"NewExpression");var Xs=class extends O{run(){let e={};for(let i of this.node.properties)if(i.type==="Property")e=Object.assign(Object.assign({},e),this.visitor.visitNode(i));else throw new Error(`Unhandled property type: ${i.type}`);return e}};n(Xs,"ObjectExpression");var Hg=function(t,e,i,o){if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?o:i==="a"?o.call(t):o?o.value:e.get(t)},eh,CT,ET,PT,Qs=class extends O{constructor(){super(...arguments),eh.add(this)}run(){switch(this.node.kind){case"init":return Hg(this,eh,"m",CT).call(this);case"get":return Hg(this,eh,"m",ET).call(this);case"set":return Hg(this,eh,"m",PT).call(this);default:throw new Error(`Unhandled property kind: ${this.node.kind}`)}}};n(Qs,"Property");eh=new WeakSet,CT=n(function(){let e=this.node.computed?this.visitor.visitNode(this.node.key):this.visitor.getName(this.node.key),i=this.visitor.visitNode(this.node.value);if(e)return{[e]:i}},"_Property_init"),ET=n(function(){throw new TypeError("Not implemented: Property.get")},"_Property_get"),PT=n(function(){throw new TypeError("Not implemented: Property.set")},"_Property_set");var Zs=class extends O{run(){if(this.node.argument)return this.visitor.visitNode(this.node.argument)}};n(Zs,"ReturnStatement");var er=class extends O{run(){let e;for(let i of this.node.expressions)e=this.visitor.visitNode(i);return e}};n(er,"SequenceExpression");var tr=class extends O{run(){for(let e of this.node.consequent){let i=this.visitor.visitNode(e);if(e.type==="ContinueStatement"||e.type==="BreakStatement")return i}}};n(tr,"SwitchCase");var ir=class extends O{run(){let e=this.visitor.visitNode(this.node.discriminant),i=!1,o=-1,s=0;for(;;){let r=this.node.cases[s];if(i){let c=this.visitor.visitNode(r);if(c==="break")break;if(c==="continue")return c;if(++s,s>=this.node.cases.length){s=0;break}else continue}if(i=r&&e===this.visitor.visitNode(r.test),i===void 0&&s>this.node.cases.length)break;if(r&&!i&&!r.test){o=s,s+=1;continue}if(!r&&!i&&o!==-1){i=!0,s=o;continue}i||++s}}};n(ir,"SwitchStatement");var or=class extends O{run(){return this.visitor.scope.get("_this")}};n(or,"ThisExpression");var nr=class extends O{run(){throw this.visitor.visitNode(this.node.argument)}};n(nr,"ThrowStatement");var sr=class extends O{run(){try{return this.visitor.visitNode(this.node.block)}catch(e){if(this.node.handler)return this.node.handler.param&&this.node.handler.param.type==="Identifier"&&this.visitor.scope.set(this.node.handler.param.name,e),this.visitor.visitNode(this.node.handler.body)}finally{this.visitor.visitNode(this.node.finalizer)}}};n(sr,"TryStatement");var rr=class extends O{run(){let e=this.node.operator;switch(e){case"-":return-this.visitor.visitNode(this.node.argument);case"+":return+this.visitor.visitNode(this.node.argument);case"!":return!this.visitor.visitNode(this.node.argument);case"~":return~this.visitor.visitNode(this.node.argument);case"void":{this.visitor.visitNode(this.node.argument);return}case"typeof":return typeof this.visitor.visitNode(this.node.argument);case"delete":{if(this.node.argument.type==="MemberExpression"){let i=this.visitor.visitNode(this.node.argument.object),o=this.node.argument.computed?this.visitor.visitNode(this.node.argument.property):this.visitor.getName(this.node.argument.property);return delete i[o]}else if(this.node.argument.type==="Identifier")return this.visitor.scope.delete(this.node.argument.name);return!0}default:console.warn("Unhandled UnaryExpression operator",e)}}};n(rr,"UnaryExpression");var ar=class extends O{run(){switch(this.node.operator){case"++":if(this.node.argument.type==="MemberExpression"){let i=this.visitor.visitNode(this.node.argument.object);return i[this.visitor.visitNode(this.node.argument.property)]++}else if(this.node.argument.type==="Identifier"){let i=this.visitor.visitNode(this.node.argument);return this.visitor.scope.set(this.node.argument.name,i+1),this.node.prefix?++i:i}break;case"--":if(this.node.argument.type==="MemberExpression"){let i=this.visitor.visitNode(this.node.argument.object);return i[this.visitor.visitNode(this.node.argument.property)]--}else if(this.node.argument.type==="Identifier"){let i=this.visitor.visitNode(this.node.argument);return this.visitor.scope.set(this.node.argument.name,i-1),this.node.prefix?--i:i}break}}};n(ar,"UpdateExpression");var ur=class extends O{run(){this.node.declarations.forEach(e=>{let{id:i,init:o}=e,s=this.visitor.getName(i),r=o?this.visitor.visitNode(o):void 0;s&&this.visitor.scope.set(s,r),typeof r=="object"&&r!==null&&this.visitor.scope.set("_this",r)})}};n(ur,"VariableDeclaration");var lr=class extends O{run(){for(;this.visitor.visitNode(this.node.test);){let e=this.visitor.visitNode(this.node.body);if(e==="break")break;if(e!=="continue"&&e)return e}}};n(lr,"WhileStatement");var cS=function(t,e,i,o){if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?o:i==="a"?o.call(t):o?o.value:e.get(t)},Jg,NT,cr=class{constructor(e){Jg.add(this),this.scope=new Map,this.listeners={},this.ast=e}run(){let e;for(let i of this.ast)e=this.visitNode(i);return e}visitNode(e){if(!e)return null;let i=cS(this,Jg,"m",NT).call(this,e.type);if(i)return new i(e,this).run()}getName(e){if(e.type==="Identifier")return e.name;if(e.type==="Literal")return e.value}on(e,i){this.listeners[e]=i}};n(cr,"Visitor");Jg=new WeakSet,NT=n(function(e){let i=th[e];return i||console.warn("[JINTER]:",`JavaScript node "${e}" not implemented!
If this is causing unexpected behavior, please report it at https://github.com/LuanRT/Jinter/issues/new`),i},"_Visitor_getNode");var dS=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],OT=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,3104,541,1507,4938,6,4191],pS="\u200C\u200D\xB7\u0300-\u036F\u0387\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u0669\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07C0-\u07C9\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0966-\u096F\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09E6-\u09EF\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A66-\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AE6-\u0AEF\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B66-\u0B6F\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CE6-\u0CEF\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D66-\u0D6F\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0E50-\u0E59\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1040-\u1049\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109D\u135D-\u135F\u1369-\u1371\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u18A9\u1920-\u192B\u1930-\u193B\u1946-\u194F\u19D0-\u19DA\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BF3\u1C24-\u1C37\u1C40-\u1C49\u1C50-\u1C59\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u203F\u2040\u2054\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA620-\uA629\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F1\uA8FF-\uA909\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9D0-\uA9D9\uA9E5\uA9F0-\uA9F9\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA50-\uAA59\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uABF0-\uABF9\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFF10-\uFF19\uFF3F",DT="\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",Gg={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},zg="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",fS={5:zg,"5module":zg+" export import",6:zg+" const class extends export import super"},hS=/^in(stanceof)?$/,mS=new RegExp("["+DT+"]"),_S=new RegExp("["+DT+pS+"]");function $g(t,e){for(var i=65536,o=0;o<e.length;o+=2){if(i+=e[o],i>t)return!1;if(i+=e[o+1],i>=t)return!0}return!1}n($g,"isInAstralSet");function Ii(t,e){return t<65?t===36:t<91?!0:t<97?t===95:t<123?!0:t<=65535?t>=170&&mS.test(String.fromCharCode(t)):e===!1?!1:$g(t,OT)}n(Ii,"isIdentifierStart");function dr(t,e){return t<48?t===36:t<58?!0:t<65?!1:t<91?!0:t<97?t===95:t<123?!0:t<=65535?t>=170&&_S.test(String.fromCharCode(t)):e===!1?!1:$g(t,OT)||$g(t,dS)}n(dr,"isIdentifierChar");var ae=n(function(e,i){i===void 0&&(i={}),this.label=e,this.keyword=i.keyword,this.beforeExpr=!!i.beforeExpr,this.startsExpr=!!i.startsExpr,this.isLoop=!!i.isLoop,this.isAssign=!!i.isAssign,this.prefix=!!i.prefix,this.postfix=!!i.postfix,this.binop=i.binop||null,this.updateContext=null},"TokenType");function kt(t,e){return new ae(t,{beforeExpr:!0,binop:e})}n(kt,"binop");var Ct={beforeExpr:!0},ut={startsExpr:!0},Qg={};function se(t,e){return e===void 0&&(e={}),e.keyword=t,Qg[t]=new ae(t,e)}n(se,"kw");var h={num:new ae("num",ut),regexp:new ae("regexp",ut),string:new ae("string",ut),name:new ae("name",ut),privateId:new ae("privateId",ut),eof:new ae("eof"),bracketL:new ae("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new ae("]"),braceL:new ae("{",{beforeExpr:!0,startsExpr:!0}),braceR:new ae("}"),parenL:new ae("(",{beforeExpr:!0,startsExpr:!0}),parenR:new ae(")"),comma:new ae(",",Ct),semi:new ae(";",Ct),colon:new ae(":",Ct),dot:new ae("."),question:new ae("?",Ct),questionDot:new ae("?."),arrow:new ae("=>",Ct),template:new ae("template"),invalidTemplate:new ae("invalidTemplate"),ellipsis:new ae("...",Ct),backQuote:new ae("`",ut),dollarBraceL:new ae("${",{beforeExpr:!0,startsExpr:!0}),eq:new ae("=",{beforeExpr:!0,isAssign:!0}),assign:new ae("_=",{beforeExpr:!0,isAssign:!0}),incDec:new ae("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new ae("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:kt("||",1),logicalAND:kt("&&",2),bitwiseOR:kt("|",3),bitwiseXOR:kt("^",4),bitwiseAND:kt("&",5),equality:kt("==/!=/===/!==",6),relational:kt("</>/<=/>=",7),bitShift:kt("<</>>/>>>",8),plusMin:new ae("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:kt("%",10),star:kt("*",10),slash:kt("/",10),starstar:new ae("**",{beforeExpr:!0}),coalesce:kt("??",1),_break:se("break"),_case:se("case",Ct),_catch:se("catch"),_continue:se("continue"),_debugger:se("debugger"),_default:se("default",Ct),_do:se("do",{isLoop:!0,beforeExpr:!0}),_else:se("else",Ct),_finally:se("finally"),_for:se("for",{isLoop:!0}),_function:se("function",ut),_if:se("if"),_return:se("return",Ct),_switch:se("switch"),_throw:se("throw",Ct),_try:se("try"),_var:se("var"),_const:se("const"),_while:se("while",{isLoop:!0}),_with:se("with"),_new:se("new",{beforeExpr:!0,startsExpr:!0}),_this:se("this",ut),_super:se("super",ut),_class:se("class",ut),_extends:se("extends",Ct),_export:se("export"),_import:se("import",ut),_null:se("null",ut),_true:se("true",ut),_false:se("false",ut),_in:se("in",{beforeExpr:!0,binop:7}),_instanceof:se("instanceof",{beforeExpr:!0,binop:7}),_typeof:se("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:se("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:se("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Nt=/\r\n?|\n|\u2028|\u2029/,vS=new RegExp(Nt.source,"g");function pr(t){return t===10||t===13||t===8232||t===8233}n(pr,"isNewLine");function BT(t,e,i){i===void 0&&(i=t.length);for(var o=e;o<i;o++){var s=t.charCodeAt(o);if(pr(s))return o<i-1&&s===13&&t.charCodeAt(o+1)===10?o+2:o+1}return-1}n(BT,"nextLineBreak");var LT=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Et=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,FT=Object.prototype,gS=FT.hasOwnProperty,xS=FT.toString,sh=Object.hasOwn||function(t,e){return gS.call(t,e)},AT=Array.isArray||function(t){return xS.call(t)==="[object Array]"};function oo(t){return new RegExp("^(?:"+t.replace(/ /g,"|")+")$")}n(oo,"wordsRegexp");function no(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}n(no,"codePointToString");var bS=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,oh=n(function(e,i){this.line=e,this.column=i},"Position");oh.prototype.offset=n(function(e){return new oh(this.line,this.column+e)},"offset");var x0=n(function(e,i,o){this.start=i,this.end=o,e.sourceFile!==null&&(this.source=e.sourceFile)},"SourceLocation");function YT(t,e){for(var i=1,o=0;;){var s=BT(t,o,e);if(s<0)return new oh(i,e-o);++i,o=s}}n(YT,"getLineInfo");var qg={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},RT=!1;function yS(t){var e={};for(var i in qg)e[i]=t&&sh(t,i)?t[i]:qg[i];if(e.ecmaVersion==="latest"?e.ecmaVersion=1e8:e.ecmaVersion==null?(!RT&&typeof console=="object"&&console.warn&&(RT=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),e.ecmaVersion=11):e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),e.allowReserved==null&&(e.allowReserved=e.ecmaVersion<5),(!t||t.allowHashBang==null)&&(e.allowHashBang=e.ecmaVersion>=14),AT(e.onToken)){var o=e.onToken;e.onToken=function(s){return o.push(s)}}return AT(e.onComment)&&(e.onComment=wS(e,e.onComment)),e}n(yS,"getOptions");function wS(t,e){return function(i,o,s,r,c,p){var f={type:i?"Block":"Line",value:o,start:s,end:r};t.locations&&(f.loc=new x0(this,c,p)),t.ranges&&(f.range=[s,r]),e.push(f)}}n(wS,"pushComment");var nh=1,fr=2,Zg=4,jT=8,UT=16,WT=32,ex=64,HT=128,rh=256,tx=nh|fr|rh;function ix(t,e){return fr|(t?Zg:0)|(e?jT:0)}n(ix,"functionFlags");var _0=0,ox=1,Ci=2,JT=3,GT=4,zT=5,Be=n(function(e,i,o){this.options=e=yS(e),this.sourceFile=e.sourceFile,this.keywords=oo(fS[e.ecmaVersion>=6?6:e.sourceType==="module"?"5module":5]);var s="";e.allowReserved!==!0&&(s=Gg[e.ecmaVersion>=6?6:e.ecmaVersion===5?5:3],e.sourceType==="module"&&(s+=" await")),this.reservedWords=oo(s);var r=(s?s+" ":"")+Gg.strict;this.reservedWordsStrict=oo(r),this.reservedWordsStrictBind=oo(r+" "+Gg.strictBind),this.input=String(i),this.containsEsc=!1,o?(this.pos=o,this.lineStart=this.input.lastIndexOf(`
`,o-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Nt).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=h.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=e.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&e.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(nh),this.regexpState=null,this.privateNameStack=[]},"Parser"),li={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Be.prototype.parse=n(function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)},"parse");li.inFunction.get=function(){return(this.currentVarScope().flags&fr)>0};li.inGenerator.get=function(){return(this.currentVarScope().flags&jT)>0&&!this.currentVarScope().inClassFieldInit};li.inAsync.get=function(){return(this.currentVarScope().flags&Zg)>0&&!this.currentVarScope().inClassFieldInit};li.canAwait.get=function(){for(var t=this.scopeStack.length-1;t>=0;t--){var e=this.scopeStack[t];if(e.inClassFieldInit||e.flags&rh)return!1;if(e.flags&fr)return(e.flags&Zg)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};li.allowSuper.get=function(){var t=this.currentThisScope(),e=t.flags,i=t.inClassFieldInit;return(e&ex)>0||i||this.options.allowSuperOutsideMethod};li.allowDirectSuper.get=function(){return(this.currentThisScope().flags&HT)>0};li.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};li.allowNewDotTarget.get=function(){var t=this.currentThisScope(),e=t.flags,i=t.inClassFieldInit;return(e&(fr|rh))>0||i};li.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&rh)>0};Be.extend=n(function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];for(var o=this,s=0;s<e.length;s++)o=e[s](o);return o},"extend");Be.parse=n(function(e,i){return new this(i,e).parse()},"parse");Be.parseExpressionAt=n(function(e,i,o){var s=new this(o,e,i);return s.nextToken(),s.parseExpression()},"parseExpressionAt");Be.tokenizer=n(function(e,i){return new this(i,e)},"tokenizer");Object.defineProperties(Be.prototype,li);var Ze=Be.prototype,TS=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Ze.strictDirective=function(t){if(this.options.ecmaVersion<5)return!1;for(;;){Et.lastIndex=t,t+=Et.exec(this.input)[0].length;var e=TS.exec(this.input.slice(t));if(!e)return!1;if((e[1]||e[2])==="use strict"){Et.lastIndex=t+e[0].length;var i=Et.exec(this.input),o=i.index+i[0].length,s=this.input.charAt(o);return s===";"||s==="}"||Nt.test(i[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(s)||s==="!"&&this.input.charAt(o+1)==="=")}t+=e[0].length,Et.lastIndex=t,t+=Et.exec(this.input)[0].length,this.input[t]===";"&&t++}};Ze.eat=function(t){return this.type===t?(this.next(),!0):!1};Ze.isContextual=function(t){return this.type===h.name&&this.value===t&&!this.containsEsc};Ze.eatContextual=function(t){return this.isContextual(t)?(this.next(),!0):!1};Ze.expectContextual=function(t){this.eatContextual(t)||this.unexpected()};Ze.canInsertSemicolon=function(){return this.type===h.eof||this.type===h.braceR||Nt.test(this.input.slice(this.lastTokEnd,this.start))};Ze.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};Ze.semicolon=function(){!this.eat(h.semi)&&!this.insertSemicolon()&&this.unexpected()};Ze.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0};Ze.expect=function(t){this.eat(t)||this.unexpected()};Ze.unexpected=function(t){this.raise(t!=null?t:this.start,"Unexpected token")};var b0=n(function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1},"DestructuringErrors");Ze.checkPatternErrors=function(t,e){if(!!t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var i=e?t.parenthesizedAssign:t.parenthesizedBind;i>-1&&this.raiseRecoverable(i,e?"Assigning to rvalue":"Parenthesized pattern")}};Ze.checkExpressionErrors=function(t,e){if(!t)return!1;var i=t.shorthandAssign,o=t.doubleProto;if(!e)return i>=0||o>=0;i>=0&&this.raise(i,"Shorthand property assignments are valid only in destructuring patterns"),o>=0&&this.raiseRecoverable(o,"Redefinition of __proto__ property")};Ze.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Ze.isSimpleAssignTarget=function(t){return t.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(t.expression):t.type==="Identifier"||t.type==="MemberExpression"};var L=Be.prototype;L.parseTopLevel=function(t){var e=Object.create(null);for(t.body||(t.body=[]);this.type!==h.eof;){var i=this.parseStatement(null,!0,e);t.body.push(i)}if(this.inModule)for(var o=0,s=Object.keys(this.undefinedExports);o<s.length;o+=1){var r=s[o];this.raiseRecoverable(this.undefinedExports[r].start,"Export '"+r+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),t.sourceType=this.options.sourceType,this.finishNode(t,"Program")};var nx={kind:"loop"},SS={kind:"switch"};L.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Et.lastIndex=this.pos;var e=Et.exec(this.input),i=this.pos+e[0].length,o=this.input.charCodeAt(i);if(o===91||o===92)return!0;if(t)return!1;if(o===123||o>55295&&o<56320)return!0;if(Ii(o,!0)){for(var s=i+1;dr(o=this.input.charCodeAt(s),!0);)++s;if(o===92||o>55295&&o<56320)return!0;var r=this.input.slice(i,s);if(!hS.test(r))return!0}return!1};L.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Et.lastIndex=this.pos;var t=Et.exec(this.input),e=this.pos+t[0].length,i;return!Nt.test(this.input.slice(this.pos,e))&&this.input.slice(e,e+8)==="function"&&(e+8===this.input.length||!(dr(i=this.input.charCodeAt(e+8))||i>55295&&i<56320))};L.parseStatement=function(t,e,i){var o=this.type,s=this.startNode(),r;switch(this.isLet(t)&&(o=h._var,r="let"),o){case h._break:case h._continue:return this.parseBreakContinueStatement(s,o.keyword);case h._debugger:return this.parseDebuggerStatement(s);case h._do:return this.parseDoStatement(s);case h._for:return this.parseForStatement(s);case h._function:return t&&(this.strict||t!=="if"&&t!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(s,!1,!t);case h._class:return t&&this.unexpected(),this.parseClass(s,!0);case h._if:return this.parseIfStatement(s);case h._return:return this.parseReturnStatement(s);case h._switch:return this.parseSwitchStatement(s);case h._throw:return this.parseThrowStatement(s);case h._try:return this.parseTryStatement(s);case h._const:case h._var:return r=r||this.value,t&&r!=="var"&&this.unexpected(),this.parseVarStatement(s,r);case h._while:return this.parseWhileStatement(s);case h._with:return this.parseWithStatement(s);case h.braceL:return this.parseBlock(!0,s);case h.semi:return this.parseEmptyStatement(s);case h._export:case h._import:if(this.options.ecmaVersion>10&&o===h._import){Et.lastIndex=this.pos;var c=Et.exec(this.input),p=this.pos+c[0].length,f=this.input.charCodeAt(p);if(f===40||f===46)return this.parseExpressionStatement(s,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),o===h._import?this.parseImport(s):this.parseExport(s,i);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(s,!0,!t);var m=this.value,_=this.parseExpression();return o===h.name&&_.type==="Identifier"&&this.eat(h.colon)?this.parseLabeledStatement(s,m,_,t):this.parseExpressionStatement(s,_)}};L.parseBreakContinueStatement=function(t,e){var i=e==="break";this.next(),this.eat(h.semi)||this.insertSemicolon()?t.label=null:this.type!==h.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var o=0;o<this.labels.length;++o){var s=this.labels[o];if((t.label==null||s.name===t.label.name)&&(s.kind!=null&&(i||s.kind==="loop")||t.label&&i))break}return o===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,i?"BreakStatement":"ContinueStatement")};L.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")};L.parseDoStatement=function(t){return this.next(),this.labels.push(nx),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(h._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(h.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")};L.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(nx),this.enterScope(0),this.expect(h.parenL),this.type===h.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var i=this.isLet();if(this.type===h._var||this.type===h._const||i){var o=this.startNode(),s=i?"let":this.value;return this.next(),this.parseVar(o,!0,s),this.finishNode(o,"VariableDeclaration"),(this.type===h._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&o.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===h._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,o)):(e>-1&&this.unexpected(e),this.parseFor(t,o))}var r=this.isContextual("let"),c=!1,p=new b0,f=this.parseExpression(e>-1?"await":!0,p);return this.type===h._in||(c=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===h._in?e>-1&&this.unexpected(e):t.await=e>-1),r&&c&&this.raise(f.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(f,!1,p),this.checkLValPattern(f),this.parseForIn(t,f)):(this.checkExpressionErrors(p,!0),e>-1&&this.unexpected(e),this.parseFor(t,f))};L.parseFunctionStatement=function(t,e,i){return this.next(),this.parseFunction(t,ih|(i?0:Xg),!1,e)};L.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(h._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")};L.parseReturnStatement=function(t){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(h.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")};L.parseSwitchStatement=function(t){this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(h.braceL),this.labels.push(SS),this.enterScope(0);for(var e,i=!1;this.type!==h.braceR;)if(this.type===h._case||this.type===h._default){var o=this.type===h._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),o?e.test=this.parseExpression():(i&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),i=!0,e.test=null),this.expect(h.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")};L.parseThrowStatement=function(t){return this.next(),Nt.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var IS=[];L.parseCatchClauseParam=function(){var t=this.parseBindingAtom(),e=t.type==="Identifier";return this.enterScope(e?WT:0),this.checkLValPattern(t,e?GT:Ci),this.expect(h.parenR),t};L.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===h._catch){var e=this.startNode();this.next(),this.eat(h.parenL)?e.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0)),e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(h._finally)?this.parseBlock():null,!t.handler&&!t.finalizer&&this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")};L.parseVarStatement=function(t,e,i){return this.next(),this.parseVar(t,!1,e,i),this.semicolon(),this.finishNode(t,"VariableDeclaration")};L.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(nx),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")};L.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")};L.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")};L.parseLabeledStatement=function(t,e,i,o){for(var s=0,r=this.labels;s<r.length;s+=1){var c=r[s];c.name===e&&this.raise(i.start,"Label '"+e+"' is already declared")}for(var p=this.type.isLoop?"loop":this.type===h._switch?"switch":null,f=this.labels.length-1;f>=0;f--){var m=this.labels[f];if(m.statementStart===t.start)m.statementStart=this.start,m.kind=p;else break}return this.labels.push({name:e,kind:p,statementStart:this.start}),t.body=this.parseStatement(o?o.indexOf("label")===-1?o+"label":o:"label"),this.labels.pop(),t.label=i,this.finishNode(t,"LabeledStatement")};L.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")};L.parseBlock=function(t,e,i){for(t===void 0&&(t=!0),e===void 0&&(e=this.startNode()),e.body=[],this.expect(h.braceL),t&&this.enterScope(0);this.type!==h.braceR;){var o=this.parseStatement(null);e.body.push(o)}return i&&(this.strict=!1),this.next(),t&&this.exitScope(),this.finishNode(e,"BlockStatement")};L.parseFor=function(t,e){return t.init=e,this.expect(h.semi),t.test=this.type===h.semi?null:this.parseExpression(),this.expect(h.semi),t.update=this.type===h.parenR?null:this.parseExpression(),this.expect(h.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")};L.parseForIn=function(t,e){var i=this.type===h._in;return this.next(),e.type==="VariableDeclaration"&&e.declarations[0].init!=null&&(!i||this.options.ecmaVersion<8||this.strict||e.kind!=="var"||e.declarations[0].id.type!=="Identifier")&&this.raise(e.start,(i?"for-in":"for-of")+" loop variable declaration may not have an initializer"),t.left=e,t.right=i?this.parseExpression():this.parseMaybeAssign(),this.expect(h.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,i?"ForInStatement":"ForOfStatement")};L.parseVar=function(t,e,i,o){for(t.declarations=[],t.kind=i;;){var s=this.startNode();if(this.parseVarId(s,i),this.eat(h.eq)?s.init=this.parseMaybeAssign(e):!o&&i==="const"&&!(this.type===h._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!o&&s.id.type!=="Identifier"&&!(e&&(this.type===h._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):s.init=null,t.declarations.push(this.finishNode(s,"VariableDeclarator")),!this.eat(h.comma))break}return t};L.parseVarId=function(t,e){t.id=this.parseBindingAtom(),this.checkLValPattern(t.id,e==="var"?ox:Ci,!1)};var ih=1,Xg=2,KT=4;L.parseFunction=function(t,e,i,o,s){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!o)&&(this.type===h.star&&e&Xg&&this.unexpected(),t.generator=this.eat(h.star)),this.options.ecmaVersion>=8&&(t.async=!!o),e&ih&&(t.id=e&KT&&this.type!==h.name?null:this.parseIdent(),t.id&&!(e&Xg)&&this.checkLValSimple(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?ox:Ci:JT));var r=this.yieldPos,c=this.awaitPos,p=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(ix(t.async,t.generator)),e&ih||(t.id=this.type===h.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,i,!1,s),this.yieldPos=r,this.awaitPos=c,this.awaitIdentPos=p,this.finishNode(t,e&ih?"FunctionDeclaration":"FunctionExpression")};L.parseFunctionParams=function(t){this.expect(h.parenL),t.params=this.parseBindingList(h.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};L.parseClass=function(t,e){this.next();var i=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var o=this.enterClassBody(),s=this.startNode(),r=!1;for(s.body=[],this.expect(h.braceL);this.type!==h.braceR;){var c=this.parseClassElement(t.superClass!==null);c&&(s.body.push(c),c.type==="MethodDefinition"&&c.kind==="constructor"?(r&&this.raiseRecoverable(c.start,"Duplicate constructor in the same class"),r=!0):c.key&&c.key.type==="PrivateIdentifier"&&kS(o,c)&&this.raiseRecoverable(c.key.start,"Identifier '#"+c.key.name+"' has already been declared"))}return this.strict=i,this.next(),t.body=this.finishNode(s,"ClassBody"),this.exitClassBody(),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")};L.parseClassElement=function(t){if(this.eat(h.semi))return null;var e=this.options.ecmaVersion,i=this.startNode(),o="",s=!1,r=!1,c="method",p=!1;if(this.eatContextual("static")){if(e>=13&&this.eat(h.braceL))return this.parseClassStaticBlock(i),i;this.isClassElementNameStart()||this.type===h.star?p=!0:o="static"}if(i.static=p,!o&&e>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===h.star)&&!this.canInsertSemicolon()?r=!0:o="async"),!o&&(e>=9||!r)&&this.eat(h.star)&&(s=!0),!o&&!r&&!s){var f=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?c=f:o=f)}if(o?(i.computed=!1,i.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),i.key.name=o,this.finishNode(i.key,"Identifier")):this.parseClassElementName(i),e<13||this.type===h.parenL||c!=="method"||s||r){var m=!i.static&&v0(i,"constructor"),_=m&&t;m&&c!=="method"&&this.raise(i.key.start,"Constructor can't have get/set modifier"),i.kind=m?"constructor":c,this.parseClassMethod(i,s,r,_)}else this.parseClassField(i);return i};L.isClassElementNameStart=function(){return this.type===h.name||this.type===h.privateId||this.type===h.num||this.type===h.string||this.type===h.bracketL||this.type.keyword};L.parseClassElementName=function(t){this.type===h.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),t.computed=!1,t.key=this.parsePrivateIdent()):this.parsePropertyName(t)};L.parseClassMethod=function(t,e,i,o){var s=t.key;t.kind==="constructor"?(e&&this.raise(s.start,"Constructor can't be a generator"),i&&this.raise(s.start,"Constructor can't be an async method")):t.static&&v0(t,"prototype")&&this.raise(s.start,"Classes may not have a static property named prototype");var r=t.value=this.parseMethod(e,i,o);return t.kind==="get"&&r.params.length!==0&&this.raiseRecoverable(r.start,"getter should have no params"),t.kind==="set"&&r.params.length!==1&&this.raiseRecoverable(r.start,"setter should have exactly one param"),t.kind==="set"&&r.params[0].type==="RestElement"&&this.raiseRecoverable(r.params[0].start,"Setter cannot use rest params"),this.finishNode(t,"MethodDefinition")};L.parseClassField=function(t){if(v0(t,"constructor")?this.raise(t.key.start,"Classes can't have a field named 'constructor'"):t.static&&v0(t,"prototype")&&this.raise(t.key.start,"Classes can't have a static field named 'prototype'"),this.eat(h.eq)){var e=this.currentThisScope(),i=e.inClassFieldInit;e.inClassFieldInit=!0,t.value=this.parseMaybeAssign(),e.inClassFieldInit=i}else t.value=null;return this.semicolon(),this.finishNode(t,"PropertyDefinition")};L.parseClassStaticBlock=function(t){t.body=[];var e=this.labels;for(this.labels=[],this.enterScope(rh|ex);this.type!==h.braceR;){var i=this.parseStatement(null);t.body.push(i)}return this.next(),this.exitScope(),this.labels=e,this.finishNode(t,"StaticBlock")};L.parseClassId=function(t,e){this.type===h.name?(t.id=this.parseIdent(),e&&this.checkLValSimple(t.id,Ci,!1)):(e===!0&&this.unexpected(),t.id=null)};L.parseClassSuper=function(t){t.superClass=this.eat(h._extends)?this.parseExprSubscripts(null,!1):null};L.enterClassBody=function(){var t={declared:Object.create(null),used:[]};return this.privateNameStack.push(t),t.declared};L.exitClassBody=function(){var t=this.privateNameStack.pop(),e=t.declared,i=t.used;if(!!this.options.checkPrivateFields)for(var o=this.privateNameStack.length,s=o===0?null:this.privateNameStack[o-1],r=0;r<i.length;++r){var c=i[r];sh(e,c.name)||(s?s.used.push(c):this.raiseRecoverable(c.start,"Private field '#"+c.name+"' must be declared in an enclosing class"))}};function kS(t,e){var i=e.key.name,o=t[i],s="true";return e.type==="MethodDefinition"&&(e.kind==="get"||e.kind==="set")&&(s=(e.static?"s":"i")+e.kind),o==="iget"&&s==="iset"||o==="iset"&&s==="iget"||o==="sget"&&s==="sset"||o==="sset"&&s==="sget"?(t[i]="true",!1):o?!0:(t[i]=s,!1)}n(kS,"isPrivateNameConflicted");function v0(t,e){var i=t.computed,o=t.key;return!i&&(o.type==="Identifier"&&o.name===e||o.type==="Literal"&&o.value===e)}n(v0,"checkKeyName");L.parseExportAllDeclaration=function(t,e){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(t.exported=this.parseModuleExportName(),this.checkExport(e,t.exported,this.lastTokStart)):t.exported=null),this.expectContextual("from"),this.type!==h.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration")};L.parseExport=function(t,e){if(this.next(),this.eat(h.star))return this.parseExportAllDeclaration(t,e);if(this.eat(h._default))return this.checkExport(e,"default",this.lastTokStart),t.declaration=this.parseExportDefaultDeclaration(),this.finishNode(t,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())t.declaration=this.parseExportDeclaration(t),t.declaration.type==="VariableDeclaration"?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==h.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var i=0,o=t.specifiers;i<o.length;i+=1){var s=o[i];this.checkUnreserved(s.local),this.checkLocalExport(s.local),s.local.type==="Literal"&&this.raise(s.local.start,"A string literal cannot be used as an exported binding without `from`.")}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")};L.parseExportDeclaration=function(t){return this.parseStatement(null)};L.parseExportDefaultDeclaration=function(){var t;if(this.type===h._function||(t=this.isAsyncFunction())){var e=this.startNode();return this.next(),t&&this.next(),this.parseFunction(e,ih|KT,!1,t)}else if(this.type===h._class){var i=this.startNode();return this.parseClass(i,"nullableID")}else{var o=this.parseMaybeAssign();return this.semicolon(),o}};L.checkExport=function(t,e,i){!t||(typeof e!="string"&&(e=e.type==="Identifier"?e.name:e.value),sh(t,e)&&this.raiseRecoverable(i,"Duplicate export '"+e+"'"),t[e]=!0)};L.checkPatternExport=function(t,e){var i=e.type;if(i==="Identifier")this.checkExport(t,e,e.start);else if(i==="ObjectPattern")for(var o=0,s=e.properties;o<s.length;o+=1){var r=s[o];this.checkPatternExport(t,r)}else if(i==="ArrayPattern")for(var c=0,p=e.elements;c<p.length;c+=1){var f=p[c];f&&this.checkPatternExport(t,f)}else i==="Property"?this.checkPatternExport(t,e.value):i==="AssignmentPattern"?this.checkPatternExport(t,e.left):i==="RestElement"?this.checkPatternExport(t,e.argument):i==="ParenthesizedExpression"&&this.checkPatternExport(t,e.expression)};L.checkVariableExport=function(t,e){if(!!t)for(var i=0,o=e;i<o.length;i+=1){var s=o[i];this.checkPatternExport(t,s.id)}};L.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};L.parseExportSpecifier=function(t){var e=this.startNode();return e.local=this.parseModuleExportName(),e.exported=this.eatContextual("as")?this.parseModuleExportName():e.local,this.checkExport(t,e.exported,e.exported.start),this.finishNode(e,"ExportSpecifier")};L.parseExportSpecifiers=function(t){var e=[],i=!0;for(this.expect(h.braceL);!this.eat(h.braceR);){if(i)i=!1;else if(this.expect(h.comma),this.afterTrailingComma(h.braceR))break;e.push(this.parseExportSpecifier(t))}return e};L.parseImport=function(t){return this.next(),this.type===h.string?(t.specifiers=IS,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===h.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")};L.parseImportSpecifier=function(){var t=this.startNode();return t.imported=this.parseModuleExportName(),this.eatContextual("as")?t.local=this.parseIdent():(this.checkUnreserved(t.imported),t.local=t.imported),this.checkLValSimple(t.local,Ci),this.finishNode(t,"ImportSpecifier")};L.parseImportDefaultSpecifier=function(){var t=this.startNode();return t.local=this.parseIdent(),this.checkLValSimple(t.local,Ci),this.finishNode(t,"ImportDefaultSpecifier")};L.parseImportNamespaceSpecifier=function(){var t=this.startNode();return this.next(),this.expectContextual("as"),t.local=this.parseIdent(),this.checkLValSimple(t.local,Ci),this.finishNode(t,"ImportNamespaceSpecifier")};L.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===h.name&&(t.push(this.parseImportDefaultSpecifier()),!this.eat(h.comma)))return t;if(this.type===h.star)return t.push(this.parseImportNamespaceSpecifier()),t;for(this.expect(h.braceL);!this.eat(h.braceR);){if(e)e=!1;else if(this.expect(h.comma),this.afterTrailingComma(h.braceR))break;t.push(this.parseImportSpecifier())}return t};L.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===h.string){var t=this.parseLiteral(this.value);return bS.test(t.value)&&this.raise(t.start,"An export name cannot include a lone surrogate."),t}return this.parseIdent(!0)};L.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)};L.isDirectiveCandidate=function(t){return this.options.ecmaVersion>=5&&t.type==="ExpressionStatement"&&t.expression.type==="Literal"&&typeof t.expression.value=="string"&&(this.input[t.start]==='"'||this.input[t.start]==="'")};var At=Be.prototype;At.toAssignable=function(t,e,i){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&t.name==="await"&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",i&&this.checkPatternErrors(i,!0);for(var o=0,s=t.properties;o<s.length;o+=1){var r=s[o];this.toAssignable(r,e),r.type==="RestElement"&&(r.argument.type==="ArrayPattern"||r.argument.type==="ObjectPattern")&&this.raise(r.argument.start,"Unexpected token")}break;case"Property":t.kind!=="init"&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",i&&this.checkPatternErrors(i,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),t.argument.type==="AssignmentPattern"&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":t.operator!=="="&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);break;case"ParenthesizedExpression":this.toAssignable(t.expression,e,i);break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else i&&this.checkPatternErrors(i,!0);return t};At.toAssignableList=function(t,e){for(var i=t.length,o=0;o<i;o++){var s=t[o];s&&this.toAssignable(s,e)}if(i){var r=t[i-1];this.options.ecmaVersion===6&&e&&r&&r.type==="RestElement"&&r.argument.type!=="Identifier"&&this.unexpected(r.argument.start)}return t};At.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")};At.parseRestBinding=function(){var t=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==h.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")};At.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case h.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(h.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case h.braceL:return this.parseObj(!0)}return this.parseIdent()};At.parseBindingList=function(t,e,i,o){for(var s=[],r=!0;!this.eat(t);)if(r?r=!1:this.expect(h.comma),e&&this.type===h.comma)s.push(null);else{if(i&&this.afterTrailingComma(t))break;if(this.type===h.ellipsis){var c=this.parseRestBinding();this.parseBindingListItem(c),s.push(c),this.type===h.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}else s.push(this.parseAssignableListItem(o))}return s};At.parseAssignableListItem=function(t){var e=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(e),e};At.parseBindingListItem=function(t){return t};At.parseMaybeDefault=function(t,e,i){if(i=i||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(h.eq))return i;var o=this.startNodeAt(t,e);return o.left=i,o.right=this.parseMaybeAssign(),this.finishNode(o,"AssignmentPattern")};At.checkLValSimple=function(t,e,i){e===void 0&&(e=_0);var o=e!==_0;switch(t.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(o?"Binding ":"Assigning to ")+t.name+" in strict mode"),o&&(e===Ci&&t.name==="let"&&this.raiseRecoverable(t.start,"let is disallowed as a lexically bound name"),i&&(sh(i,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),i[t.name]=!0),e!==zT&&this.declareName(t.name,e,t.start));break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":o&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ParenthesizedExpression":return o&&this.raiseRecoverable(t.start,"Binding parenthesized expression"),this.checkLValSimple(t.expression,e,i);default:this.raise(t.start,(o?"Binding":"Assigning to")+" rvalue")}};At.checkLValPattern=function(t,e,i){switch(e===void 0&&(e=_0),t.type){case"ObjectPattern":for(var o=0,s=t.properties;o<s.length;o+=1){var r=s[o];this.checkLValInnerPattern(r,e,i)}break;case"ArrayPattern":for(var c=0,p=t.elements;c<p.length;c+=1){var f=p[c];f&&this.checkLValInnerPattern(f,e,i)}break;default:this.checkLValSimple(t,e,i)}};At.checkLValInnerPattern=function(t,e,i){switch(e===void 0&&(e=_0),t.type){case"Property":this.checkLValInnerPattern(t.value,e,i);break;case"AssignmentPattern":this.checkLValPattern(t.left,e,i);break;case"RestElement":this.checkLValPattern(t.argument,e,i);break;default:this.checkLValPattern(t,e,i)}};var Yt=n(function(e,i,o,s,r){this.token=e,this.isExpr=!!i,this.preserveSpace=!!o,this.override=s,this.generator=!!r},"TokContext"),ke={b_stat:new Yt("{",!1),b_expr:new Yt("{",!0),b_tmpl:new Yt("${",!1),p_stat:new Yt("(",!1),p_expr:new Yt("(",!0),q_tmpl:new Yt("`",!0,!0,function(t){return t.tryReadTemplateToken()}),f_stat:new Yt("function",!1),f_expr:new Yt("function",!0),f_expr_gen:new Yt("function",!0,!1,null,!0),f_gen:new Yt("function",!1,!1,null,!0)},hr=Be.prototype;hr.initialContext=function(){return[ke.b_stat]};hr.curContext=function(){return this.context[this.context.length-1]};hr.braceIsBlock=function(t){var e=this.curContext();return e===ke.f_expr||e===ke.f_stat?!0:t===h.colon&&(e===ke.b_stat||e===ke.b_expr)?!e.isExpr:t===h._return||t===h.name&&this.exprAllowed?Nt.test(this.input.slice(this.lastTokEnd,this.start)):t===h._else||t===h.semi||t===h.eof||t===h.parenR||t===h.arrow?!0:t===h.braceL?e===ke.b_stat:t===h._var||t===h._const||t===h.name?!1:!this.exprAllowed};hr.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if(e.token==="function")return e.generator}return!1};hr.updateContext=function(t){var e,i=this.type;i.keyword&&t===h.dot?this.exprAllowed=!1:(e=i.updateContext)?e.call(this,t):this.exprAllowed=i.beforeExpr};hr.overrideContext=function(t){this.curContext()!==t&&(this.context[this.context.length-1]=t)};h.parenR.updateContext=h.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var t=this.context.pop();t===ke.b_stat&&this.curContext().token==="function"&&(t=this.context.pop()),this.exprAllowed=!t.isExpr};h.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?ke.b_stat:ke.b_expr),this.exprAllowed=!0};h.dollarBraceL.updateContext=function(){this.context.push(ke.b_tmpl),this.exprAllowed=!0};h.parenL.updateContext=function(t){var e=t===h._if||t===h._for||t===h._with||t===h._while;this.context.push(e?ke.p_stat:ke.p_expr),this.exprAllowed=!0};h.incDec.updateContext=function(){};h._function.updateContext=h._class.updateContext=function(t){t.beforeExpr&&t!==h._else&&!(t===h.semi&&this.curContext()!==ke.p_stat)&&!(t===h._return&&Nt.test(this.input.slice(this.lastTokEnd,this.start)))&&!((t===h.colon||t===h.braceL)&&this.curContext()===ke.b_stat)?this.context.push(ke.f_expr):this.context.push(ke.f_stat),this.exprAllowed=!1};h.backQuote.updateContext=function(){this.curContext()===ke.q_tmpl?this.context.pop():this.context.push(ke.q_tmpl),this.exprAllowed=!1};h.star.updateContext=function(t){if(t===h._function){var e=this.context.length-1;this.context[e]===ke.f_expr?this.context[e]=ke.f_expr_gen:this.context[e]=ke.f_gen}this.exprAllowed=!0};h.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==h.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var G=Be.prototype;G.checkPropClash=function(t,e,i){if(!(this.options.ecmaVersion>=9&&t.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var o=t.key,s;switch(o.type){case"Identifier":s=o.name;break;case"Literal":s=String(o.value);break;default:return}var r=t.kind;if(this.options.ecmaVersion>=6){s==="__proto__"&&r==="init"&&(e.proto&&(i?i.doubleProto<0&&(i.doubleProto=o.start):this.raiseRecoverable(o.start,"Redefinition of __proto__ property")),e.proto=!0);return}s="$"+s;var c=e[s];if(c){var p;r==="init"?p=this.strict&&c.init||c.get||c.set:p=c.init||c[r],p&&this.raiseRecoverable(o.start,"Redefinition of property")}else c=e[s]={init:!1,get:!1,set:!1};c[r]=!0}};G.parseExpression=function(t,e){var i=this.start,o=this.startLoc,s=this.parseMaybeAssign(t,e);if(this.type===h.comma){var r=this.startNodeAt(i,o);for(r.expressions=[s];this.eat(h.comma);)r.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(r,"SequenceExpression")}return s};G.parseMaybeAssign=function(t,e,i){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var o=!1,s=-1,r=-1,c=-1;e?(s=e.parenthesizedAssign,r=e.trailingComma,c=e.doubleProto,e.parenthesizedAssign=e.trailingComma=-1):(e=new b0,o=!0);var p=this.start,f=this.startLoc;(this.type===h.parenL||this.type===h.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=t==="await");var m=this.parseMaybeConditional(t,e);if(i&&(m=i.call(this,m,p,f)),this.type.isAssign){var _=this.startNodeAt(p,f);return _.operator=this.value,this.type===h.eq&&(m=this.toAssignable(m,!1,e)),o||(e.parenthesizedAssign=e.trailingComma=e.doubleProto=-1),e.shorthandAssign>=m.start&&(e.shorthandAssign=-1),this.type===h.eq?this.checkLValPattern(m):this.checkLValSimple(m),_.left=m,this.next(),_.right=this.parseMaybeAssign(t),c>-1&&(e.doubleProto=c),this.finishNode(_,"AssignmentExpression")}else o&&this.checkExpressionErrors(e,!0);return s>-1&&(e.parenthesizedAssign=s),r>-1&&(e.trailingComma=r),m};G.parseMaybeConditional=function(t,e){var i=this.start,o=this.startLoc,s=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return s;if(this.eat(h.question)){var r=this.startNodeAt(i,o);return r.test=s,r.consequent=this.parseMaybeAssign(),this.expect(h.colon),r.alternate=this.parseMaybeAssign(t),this.finishNode(r,"ConditionalExpression")}return s};G.parseExprOps=function(t,e){var i=this.start,o=this.startLoc,s=this.parseMaybeUnary(e,!1,!1,t);return this.checkExpressionErrors(e)||s.start===i&&s.type==="ArrowFunctionExpression"?s:this.parseExprOp(s,i,o,-1,t)};G.parseExprOp=function(t,e,i,o,s){var r=this.type.binop;if(r!=null&&(!s||this.type!==h._in)&&r>o){var c=this.type===h.logicalOR||this.type===h.logicalAND,p=this.type===h.coalesce;p&&(r=h.logicalAND.binop);var f=this.value;this.next();var m=this.start,_=this.startLoc,b=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,s),m,_,r,s),w=this.buildBinary(e,i,t,b,f,c||p);return(c&&this.type===h.coalesce||p&&(this.type===h.logicalOR||this.type===h.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(w,e,i,o,s)}return t};G.buildBinary=function(t,e,i,o,s,r){o.type==="PrivateIdentifier"&&this.raise(o.start,"Private identifier can only be left side of binary expression");var c=this.startNodeAt(t,e);return c.left=i,c.operator=s,c.right=o,this.finishNode(c,r?"LogicalExpression":"BinaryExpression")};G.parseMaybeUnary=function(t,e,i,o){var s=this.start,r=this.startLoc,c;if(this.isContextual("await")&&this.canAwait)c=this.parseAwait(o),e=!0;else if(this.type.prefix){var p=this.startNode(),f=this.type===h.incDec;p.operator=this.value,p.prefix=!0,this.next(),p.argument=this.parseMaybeUnary(null,!0,f,o),this.checkExpressionErrors(t,!0),f?this.checkLValSimple(p.argument):this.strict&&p.operator==="delete"&&p.argument.type==="Identifier"?this.raiseRecoverable(p.start,"Deleting local variable in strict mode"):p.operator==="delete"&&$T(p.argument)?this.raiseRecoverable(p.start,"Private fields can not be deleted"):e=!0,c=this.finishNode(p,f?"UpdateExpression":"UnaryExpression")}else if(!e&&this.type===h.privateId)(o||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),c=this.parsePrivateIdent(),this.type!==h._in&&this.unexpected();else{if(c=this.parseExprSubscripts(t,o),this.checkExpressionErrors(t))return c;for(;this.type.postfix&&!this.canInsertSemicolon();){var m=this.startNodeAt(s,r);m.operator=this.value,m.prefix=!1,m.argument=c,this.checkLValSimple(c),this.next(),c=this.finishNode(m,"UpdateExpression")}}if(!i&&this.eat(h.starstar))if(e)this.unexpected(this.lastTokStart);else return this.buildBinary(s,r,c,this.parseMaybeUnary(null,!1,!1,o),"**",!1);else return c};function $T(t){return t.type==="MemberExpression"&&t.property.type==="PrivateIdentifier"||t.type==="ChainExpression"&&$T(t.expression)}n($T,"isPrivateFieldAccess");G.parseExprSubscripts=function(t,e){var i=this.start,o=this.startLoc,s=this.parseExprAtom(t,e);if(s.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return s;var r=this.parseSubscripts(s,i,o,!1,e);return t&&r.type==="MemberExpression"&&(t.parenthesizedAssign>=r.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=r.start&&(t.parenthesizedBind=-1),t.trailingComma>=r.start&&(t.trailingComma=-1)),r};G.parseSubscripts=function(t,e,i,o,s){for(var r=this.options.ecmaVersion>=8&&t.type==="Identifier"&&t.name==="async"&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&t.end-t.start===5&&this.potentialArrowAt===t.start,c=!1;;){var p=this.parseSubscript(t,e,i,o,r,c,s);if(p.optional&&(c=!0),p===t||p.type==="ArrowFunctionExpression"){if(c){var f=this.startNodeAt(e,i);f.expression=p,p=this.finishNode(f,"ChainExpression")}return p}t=p}};G.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(h.arrow)};G.parseSubscriptAsyncArrow=function(t,e,i,o){return this.parseArrowExpression(this.startNodeAt(t,e),i,!0,o)};G.parseSubscript=function(t,e,i,o,s,r,c){var p=this.options.ecmaVersion>=11,f=p&&this.eat(h.questionDot);o&&f&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var m=this.eat(h.bracketL);if(m||f&&this.type!==h.parenL&&this.type!==h.backQuote||this.eat(h.dot)){var _=this.startNodeAt(e,i);_.object=t,m?(_.property=this.parseExpression(),this.expect(h.bracketR)):this.type===h.privateId&&t.type!=="Super"?_.property=this.parsePrivateIdent():_.property=this.parseIdent(this.options.allowReserved!=="never"),_.computed=!!m,p&&(_.optional=f),t=this.finishNode(_,"MemberExpression")}else if(!o&&this.eat(h.parenL)){var b=new b0,w=this.yieldPos,T=this.awaitPos,I=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var C=this.parseExprList(h.parenR,this.options.ecmaVersion>=8,!1,b);if(s&&!f&&this.shouldParseAsyncArrow())return this.checkPatternErrors(b,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=w,this.awaitPos=T,this.awaitIdentPos=I,this.parseSubscriptAsyncArrow(e,i,C,c);this.checkExpressionErrors(b,!0),this.yieldPos=w||this.yieldPos,this.awaitPos=T||this.awaitPos,this.awaitIdentPos=I||this.awaitIdentPos;var P=this.startNodeAt(e,i);P.callee=t,P.arguments=C,p&&(P.optional=f),t=this.finishNode(P,"CallExpression")}else if(this.type===h.backQuote){(f||r)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var R=this.startNodeAt(e,i);R.tag=t,R.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(R,"TaggedTemplateExpression")}return t};G.parseExprAtom=function(t,e,i){this.type===h.slash&&this.readRegexp();var o,s=this.potentialArrowAt===this.start;switch(this.type){case h._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),o=this.startNode(),this.next(),this.type===h.parenL&&!this.allowDirectSuper&&this.raise(o.start,"super() call outside constructor of a subclass"),this.type!==h.dot&&this.type!==h.bracketL&&this.type!==h.parenL&&this.unexpected(),this.finishNode(o,"Super");case h._this:return o=this.startNode(),this.next(),this.finishNode(o,"ThisExpression");case h.name:var r=this.start,c=this.startLoc,p=this.containsEsc,f=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!p&&f.name==="async"&&!this.canInsertSemicolon()&&this.eat(h._function))return this.overrideContext(ke.f_expr),this.parseFunction(this.startNodeAt(r,c),0,!1,!0,e);if(s&&!this.canInsertSemicolon()){if(this.eat(h.arrow))return this.parseArrowExpression(this.startNodeAt(r,c),[f],!1,e);if(this.options.ecmaVersion>=8&&f.name==="async"&&this.type===h.name&&!p&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return f=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(h.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,c),[f],!0,e)}return f;case h.regexp:var m=this.value;return o=this.parseLiteral(m.value),o.regex={pattern:m.pattern,flags:m.flags},o;case h.num:case h.string:return this.parseLiteral(this.value);case h._null:case h._true:case h._false:return o=this.startNode(),o.value=this.type===h._null?null:this.type===h._true,o.raw=this.type.keyword,this.next(),this.finishNode(o,"Literal");case h.parenL:var _=this.start,b=this.parseParenAndDistinguishExpression(s,e);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(b)&&(t.parenthesizedAssign=_),t.parenthesizedBind<0&&(t.parenthesizedBind=_)),b;case h.bracketL:return o=this.startNode(),this.next(),o.elements=this.parseExprList(h.bracketR,!0,!0,t),this.finishNode(o,"ArrayExpression");case h.braceL:return this.overrideContext(ke.b_expr),this.parseObj(!1,t);case h._function:return o=this.startNode(),this.next(),this.parseFunction(o,0);case h._class:return this.parseClass(this.startNode(),!1);case h._new:return this.parseNew();case h.backQuote:return this.parseTemplate();case h._import:return this.options.ecmaVersion>=11?this.parseExprImport(i):this.unexpected();default:return this.parseExprAtomDefault()}};G.parseExprAtomDefault=function(){this.unexpected()};G.parseExprImport=function(t){var e=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var i=this.parseIdent(!0);if(this.type===h.parenL&&!t)return this.parseDynamicImport(e);if(this.type===h.dot)return e.meta=i,this.parseImportMeta(e);this.unexpected()};G.parseDynamicImport=function(t){if(this.next(),t.source=this.parseMaybeAssign(),!this.eat(h.parenR)){var e=this.start;this.eat(h.comma)&&this.eat(h.parenR)?this.raiseRecoverable(e,"Trailing comma is not allowed in import()"):this.unexpected(e)}return this.finishNode(t,"ImportExpression")};G.parseImportMeta=function(t){this.next();var e=this.containsEsc;return t.property=this.parseIdent(!0),t.property.name!=="meta"&&this.raiseRecoverable(t.property.start,"The only valid meta property for import is 'import.meta'"),e&&this.raiseRecoverable(t.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(t.start,"Cannot use 'import.meta' outside a module"),this.finishNode(t,"MetaProperty")};G.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),e.raw.charCodeAt(e.raw.length-1)===110&&(e.bigint=e.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(e,"Literal")};G.parseParenExpression=function(){this.expect(h.parenL);var t=this.parseExpression();return this.expect(h.parenR),t};G.shouldParseArrow=function(t){return!this.canInsertSemicolon()};G.parseParenAndDistinguishExpression=function(t,e){var i=this.start,o=this.startLoc,s,r=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var c=this.start,p=this.startLoc,f=[],m=!0,_=!1,b=new b0,w=this.yieldPos,T=this.awaitPos,I;for(this.yieldPos=0,this.awaitPos=0;this.type!==h.parenR;)if(m?m=!1:this.expect(h.comma),r&&this.afterTrailingComma(h.parenR,!0)){_=!0;break}else if(this.type===h.ellipsis){I=this.start,f.push(this.parseParenItem(this.parseRestBinding())),this.type===h.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else f.push(this.parseMaybeAssign(!1,b,this.parseParenItem));var C=this.lastTokEnd,P=this.lastTokEndLoc;if(this.expect(h.parenR),t&&this.shouldParseArrow(f)&&this.eat(h.arrow))return this.checkPatternErrors(b,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=w,this.awaitPos=T,this.parseParenArrowList(i,o,f,e);(!f.length||_)&&this.unexpected(this.lastTokStart),I&&this.unexpected(I),this.checkExpressionErrors(b,!0),this.yieldPos=w||this.yieldPos,this.awaitPos=T||this.awaitPos,f.length>1?(s=this.startNodeAt(c,p),s.expressions=f,this.finishNodeAt(s,"SequenceExpression",C,P)):s=f[0]}else s=this.parseParenExpression();if(this.options.preserveParens){var R=this.startNodeAt(i,o);return R.expression=s,this.finishNode(R,"ParenthesizedExpression")}else return s};G.parseParenItem=function(t){return t};G.parseParenArrowList=function(t,e,i,o){return this.parseArrowExpression(this.startNodeAt(t,e),i,!1,o)};var CS=[];G.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(h.dot)){t.meta=e;var i=this.containsEsc;return t.property=this.parseIdent(!0),t.property.name!=="target"&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is 'new.target'"),i&&this.raiseRecoverable(t.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(t.start,"'new.target' can only be used in functions and class static block"),this.finishNode(t,"MetaProperty")}var o=this.start,s=this.startLoc;return t.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),o,s,!0,!1),this.eat(h.parenL)?t.arguments=this.parseExprList(h.parenR,this.options.ecmaVersion>=8,!1):t.arguments=CS,this.finishNode(t,"NewExpression")};G.parseTemplateElement=function(t){var e=t.isTagged,i=this.startNode();return this.type===h.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),i.value={raw:this.value,cooked:null}):i.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),i.tail=this.type===h.backQuote,this.finishNode(i,"TemplateElement")};G.parseTemplate=function(t){t===void 0&&(t={});var e=t.isTagged;e===void 0&&(e=!1);var i=this.startNode();this.next(),i.expressions=[];var o=this.parseTemplateElement({isTagged:e});for(i.quasis=[o];!o.tail;)this.type===h.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(h.dollarBraceL),i.expressions.push(this.parseExpression()),this.expect(h.braceR),i.quasis.push(o=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(i,"TemplateLiteral")};G.isAsyncProp=function(t){return!t.computed&&t.key.type==="Identifier"&&t.key.name==="async"&&(this.type===h.name||this.type===h.num||this.type===h.string||this.type===h.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===h.star)&&!Nt.test(this.input.slice(this.lastTokEnd,this.start))};G.parseObj=function(t,e){var i=this.startNode(),o=!0,s={};for(i.properties=[],this.next();!this.eat(h.braceR);){if(o)o=!1;else if(this.expect(h.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(h.braceR))break;var r=this.parseProperty(t,e);t||this.checkPropClash(r,s,e),i.properties.push(r)}return this.finishNode(i,t?"ObjectPattern":"ObjectExpression")};G.parseProperty=function(t,e){var i=this.startNode(),o,s,r,c;if(this.options.ecmaVersion>=9&&this.eat(h.ellipsis))return t?(i.argument=this.parseIdent(!1),this.type===h.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(i,"RestElement")):(i.argument=this.parseMaybeAssign(!1,e),this.type===h.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(i,"SpreadElement"));this.options.ecmaVersion>=6&&(i.method=!1,i.shorthand=!1,(t||e)&&(r=this.start,c=this.startLoc),t||(o=this.eat(h.star)));var p=this.containsEsc;return this.parsePropertyName(i),!t&&!p&&this.options.ecmaVersion>=8&&!o&&this.isAsyncProp(i)?(s=!0,o=this.options.ecmaVersion>=9&&this.eat(h.star),this.parsePropertyName(i)):s=!1,this.parsePropertyValue(i,t,o,s,r,c,e,p),this.finishNode(i,"Property")};G.parseGetterSetter=function(t){t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var e=t.kind==="get"?0:1;if(t.value.params.length!==e){var i=t.value.start;t.kind==="get"?this.raiseRecoverable(i,"getter should have no params"):this.raiseRecoverable(i,"setter should have exactly one param")}else t.kind==="set"&&t.value.params[0].type==="RestElement"&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")};G.parsePropertyValue=function(t,e,i,o,s,r,c,p){(i||o)&&this.type===h.colon&&this.unexpected(),this.eat(h.colon)?(t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,c),t.kind="init"):this.options.ecmaVersion>=6&&this.type===h.parenL?(e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(i,o)):!e&&!p&&this.options.ecmaVersion>=5&&!t.computed&&t.key.type==="Identifier"&&(t.key.name==="get"||t.key.name==="set")&&this.type!==h.comma&&this.type!==h.braceR&&this.type!==h.eq?((i||o)&&this.unexpected(),this.parseGetterSetter(t)):this.options.ecmaVersion>=6&&!t.computed&&t.key.type==="Identifier"?((i||o)&&this.unexpected(),this.checkUnreserved(t.key),t.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=s),t.kind="init",e?t.value=this.parseMaybeDefault(s,r,this.copyNode(t.key)):this.type===h.eq&&c?(c.shorthandAssign<0&&(c.shorthandAssign=this.start),t.value=this.parseMaybeDefault(s,r,this.copyNode(t.key))):t.value=this.copyNode(t.key),t.shorthand=!0):this.unexpected()};G.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(h.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(h.bracketR),t.key;t.computed=!1}return t.key=this.type===h.num||this.type===h.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};G.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)};G.parseMethod=function(t,e,i){var o=this.startNode(),s=this.yieldPos,r=this.awaitPos,c=this.awaitIdentPos;return this.initFunction(o),this.options.ecmaVersion>=6&&(o.generator=t),this.options.ecmaVersion>=8&&(o.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(ix(e,o.generator)|ex|(i?HT:0)),this.expect(h.parenL),o.params=this.parseBindingList(h.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(o,!1,!0,!1),this.yieldPos=s,this.awaitPos=r,this.awaitIdentPos=c,this.finishNode(o,"FunctionExpression")};G.parseArrowExpression=function(t,e,i,o){var s=this.yieldPos,r=this.awaitPos,c=this.awaitIdentPos;return this.enterScope(ix(i,!1)|UT),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!i),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1,o),this.yieldPos=s,this.awaitPos=r,this.awaitIdentPos=c,this.finishNode(t,"ArrowFunctionExpression")};G.parseFunctionBody=function(t,e,i,o){var s=e&&this.type!==h.braceL,r=this.strict,c=!1;if(s)t.body=this.parseMaybeAssign(o),t.expression=!0,this.checkParams(t,!1);else{var p=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);(!r||p)&&(c=this.strictDirective(this.end),c&&p&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var f=this.labels;this.labels=[],c&&(this.strict=!0),this.checkParams(t,!r&&!c&&!e&&!i&&this.isSimpleParamList(t.params)),this.strict&&t.id&&this.checkLValSimple(t.id,zT),t.body=this.parseBlock(!1,void 0,c&&!r),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=f}this.exitScope()};G.isSimpleParamList=function(t){for(var e=0,i=t;e<i.length;e+=1){var o=i[e];if(o.type!=="Identifier")return!1}return!0};G.checkParams=function(t,e){for(var i=Object.create(null),o=0,s=t.params;o<s.length;o+=1){var r=s[o];this.checkLValInnerPattern(r,ox,e?null:i)}};G.parseExprList=function(t,e,i,o){for(var s=[],r=!0;!this.eat(t);){if(r)r=!1;else if(this.expect(h.comma),e&&this.afterTrailingComma(t))break;var c=void 0;i&&this.type===h.comma?c=null:this.type===h.ellipsis?(c=this.parseSpread(o),o&&this.type===h.comma&&o.trailingComma<0&&(o.trailingComma=this.start)):c=this.parseMaybeAssign(!1,o),s.push(c)}return s};G.checkUnreserved=function(t){var e=t.start,i=t.end,o=t.name;if(this.inGenerator&&o==="yield"&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&o==="await"&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&o==="arguments"&&this.raiseRecoverable(e,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(o==="arguments"||o==="await")&&this.raise(e,"Cannot use "+o+" in class static initialization block"),this.keywords.test(o)&&this.raise(e,"Unexpected keyword '"+o+"'"),!(this.options.ecmaVersion<6&&this.input.slice(e,i).indexOf("\\")!==-1)){var s=this.strict?this.reservedWordsStrict:this.reservedWords;s.test(o)&&(!this.inAsync&&o==="await"&&this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+o+"' is reserved"))}};G.parseIdent=function(t){var e=this.parseIdentNode();return this.next(!!t),this.finishNode(e,"Identifier"),t||(this.checkUnreserved(e),e.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=e.start)),e};G.parseIdentNode=function(){var t=this.startNode();return this.type===h.name?t.name=this.value:this.type.keyword?(t.name=this.type.keyword,(t.name==="class"||t.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop()):this.unexpected(),t};G.parsePrivateIdent=function(){var t=this.startNode();return this.type===h.privateId?t.name=this.value:this.unexpected(),this.next(),this.finishNode(t,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(t.start,"Private field '#"+t.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(t)),t};G.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===h.semi||this.canInsertSemicolon()||this.type!==h.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(h.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")};G.parseAwait=function(t){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0,!1,t),this.finishNode(e,"AwaitExpression")};var g0=Be.prototype;g0.raise=function(t,e){var i=YT(this.input,t);e+=" ("+i.line+":"+i.column+")";var o=new SyntaxError(e);throw o.pos=t,o.loc=i,o.raisedAt=this.pos,o};g0.raiseRecoverable=g0.raise;g0.curPosition=function(){if(this.options.locations)return new oh(this.curLine,this.pos-this.lineStart)};var so=Be.prototype,ES=n(function(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1},"Scope");so.enterScope=function(t){this.scopeStack.push(new ES(t))};so.exitScope=function(){this.scopeStack.pop()};so.treatFunctionsAsVarInScope=function(t){return t.flags&fr||!this.inModule&&t.flags&nh};so.declareName=function(t,e,i){var o=!1;if(e===Ci){var s=this.currentScope();o=s.lexical.indexOf(t)>-1||s.functions.indexOf(t)>-1||s.var.indexOf(t)>-1,s.lexical.push(t),this.inModule&&s.flags&nh&&delete this.undefinedExports[t]}else if(e===GT){var r=this.currentScope();r.lexical.push(t)}else if(e===JT){var c=this.currentScope();this.treatFunctionsAsVar?o=c.lexical.indexOf(t)>-1:o=c.lexical.indexOf(t)>-1||c.var.indexOf(t)>-1,c.functions.push(t)}else for(var p=this.scopeStack.length-1;p>=0;--p){var f=this.scopeStack[p];if(f.lexical.indexOf(t)>-1&&!(f.flags&WT&&f.lexical[0]===t)||!this.treatFunctionsAsVarInScope(f)&&f.functions.indexOf(t)>-1){o=!0;break}if(f.var.push(t),this.inModule&&f.flags&nh&&delete this.undefinedExports[t],f.flags&tx)break}o&&this.raiseRecoverable(i,"Identifier '"+t+"' has already been declared")};so.checkLocalExport=function(t){this.scopeStack[0].lexical.indexOf(t.name)===-1&&this.scopeStack[0].var.indexOf(t.name)===-1&&(this.undefinedExports[t.name]=t)};so.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};so.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&tx)return e}};so.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&tx&&!(e.flags&UT))return e}};var y0=n(function(e,i,o){this.type="",this.start=i,this.end=0,e.options.locations&&(this.loc=new x0(e,o)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[i,0])},"Node"),ah=Be.prototype;ah.startNode=function(){return new y0(this,this.start,this.startLoc)};ah.startNodeAt=function(t,e){return new y0(this,t,e)};function qT(t,e,i,o){return t.type=e,t.end=i,this.options.locations&&(t.loc.end=o),this.options.ranges&&(t.range[1]=i),t}n(qT,"finishNodeAt");ah.finishNode=function(t,e){return qT.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)};ah.finishNodeAt=function(t,e,i,o){return qT.call(this,t,e,i,o)};ah.copyNode=function(t){var e=new y0(this,t.start,this.startLoc);for(var i in t)e[i]=t[i];return e};var XT="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",QT=XT+" Extended_Pictographic",ZT=QT,e1=ZT+" EBase EComp EMod EPres ExtPict",t1=e1,PS=t1,NS={9:XT,10:QT,11:ZT,12:e1,13:t1,14:PS},AS="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",RS={9:"",10:"",11:"",12:"",13:"",14:AS},MT="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",i1="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",o1=i1+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",n1=o1+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",s1=n1+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",r1=s1+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",MS=r1+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",VS={9:i1,10:o1,11:n1,12:s1,13:r1,14:MS},a1={};function OS(t){var e=a1[t]={binary:oo(NS[t]+" "+MT),binaryOfStrings:oo(RS[t]),nonBinary:{General_Category:oo(MT),Script:oo(VS[t])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}n(OS,"buildUnicodeData");for(m0=0,Kg=[9,10,11,12,13,14];m0<Kg.length;m0+=1)VT=Kg[m0],OS(VT);var VT,m0,Kg,D=Be.prototype,ci=n(function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":"")+(e.options.ecmaVersion>=13?"d":"")+(e.options.ecmaVersion>=15?"v":""),this.unicodeProperties=a1[e.options.ecmaVersion>=14?14:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]},"RegExpValidationState");ci.prototype.reset=n(function(e,i,o){var s=o.indexOf("v")!==-1,r=o.indexOf("u")!==-1;this.start=e|0,this.source=i+"",this.flags=o,s&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=r&&this.parser.options.ecmaVersion>=9)},"reset");ci.prototype.raise=n(function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)},"raise");ci.prototype.at=n(function(e,i){i===void 0&&(i=!1);var o=this.source,s=o.length;if(e>=s)return-1;var r=o.charCodeAt(e);if(!(i||this.switchU)||r<=55295||r>=57344||e+1>=s)return r;var c=o.charCodeAt(e+1);return c>=56320&&c<=57343?(r<<10)+c-56613888:r},"at");ci.prototype.nextIndex=n(function(e,i){i===void 0&&(i=!1);var o=this.source,s=o.length;if(e>=s)return s;var r=o.charCodeAt(e),c;return!(i||this.switchU)||r<=55295||r>=57344||e+1>=s||(c=o.charCodeAt(e+1))<56320||c>57343?e+1:e+2},"nextIndex");ci.prototype.current=n(function(e){return e===void 0&&(e=!1),this.at(this.pos,e)},"current");ci.prototype.lookahead=n(function(e){return e===void 0&&(e=!1),this.at(this.nextIndex(this.pos,e),e)},"lookahead");ci.prototype.advance=n(function(e){e===void 0&&(e=!1),this.pos=this.nextIndex(this.pos,e)},"advance");ci.prototype.eat=n(function(e,i){return i===void 0&&(i=!1),this.current(i)===e?(this.advance(i),!0):!1},"eat");ci.prototype.eatChars=n(function(e,i){i===void 0&&(i=!1);for(var o=this.pos,s=0,r=e;s<r.length;s+=1){var c=r[s],p=this.at(o,i);if(p===-1||p!==c)return!1;o=this.nextIndex(o,i)}return this.pos=o,!0},"eatChars");D.validateRegExpFlags=function(t){for(var e=t.validFlags,i=t.flags,o=!1,s=!1,r=0;r<i.length;r++){var c=i.charAt(r);e.indexOf(c)===-1&&this.raise(t.start,"Invalid regular expression flag"),i.indexOf(c,r+1)>-1&&this.raise(t.start,"Duplicate regular expression flag"),c==="u"&&(o=!0),c==="v"&&(s=!0)}this.options.ecmaVersion>=15&&o&&s&&this.raise(t.start,"Invalid regular expression flag")};D.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))};D.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,i=t.backReferenceNames;e<i.length;e+=1){var o=i[e];t.groupNames.indexOf(o)===-1&&t.raise("Invalid named capture referenced")}};D.regexp_disjunction=function(t){for(this.regexp_alternative(t);t.eat(124);)this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")};D.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););};D.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):(t.switchU?this.regexp_eatAtom(t):this.regexp_eatExtendedAtom(t))?(this.regexp_eatQuantifier(t),!0):!1};D.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var i=!1;if(this.options.ecmaVersion>=9&&(i=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!i,!0}return t.pos=e,!1};D.regexp_eatQuantifier=function(t,e){return e===void 0&&(e=!1),this.regexp_eatQuantifierPrefix(t,e)?(t.eat(63),!0):!1};D.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)};D.regexp_eatBracedQuantifier=function(t,e){var i=t.pos;if(t.eat(123)){var o=0,s=-1;if(this.regexp_eatDecimalDigits(t)&&(o=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(s=t.lastIntValue),t.eat(125)))return s!==-1&&s<o&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=i}return!1};D.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)};D.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1};D.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=e}return!1};D.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):t.current()===63&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1};D.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)};D.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1};D.regexp_eatSyntaxCharacter=function(t){var e=t.current();return u1(e)?(t.lastIntValue=e,t.advance(),!0):!1};function u1(t){return t===36||t>=40&&t<=43||t===46||t===63||t>=91&&t<=94||t>=123&&t<=125}n(u1,"isSyntaxCharacter");D.regexp_eatPatternCharacters=function(t){for(var e=t.pos,i=0;(i=t.current())!==-1&&!u1(i);)t.advance();return t.pos!==e};D.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return e!==-1&&e!==36&&!(e>=40&&e<=43)&&e!==46&&e!==63&&e!==91&&e!==94&&e!==124?(t.advance(),!0):!1};D.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t)){t.groupNames.indexOf(t.lastStringValue)!==-1&&t.raise("Duplicate capture group name"),t.groupNames.push(t.lastStringValue);return}t.raise("Invalid group")}};D.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1};D.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=no(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=no(t.lastIntValue);return!0}return!1};D.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,i=this.options.ecmaVersion>=11,o=t.current(i);return t.advance(i),o===92&&this.regexp_eatRegExpUnicodeEscapeSequence(t,i)&&(o=t.lastIntValue),DS(o)?(t.lastIntValue=o,!0):(t.pos=e,!1)};function DS(t){return Ii(t,!0)||t===36||t===95}n(DS,"isRegExpIdentifierStart");D.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,i=this.options.ecmaVersion>=11,o=t.current(i);return t.advance(i),o===92&&this.regexp_eatRegExpUnicodeEscapeSequence(t,i)&&(o=t.lastIntValue),BS(o)?(t.lastIntValue=o,!0):(t.pos=e,!1)};function BS(t){return dr(t,!0)||t===36||t===95||t===8204||t===8205}n(BS,"isRegExpIdentifierPart");D.regexp_eatAtomEscape=function(t){return this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t)?!0:(t.switchU&&(t.current()===99&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)};D.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var i=t.lastIntValue;if(t.switchU)return i>t.maxBackReference&&(t.maxBackReference=i),!0;if(i<=t.numCapturingParens)return!0;t.pos=e}return!1};D.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1};D.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t,!1)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)};D.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1};D.regexp_eatZero=function(t){return t.current()===48&&!w0(t.lookahead())?(t.lastIntValue=0,t.advance(),!0):!1};D.regexp_eatControlEscape=function(t){var e=t.current();return e===116?(t.lastIntValue=9,t.advance(),!0):e===110?(t.lastIntValue=10,t.advance(),!0):e===118?(t.lastIntValue=11,t.advance(),!0):e===102?(t.lastIntValue=12,t.advance(),!0):e===114?(t.lastIntValue=13,t.advance(),!0):!1};D.regexp_eatControlLetter=function(t){var e=t.current();return l1(e)?(t.lastIntValue=e%32,t.advance(),!0):!1};function l1(t){return t>=65&&t<=90||t>=97&&t<=122}n(l1,"isControlLetter");D.regexp_eatRegExpUnicodeEscapeSequence=function(t,e){e===void 0&&(e=!1);var i=t.pos,o=e||t.switchU;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var s=t.lastIntValue;if(o&&s>=55296&&s<=56319){var r=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var c=t.lastIntValue;if(c>=56320&&c<=57343)return t.lastIntValue=(s-55296)*1024+(c-56320)+65536,!0}t.pos=r,t.lastIntValue=s}return!0}if(o&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&LS(t.lastIntValue))return!0;o&&t.raise("Invalid unicode escape"),t.pos=i}return!1};function LS(t){return t>=0&&t<=1114111}n(LS,"isValidUnicode");D.regexp_eatIdentityEscape=function(t){if(t.switchU)return this.regexp_eatSyntaxCharacter(t)?!0:t.eat(47)?(t.lastIntValue=47,!0):!1;var e=t.current();return e!==99&&(!t.switchN||e!==107)?(t.lastIntValue=e,t.advance(),!0):!1};D.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do t.lastIntValue=10*t.lastIntValue+(e-48),t.advance();while((e=t.current())>=48&&e<=57);return!0}return!1};var c1=0,ki=1,Pt=2;D.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(FS(e))return t.lastIntValue=-1,t.advance(),ki;var i=!1;if(t.switchU&&this.options.ecmaVersion>=9&&((i=e===80)||e===112)){t.lastIntValue=-1,t.advance();var o;if(t.eat(123)&&(o=this.regexp_eatUnicodePropertyValueExpression(t))&&t.eat(125))return i&&o===Pt&&t.raise("Invalid property name"),o;t.raise("Invalid property name")}return c1};function FS(t){return t===100||t===68||t===115||t===83||t===119||t===87}n(FS,"isCharacterClassEscape");D.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var i=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var o=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,i,o),ki}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var s=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,s)}return c1};D.regexp_validateUnicodePropertyNameAndValue=function(t,e,i){sh(t.unicodeProperties.nonBinary,e)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[e].test(i)||t.raise("Invalid property value")};D.regexp_validateUnicodePropertyNameOrValue=function(t,e){if(t.unicodeProperties.binary.test(e))return ki;if(t.switchV&&t.unicodeProperties.binaryOfStrings.test(e))return Pt;t.raise("Invalid property name")};D.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";d1(e=t.current());)t.lastStringValue+=no(e),t.advance();return t.lastStringValue!==""};function d1(t){return l1(t)||t===95}n(d1,"isUnicodePropertyNameCharacter");D.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";YS(e=t.current());)t.lastStringValue+=no(e),t.advance();return t.lastStringValue!==""};function YS(t){return d1(t)||w0(t)}n(YS,"isUnicodePropertyValueCharacter");D.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)};D.regexp_eatCharacterClass=function(t){if(t.eat(91)){var e=t.eat(94),i=this.regexp_classContents(t);return t.eat(93)||t.raise("Unterminated character class"),e&&i===Pt&&t.raise("Negated character class may contain strings"),!0}return!1};D.regexp_classContents=function(t){return t.current()===93?ki:t.switchV?this.regexp_classSetExpression(t):(this.regexp_nonEmptyClassRanges(t),ki)};D.regexp_nonEmptyClassRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var i=t.lastIntValue;t.switchU&&(e===-1||i===-1)&&t.raise("Invalid character class"),e!==-1&&i!==-1&&e>i&&t.raise("Range out of order in character class")}}};D.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var i=t.current();(i===99||h1(i))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var o=t.current();return o!==93?(t.lastIntValue=o,t.advance(),!0):!1};D.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)};D.regexp_classSetExpression=function(t){var e=ki,i;if(!this.regexp_eatClassSetRange(t))if(i=this.regexp_eatClassSetOperand(t)){i===Pt&&(e=Pt);for(var o=t.pos;t.eatChars([38,38]);){if(t.current()!==38&&(i=this.regexp_eatClassSetOperand(t))){i!==Pt&&(e=ki);continue}t.raise("Invalid character in character class")}if(o!==t.pos)return e;for(;t.eatChars([45,45]);)this.regexp_eatClassSetOperand(t)||t.raise("Invalid character in character class");if(o!==t.pos)return e}else t.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(t)){if(i=this.regexp_eatClassSetOperand(t),!i)return e;i===Pt&&(e=Pt)}};D.regexp_eatClassSetRange=function(t){var e=t.pos;if(this.regexp_eatClassSetCharacter(t)){var i=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassSetCharacter(t)){var o=t.lastIntValue;return i!==-1&&o!==-1&&i>o&&t.raise("Range out of order in character class"),!0}t.pos=e}return!1};D.regexp_eatClassSetOperand=function(t){return this.regexp_eatClassSetCharacter(t)?ki:this.regexp_eatClassStringDisjunction(t)||this.regexp_eatNestedClass(t)};D.regexp_eatNestedClass=function(t){var e=t.pos;if(t.eat(91)){var i=t.eat(94),o=this.regexp_classContents(t);if(t.eat(93))return i&&o===Pt&&t.raise("Negated character class may contain strings"),o;t.pos=e}if(t.eat(92)){var s=this.regexp_eatCharacterClassEscape(t);if(s)return s;t.pos=e}return null};D.regexp_eatClassStringDisjunction=function(t){var e=t.pos;if(t.eatChars([92,113])){if(t.eat(123)){var i=this.regexp_classStringDisjunctionContents(t);if(t.eat(125))return i}else t.raise("Invalid escape");t.pos=e}return null};D.regexp_classStringDisjunctionContents=function(t){for(var e=this.regexp_classString(t);t.eat(124);)this.regexp_classString(t)===Pt&&(e=Pt);return e};D.regexp_classString=function(t){for(var e=0;this.regexp_eatClassSetCharacter(t);)e++;return e===1?ki:Pt};D.regexp_eatClassSetCharacter=function(t){var e=t.pos;if(t.eat(92))return this.regexp_eatCharacterEscape(t)||this.regexp_eatClassSetReservedPunctuator(t)?!0:t.eat(98)?(t.lastIntValue=8,!0):(t.pos=e,!1);var i=t.current();return i<0||i===t.lookahead()&&jS(i)||US(i)?!1:(t.advance(),t.lastIntValue=i,!0)};function jS(t){return t===33||t>=35&&t<=38||t>=42&&t<=44||t===46||t>=58&&t<=64||t===94||t===96||t===126}n(jS,"isClassSetReservedDoublePunctuatorCharacter");function US(t){return t===40||t===41||t===45||t===47||t>=91&&t<=93||t>=123&&t<=125}n(US,"isClassSetSyntaxCharacter");D.regexp_eatClassSetReservedPunctuator=function(t){var e=t.current();return WS(e)?(t.lastIntValue=e,t.advance(),!0):!1};function WS(t){return t===33||t===35||t===37||t===38||t===44||t===45||t>=58&&t<=62||t===64||t===96||t===126}n(WS,"isClassSetReservedPunctuator");D.regexp_eatClassControlLetter=function(t){var e=t.current();return w0(e)||e===95?(t.lastIntValue=e%32,t.advance(),!0):!1};D.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1};D.regexp_eatDecimalDigits=function(t){var e=t.pos,i=0;for(t.lastIntValue=0;w0(i=t.current());)t.lastIntValue=10*t.lastIntValue+(i-48),t.advance();return t.pos!==e};function w0(t){return t>=48&&t<=57}n(w0,"isDecimalDigit");D.regexp_eatHexDigits=function(t){var e=t.pos,i=0;for(t.lastIntValue=0;p1(i=t.current());)t.lastIntValue=16*t.lastIntValue+f1(i),t.advance();return t.pos!==e};function p1(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}n(p1,"isHexDigit");function f1(t){return t>=65&&t<=70?10+(t-65):t>=97&&t<=102?10+(t-97):t-48}n(f1,"hexToInt");D.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var i=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=e*64+i*8+t.lastIntValue:t.lastIntValue=e*8+i}else t.lastIntValue=e;return!0}return!1};D.regexp_eatOctalDigit=function(t){var e=t.current();return h1(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)};function h1(t){return t>=48&&t<=55}n(h1,"isOctalDigit");D.regexp_eatFixedHexDigits=function(t,e){var i=t.pos;t.lastIntValue=0;for(var o=0;o<e;++o){var s=t.current();if(!p1(s))return t.pos=i,!1;t.lastIntValue=16*t.lastIntValue+f1(s),t.advance()}return!0};var sx=n(function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new x0(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},"Token"),ne=Be.prototype;ne.next=function(t){!t&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new sx(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};ne.getToken=function(){return this.next(),new sx(this)};typeof Symbol<"u"&&(ne[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===h.eof,value:e}}}});ne.nextToken=function(){var t=this.curContext();if((!t||!t.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(h.eof);if(t.override)return t.override(this);this.readToken(this.fullCharCodeAtPos())};ne.readToken=function(t){return Ii(t,this.options.ecmaVersion>=6)||t===92?this.readWord():this.getTokenFromCode(t)};ne.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);if(t<=55295||t>=56320)return t;var e=this.input.charCodeAt(this.pos+1);return e<=56319||e>=57344?t:(t<<10)+e-56613888};ne.skipBlockComment=function(){var t=this.options.onComment&&this.curPosition(),e=this.pos,i=this.input.indexOf("*/",this.pos+=2);if(i===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=i+2,this.options.locations)for(var o=void 0,s=e;(o=BT(this.input,s,this.pos))>-1;)++this.curLine,s=this.lineStart=o;this.options.onComment&&this.options.onComment(!0,this.input.slice(e+2,i),e,this.pos,t,this.curPosition())};ne.skipLineComment=function(t){for(var e=this.pos,i=this.options.onComment&&this.curPosition(),o=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!pr(o);)o=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,i,this.curPosition())};ne.skipSpace=function(){e:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(t>8&&t<14||t>=5760&&LT.test(String.fromCharCode(t)))++this.pos;else break e}}};ne.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var i=this.type;this.type=t,this.value=e,this.updateContext(i)};ne.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&t===46&&e===46?(this.pos+=3,this.finishToken(h.ellipsis)):(++this.pos,this.finishToken(h.dot))};ne.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):t===61?this.finishOp(h.assign,2):this.finishOp(h.slash,1)};ne.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),i=1,o=t===42?h.star:h.modulo;return this.options.ecmaVersion>=7&&t===42&&e===42&&(++i,o=h.starstar,e=this.input.charCodeAt(this.pos+2)),e===61?this.finishOp(h.assign,i+1):this.finishOp(o,i)};ne.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);if(e===t){if(this.options.ecmaVersion>=12){var i=this.input.charCodeAt(this.pos+2);if(i===61)return this.finishOp(h.assign,3)}return this.finishOp(t===124?h.logicalOR:h.logicalAND,2)}return e===61?this.finishOp(h.assign,2):this.finishOp(t===124?h.bitwiseOR:h.bitwiseAND,1)};ne.readToken_caret=function(){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(h.assign,2):this.finishOp(h.bitwiseXOR,1)};ne.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?e===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Nt.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(h.incDec,2):e===61?this.finishOp(h.assign,2):this.finishOp(h.plusMin,1)};ne.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),i=1;return e===t?(i=t===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+i)===61?this.finishOp(h.assign,i+1):this.finishOp(h.bitShift,i)):e===33&&t===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(e===61&&(i=2),this.finishOp(h.relational,i))};ne.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(h.equality,this.input.charCodeAt(this.pos+2)===61?3:2):t===61&&e===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(h.arrow)):this.finishOp(t===61?h.eq:h.prefix,1)};ne.readToken_question=function(){var t=this.options.ecmaVersion;if(t>=11){var e=this.input.charCodeAt(this.pos+1);if(e===46){var i=this.input.charCodeAt(this.pos+2);if(i<48||i>57)return this.finishOp(h.questionDot,2)}if(e===63){if(t>=12){var o=this.input.charCodeAt(this.pos+2);if(o===61)return this.finishOp(h.assign,3)}return this.finishOp(h.coalesce,2)}}return this.finishOp(h.question,1)};ne.readToken_numberSign=function(){var t=this.options.ecmaVersion,e=35;if(t>=13&&(++this.pos,e=this.fullCharCodeAtPos(),Ii(e,!0)||e===92))return this.finishToken(h.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+no(e)+"'")};ne.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(h.parenL);case 41:return++this.pos,this.finishToken(h.parenR);case 59:return++this.pos,this.finishToken(h.semi);case 44:return++this.pos,this.finishToken(h.comma);case 91:return++this.pos,this.finishToken(h.bracketL);case 93:return++this.pos,this.finishToken(h.bracketR);case 123:return++this.pos,this.finishToken(h.braceL);case 125:return++this.pos,this.finishToken(h.braceR);case 58:return++this.pos,this.finishToken(h.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(h.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(e===120||e===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(e===111||e===79)return this.readRadixNumber(8);if(e===98||e===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 63:return this.readToken_question();case 126:return this.finishOp(h.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+no(t)+"'")};ne.finishOp=function(t,e){var i=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,i)};ne.readRegexp=function(){for(var t,e,i=this.pos;;){this.pos>=this.input.length&&this.raise(i,"Unterminated regular expression");var o=this.input.charAt(this.pos);if(Nt.test(o)&&this.raise(i,"Unterminated regular expression"),t)t=!1;else{if(o==="[")e=!0;else if(o==="]"&&e)e=!1;else if(o==="/"&&!e)break;t=o==="\\"}++this.pos}var s=this.input.slice(i,this.pos);++this.pos;var r=this.pos,c=this.readWord1();this.containsEsc&&this.unexpected(r);var p=this.regexpState||(this.regexpState=new ci(this));p.reset(i,s,c),this.validateRegExpFlags(p),this.validateRegExpPattern(p);var f=null;try{f=new RegExp(s,c)}catch(m){}return this.finishToken(h.regexp,{pattern:s,flags:c,value:f})};ne.readInt=function(t,e,i){for(var o=this.options.ecmaVersion>=12&&e===void 0,s=i&&this.input.charCodeAt(this.pos)===48,r=this.pos,c=0,p=0,f=0,m=e==null?1/0:e;f<m;++f,++this.pos){var _=this.input.charCodeAt(this.pos),b=void 0;if(o&&_===95){s&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),p===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),f===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),p=_;continue}if(_>=97?b=_-97+10:_>=65?b=_-65+10:_>=48&&_<=57?b=_-48:b=1/0,b>=t)break;p=_,c=c*t+b}return o&&p===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===r||e!=null&&this.pos-r!==e?null:c};function HS(t,e){return e?parseInt(t,8):parseFloat(t.replace(/_/g,""))}n(HS,"stringToNumber");function m1(t){return typeof BigInt!="function"?null:BigInt(t.replace(/_/g,""))}n(m1,"stringToBigInt");ne.readRadixNumber=function(t){var e=this.pos;this.pos+=2;var i=this.readInt(t);return i==null&&this.raise(this.start+2,"Expected number in radix "+t),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(i=m1(this.input.slice(e,this.pos)),++this.pos):Ii(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(h.num,i)};ne.readNumber=function(t){var e=this.pos;!t&&this.readInt(10,void 0,!0)===null&&this.raise(e,"Invalid number");var i=this.pos-e>=2&&this.input.charCodeAt(e)===48;i&&this.strict&&this.raise(e,"Invalid number");var o=this.input.charCodeAt(this.pos);if(!i&&!t&&this.options.ecmaVersion>=11&&o===110){var s=m1(this.input.slice(e,this.pos));return++this.pos,Ii(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(h.num,s)}i&&/[89]/.test(this.input.slice(e,this.pos))&&(i=!1),o===46&&!i&&(++this.pos,this.readInt(10),o=this.input.charCodeAt(this.pos)),(o===69||o===101)&&!i&&(o=this.input.charCodeAt(++this.pos),(o===43||o===45)&&++this.pos,this.readInt(10)===null&&this.raise(e,"Invalid number")),Ii(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var r=HS(this.input.slice(e,this.pos),i);return this.finishToken(h.num,r)};ne.readCodePoint=function(){var t=this.input.charCodeAt(this.pos),e;if(t===123){this.options.ecmaVersion<6&&this.unexpected();var i=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(i,"Code point out of bounds")}else e=this.readHexChar(4);return e};ne.readString=function(t){for(var e="",i=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var o=this.input.charCodeAt(this.pos);if(o===t)break;o===92?(e+=this.input.slice(i,this.pos),e+=this.readEscapedChar(!1),i=this.pos):o===8232||o===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(pr(o)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(i,this.pos++),this.finishToken(h.string,e)};var _1={};ne.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t===_1)this.readInvalidTemplateToken();else throw t}this.inTemplateElement=!1};ne.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw _1;this.raise(t,e)};ne.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var i=this.input.charCodeAt(this.pos);if(i===96||i===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===h.template||this.type===h.invalidTemplate)?i===36?(this.pos+=2,this.finishToken(h.dollarBraceL)):(++this.pos,this.finishToken(h.backQuote)):(t+=this.input.slice(e,this.pos),this.finishToken(h.template,t));if(i===92)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(pr(i)){switch(t+=this.input.slice(e,this.pos),++this.pos,i){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:t+=`
`;break;default:t+=String.fromCharCode(i);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}};ne.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(h.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};ne.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return no(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),t){var i=this.pos-1;this.invalidStringToken(i,"Invalid escape sequence in template string")}default:if(e>=48&&e<=55){var o=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],s=parseInt(o,8);return s>255&&(o=o.slice(0,-1),s=parseInt(o,8)),this.pos+=o.length-1,e=this.input.charCodeAt(this.pos),(o!=="0"||e===56||e===57)&&(this.strict||t)&&this.invalidStringToken(this.pos-1-o.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(s)}return pr(e)?"":String.fromCharCode(e)}};ne.readHexChar=function(t){var e=this.pos,i=this.readInt(16,t);return i===null&&this.invalidStringToken(e,"Bad character escape sequence"),i};ne.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,i=this.pos,o=this.options.ecmaVersion>=6;this.pos<this.input.length;){var s=this.fullCharCodeAtPos();if(dr(s,o))this.pos+=s<=65535?1:2;else if(s===92){this.containsEsc=!0,t+=this.input.slice(i,this.pos);var r=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var c=this.readCodePoint();(e?Ii:dr)(c,o)||this.invalidStringToken(r,"Invalid Unicode escape"),t+=no(c),i=this.pos}else break;e=!1}return t+this.input.slice(i,this.pos)};ne.readWord=function(){var t=this.readWord1(),e=h.name;return this.keywords.test(t)&&(e=Qg[t]),this.finishToken(e,t)};var JS="8.10.0";Be.acorn={Parser:Be,version:JS,defaultOptions:qg,Position:oh,SourceLocation:x0,getLineInfo:YT,Node:y0,TokenType:ae,tokTypes:h,keywordTypes:Qg,TokContext:Yt,tokContexts:ke,isIdentifierChar:dr,isIdentifierStart:Ii,Token:sx,isNewLine:pr,lineBreak:Nt,lineBreakG:vS,nonASCIIwhitespace:LT};function v1(t,e){return Be.parse(t,e)}n(v1,"parse");var GS=function(t,e,i,o,s){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?s.call(t,i):s?s.value=i:e.set(t,i),i},zS=function(t,e,i,o){if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?o:i==="a"?o.call(t):o?o.value:e.get(t)},T0,Qo=class{constructor(e){T0.set(this,void 0);let i=v1(e,{ecmaVersion:2020});GS(this,T0,i.body,"f"),this.visitor=new cr(zS(this,T0,"f")),this.scope=this.visitor.scope,this.scope.set("print",o=>console.log(...o)),this.visitor.on("console",(o,s)=>{if(o.type==="Identifier")return console;if(o.type==="CallExpression"&&o.callee.type==="MemberExpression"){let r=s.visitNode(o.callee.property),c=o.arguments.map(f=>s.visitNode(f)),p=console[r];return p?p(...c):"proceed"}return"proceed"}),this.visitor.on("Math",(o,s)=>{if(o.type==="Identifier")return Math;if(o.type==="CallExpression"&&o.callee.type==="MemberExpression"){let r=s.visitNode(o.callee.property),c=o.arguments.map(f=>s.visitNode(f)),p=Math[r];return p?p(...c):"proceed"}return"proceed"}),this.visitor.on("String",(o,s)=>{if(o.type==="Identifier")return String;if(o.type==="CallExpression"&&o.callee.type==="MemberExpression"){let r=s.visitNode(o.callee.property),c=o.arguments.map(f=>s.visitNode(f)),p=String[r];return p?p(c):"proceed"}return"proceed"}),this.visitor.on("Date",o=>{if(o.type==="Identifier")return Date})}interpret(){return this.visitor.run()}};n(Qo,"Jinter");T0=new WeakMap;function rx(t,e){let i=new Qo(t);for(let[o,s]of Object.entries(e))i.scope.set(o,s);return i.interpret()}n(rx,"evaluate");var uh,Zo,g1,x1,b1,S0=class{constructor(e){uh.add(this),Zo.set(this,void 0),S(this,Zo,e,"f")}get session(){return u(this,Zo,"f")}stats(e,i,o){return x(this,void 0,void 0,function*(){let s=new URL(e);s.searchParams.set("ver","2"),s.searchParams.set("c",i.client_name.toLowerCase()),s.searchParams.set("cbrver",i.client_version),s.searchParams.set("cver",i.client_version);for(let c of Object.keys(o))s.searchParams.set(c,o[c]);return yield u(this,Zo,"f").http.fetch(s)})}execute(e,i){var o,s;return x(this,void 0,void 0,function*(){let r;if(i&&!i.protobuf){if(r=Object.assign({},i),Reflect.has(r,"browseId")&&u(this,uh,"m",b1).call(this,r.browseId)&&!u(this,Zo,"f").logged_in)throw new g("You must be signed in to perform this operation.");Reflect.has(r,"override_endpoint")&&delete r.override_endpoint,Reflect.has(r,"parse")&&delete r.parse,Reflect.has(r,"request")&&delete r.request,Reflect.has(r,"clientActions")&&delete r.clientActions,Reflect.has(r,"settingItemIdForClient")&&delete r.settingItemIdForClient,Reflect.has(r,"action")&&(r.actions=[r.action],delete r.action),Reflect.has(r,"boolValue")&&(r.newValue={boolValue:r.boolValue},delete r.boolValue),Reflect.has(r,"token")&&(r.continuation=r.token,delete r.token),(r==null?void 0:r.client)==="YTMUSIC"&&(r.isAudioOnly=!0)}else i&&(r=i.serialized_data);let c=Reflect.has(i||{},"override_endpoint")?i==null?void 0:i.override_endpoint:e,p=yield u(this,Zo,"f").http.fetch(c,{method:"POST",body:i!=null&&i.protobuf?r:JSON.stringify(r||{}),headers:{"Content-Type":i!=null&&i.protobuf?"application/x-protobuf":"application/json"}});if(i!=null&&i.parse){let f=d.parseResponse(yield p.json());if(u(this,uh,"m",x1).call(this,f)&&((s=(o=f.on_response_received_actions)===null||o===void 0?void 0:o.first())===null||s===void 0?void 0:s.type)==="navigateAction"){let m=f.on_response_received_actions.firstOfType(ko);m&&(f=yield m.endpoint.call(this,{parse:!0}))}return f}return u(this,uh,"m",g1).call(this,p)})}};n(S0,"Actions");Zo=new WeakMap,uh=new WeakSet,g1=n(function(e){return x(this,void 0,void 0,function*(){return{success:e.ok,status_code:e.status,data:JSON.parse(yield e.text())}})},"_Actions_wrap"),x1=n(function(e){return"on_response_received_actions"in e},"_Actions_isBrowse"),b1=n(function(e){return["FElibrary","FEhistory","FEsubscriptions","FEmusic_listening_review","FEmusic_library_landing","SPaccount_overview","SPaccount_notifications","SPaccount_privacy","SPtime_watched"].includes(e)},"_Actions_needsLogin");var ax=S0;var mr,_r,lh,ch,jt=class{constructor(e,i,o,s){mr.set(this,void 0),_r.set(this,void 0),lh.set(this,void 0),ch.set(this,void 0),S(this,mr,o,"f"),S(this,_r,i,"f"),S(this,lh,e,"f"),S(this,ch,s,"f")}static create(e,i=B.shim.fetch){return x(this,void 0,void 0,function*(){let o=new URL("/iframe_api",_e.YT_BASE),s=yield i(o);if(s.status!==200)throw new gt("Failed to request player id");let r=yield s.text(),c=$e(r,"player\\/","\\/");if(!c)throw new gt("Failed to get player id");if(e){let T=yield jt.fromCache(e,c);if(T)return T}let p=new URL(`/s/player/${c}/player_ias.vflset/en_US/base.js`,_e.YT_BASE),f=yield i(p,{headers:{"user-agent":qo("desktop")}});if(!f.ok)throw new gt(`Failed to get player data: ${f.status}`);let m=yield f.text(),_=this.extractSigTimestamp(m),b=this.extractSigSourceCode(m),w=this.extractNSigSourceCode(m);return yield jt.fromSource(e,_,b,w,c)})}decipher(e,i,o){if(e=e||i||o,!e)throw new gt("No valid URL to decipher");let s=new URLSearchParams(e),r=new URL(s.get("url")||e);if(i||o){let f=B.shim.eval(u(this,_r,"f"),{sig:s.get("s")});if(typeof f!="string")throw new gt("Failed to decipher signature");let m=s.get("sp");m?r.searchParams.set(m,f):r.searchParams.set("signature",f)}let c=r.searchParams.get("n");if(c){let f=B.shim.eval(u(this,mr,"f"),{nsig:c});if(typeof f!="string")throw new gt("Failed to decipher nsig");f.startsWith("enhanced_except_")&&console.warn(`Warning:
Could not transform nsig, download may be throttled.
Changing the InnerTube client to "ANDROID" might help!`),r.searchParams.set("n",f)}switch(r.searchParams.get("c")){case"WEB":r.searchParams.set("cver",Q.WEB.VERSION);break;case"WEB_REMIX":r.searchParams.set("cver",Q.YTMUSIC.VERSION);break;case"WEB_KIDS":r.searchParams.set("cver",Q.WEB_KIDS.VERSION);break;case"ANDROID":r.searchParams.set("cver",Q.ANDROID.VERSION);break;case"ANDROID_MUSIC":r.searchParams.set("cver",Q.YTMUSIC_ANDROID.VERSION);break;case"TVHTML5_SIMPLY_EMBEDDED_PLAYER":r.searchParams.set("cver",Q.TV_EMBEDDED.VERSION);break}return r.toString()}static fromCache(e,i){return x(this,void 0,void 0,function*(){let o=yield e.get(i);if(!o)return null;let s=new DataView(o);if(s.getUint32(0,!0)!==jt.LIBRARY_VERSION)return null;let c=s.getUint32(4,!0),p=s.getUint32(8,!0),f=o.slice(12,12+p),m=o.slice(12+p),_=new TextDecoder,b=_.decode(f),w=_.decode(m);return new jt(c,b,w,i)})}static fromSource(e,i,o,s,r){return x(this,void 0,void 0,function*(){let c=new jt(i,o,s,r);return yield c.cache(e),c})}cache(e){return x(this,void 0,void 0,function*(){if(!e)return;let i=new TextEncoder,o=i.encode(u(this,_r,"f")),s=i.encode(u(this,mr,"f")),r=new ArrayBuffer(12+o.byteLength+s.byteLength),c=new DataView(r);c.setUint32(0,jt.LIBRARY_VERSION,!0),c.setUint32(4,u(this,lh,"f"),!0),c.setUint32(8,o.byteLength,!0),new Uint8Array(r).set(o,12),new Uint8Array(r).set(s,12+o.byteLength),yield e.set(u(this,ch,"f"),new Uint8Array(r))})}static extractSigTimestamp(e){return parseInt($e(e,"signatureTimestamp:",",")||"0")}static extractSigSourceCode(e){var i,o,s;let r=$e(e,'function(a){a=a.split("")','return a.join("")}'),c=(s=(o=(i=r==null?void 0:r.split(/\.|\[/))===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.replace(";",""))===null||s===void 0?void 0:s.trim(),p=$e(e,`var ${c}={`,"};");return(!p||!r)&&console.warn(new gt("Failed to extract signature decipher algorithm")),`function descramble_sig(a) { a = a.split(""); let ${c}={${p}}${r} return a.join("") } descramble_sig(sig);`}static extractNSigSourceCode(e){let i=`function descramble_nsig(a) { let b=a.split("")${$e(e,'b=a.split("")','}return b.join("")}')}} return b.join(""); } descramble_nsig(nsig)`;return i||console.warn(new gt("Failed to extract n-token decipher algorithm")),i}get url(){return new URL(`/s/player/${u(this,ch,"f")}/player_ias.vflset/en_US/base.js`,_e.YT_BASE).toString()}get sts(){return u(this,lh,"f")}get nsig_sc(){return u(this,mr,"f")}get sig_sc(){return u(this,_r,"f")}static get LIBRARY_VERSION(){return 2}};n(jt,"Player");mr=new WeakMap,_r=new WeakMap,lh=new WeakMap,ch=new WeakMap;var ux=jt;var lx,Ut,vr,dh,y1,I0=class{constructor(e,i,o){lx.add(this),Ut.set(this,void 0),vr.set(this,void 0),dh.set(this,void 0),S(this,Ut,e,"f"),S(this,vr,i,"f"),S(this,dh,o||B.shim.fetch,"f")}get fetch_function(){return u(this,dh,"f")}fetch(e,i){return x(this,void 0,void 0,function*(){let o=_e.API.PRODUCTION_1+u(this,Ut,"f").api_version,s=(i==null?void 0:i.baseURL)||o,r=typeof e=="string"?!s.endsWith("/")&&!e.startsWith("/")?new URL(`${s}/${e}`):new URL(s+e):e instanceof URL?e:new URL(e.url,s),c=(i==null?void 0:i.headers)||(e instanceof B.shim.Request?e.headers:new B.shim.Headers)||new B.shim.Headers,p=(i==null?void 0:i.body)||(e instanceof B.shim.Request?e.body:void 0),f=new B.shim.Headers(c);f.set("Accept","*/*"),f.set("Accept-Language","*"),f.set("X-Goog-Visitor-Id",u(this,Ut,"f").context.client.visitorData||""),f.set("X-Origin",r.origin),f.set("X-Youtube-Client-Version",u(this,Ut,"f").context.client.clientVersion||""),B.shim.server&&(f.set("User-Agent",qo("desktop")),f.set("origin",r.origin)),r.searchParams.set("key",u(this,Ut,"f").key),r.searchParams.set("prettyPrint","false"),r.searchParams.set("alt","json");let m=f.get("Content-Type"),_=p,b=!1,w=s===o||s===_e.YT_UPLOAD;if(m==="application/json"&&w&&typeof p=="string"){let C=JSON.parse(p),P=Object.assign(Object.assign({},C),{context:JSON.parse(JSON.stringify(u(this,Ut,"f").context))});u(this,lx,"m",y1).call(this,P.context,P.client),f.set("x-youtube-client-version",P.context.client.clientVersion),delete P.client,B.shim.server&&(P.context.client.clientName==="ANDROID"||P.context.client.clientName==="ANDROID_MUSIC")&&f.set("User-Agent",Q.ANDROID.USER_AGENT),b=P.context.client.clientName==="WEB_KIDS",_=JSON.stringify(P)}if(u(this,Ut,"f").logged_in&&w&&!b){let C=u(this,Ut,"f").oauth;if(C.validateCredentials()&&(yield C.refreshIfRequired(),f.set("authorization",`Bearer ${C.credentials.access_token}`),r.searchParams.delete("key")),u(this,vr,"f")){let P=$e(u(this,vr,"f"),"PAPISID=",";");P&&(f.set("authorization",yield Fg(P)),f.set("x-goog-authuser",u(this,Ut,"f").account_index.toString())),f.set("cookie",u(this,vr,"f"))}}let T=new B.shim.Request(r,e instanceof B.shim.Request?e:i),I=yield u(this,dh,"f").call(this,T,{body:_,headers:f,credentials:"include",redirect:e instanceof B.shim.Request?e.redirect:(i==null?void 0:i.redirect)||"follow"});if(I.ok)return I;throw new g(`Request to ${I.url} failed with status ${I.status}`,yield I.text())})}};n(I0,"HTTPClient");Ut=new WeakMap,vr=new WeakMap,dh=new WeakMap,lx=new WeakSet,y1=n(function(e,i){switch((i==="ANDROID"||i==="YTMUSIC_ANDROID"||i==="YTMUSIC_ANDROID"||i==="YTSTUDIO_ANDROID")&&(e.client.androidSdkVersion=Q.ANDROID.SDK_VERSION,e.client.userAgent=Q.ANDROID.USER_AGENT,e.client.osName="Android",e.client.osVersion="10",e.client.platform="MOBILE"),i){case"YTMUSIC":e.client.clientVersion=Q.YTMUSIC.VERSION,e.client.clientName=Q.YTMUSIC.NAME;break;case"ANDROID":e.client.clientVersion=Q.ANDROID.VERSION,e.client.clientFormFactor="SMALL_FORM_FACTOR",e.client.clientName=Q.ANDROID.NAME;break;case"YTMUSIC_ANDROID":e.client.clientVersion=Q.YTMUSIC_ANDROID.VERSION,e.client.clientFormFactor="SMALL_FORM_FACTOR",e.client.clientName=Q.YTMUSIC_ANDROID.NAME;break;case"YTSTUDIO_ANDROID":e.client.clientVersion=Q.YTSTUDIO_ANDROID.VERSION,e.client.clientFormFactor="SMALL_FORM_FACTOR",e.client.clientName=Q.YTSTUDIO_ANDROID.NAME;break;case"TV_EMBEDDED":e.client.clientName=Q.TV_EMBEDDED.NAME,e.client.clientVersion=Q.TV_EMBEDDED.VERSION,e.client.clientScreen="EMBED",e.thirdParty={embedUrl:_e.YT_BASE};break;case"YTKIDS":e.client.clientVersion=Q.WEB_KIDS.VERSION,e.client.clientName=Q.WEB_KIDS.NAME,e.client.kidsAppInfo={categorySettings:{enabledCategories:["approved_for_you","black_joy","camp","collections","earth","explore","favorites","gaming","halloween","hero","learning","move","music","reading","shared_by_parents","shows","soccer","sports","spotlight","winter"]},contentSettings:{corpusPreference:"KIDS_CORPUS_PREFERENCE_YOUNGER",kidsNoSearchMode:"YT_KIDS_NO_SEARCH_MODE_OFF"}};break;default:break}},"_HTTPClient_adjustContext");var cx=I0;var Ei,en,Me,Ee,k0,T1,px,w1,S1,dx,C0=class{constructor(e){Ei.add(this),en.set(this,void 0),Me.set(this,void 0),Ee.set(this,void 0),k0.set(this,5),S(this,Me,e,"f")}init(e){return x(this,void 0,void 0,function*(){S(this,Ee,e,"f"),this.validateCredentials()?this.has_access_token_expired||u(this,Me,"f").emit("auth",{credentials:u(this,Ee,"f"),status:"SUCCESS"}):(yield u(this,Ei,"m",T1).call(this))||(yield u(this,Ei,"m",px).call(this))})}cacheCredentials(){var e;return x(this,void 0,void 0,function*(){let o=new TextEncoder().encode(JSON.stringify(u(this,Ee,"f")));yield(e=u(this,Me,"f").cache)===null||e===void 0?void 0:e.set("youtubei_oauth_credentials",o.buffer)})}removeCache(){var e;return x(this,void 0,void 0,function*(){yield(e=u(this,Me,"f").cache)===null||e===void 0?void 0:e.remove("youtubei_oauth_credentials")})}refreshIfRequired(){return x(this,void 0,void 0,function*(){this.has_access_token_expired&&(yield u(this,Ei,"m",S1).call(this))})}revokeCredentials(){return x(this,void 0,void 0,function*(){if(!!u(this,Ee,"f"))return yield this.removeCache(),u(this,Me,"f").http.fetch_function(new URL(`/o/oauth2/revoke?token=${encodeURIComponent(u(this,Ee,"f").access_token)}`,_e.YT_BASE),{method:"post"})})}get credentials(){return u(this,Ee,"f")}get has_access_token_expired(){let e=u(this,Ee,"f")?new Date(u(this,Ee,"f").expires).getTime():-1/0;return new Date().getTime()>e}validateCredentials(){return u(this,Ee,"f")&&Reflect.has(u(this,Ee,"f"),"access_token")&&Reflect.has(u(this,Ee,"f"),"refresh_token")&&Reflect.has(u(this,Ee,"f"),"expires")||!1}};n(C0,"OAuth");en=new WeakMap,Me=new WeakMap,Ee=new WeakMap,k0=new WeakMap,Ei=new WeakSet,T1=n(function(){var e;return x(this,void 0,void 0,function*(){let i=yield(e=u(this,Me,"f").cache)===null||e===void 0?void 0:e.get("youtubei_oauth_credentials");if(!i)return!1;let o=new TextDecoder,s=JSON.parse(o.decode(i));return S(this,Ee,{access_token:s.access_token,refresh_token:s.refresh_token,expires:new Date(s.expires)},"f"),u(this,Me,"f").emit("auth",{credentials:u(this,Ee,"f"),status:"SUCCESS"}),!0})},"_OAuth_loadCachedCredentials"),px=n(function(){return x(this,void 0,void 0,function*(){S(this,en,yield u(this,Ei,"m",dx).call(this),"f");let e={client_id:u(this,en,"f").client_id,scope:Ai.SCOPE,device_id:B.shim.uuidv4(),device_model:Ai.MODEL_NAME},o=yield(yield u(this,Me,"f").http.fetch_function(new URL("/o/oauth2/device/code",_e.YT_BASE),{body:JSON.stringify(e),method:"POST",headers:{"Content-Type":"application/json"}})).json();u(this,Me,"f").emit("auth-pending",o),S(this,k0,o.interval,"f"),u(this,Ei,"m",w1).call(this,o.device_code)})},"_OAuth_getUserCode"),w1=n(function(e){let i=setInterval(()=>x(this,void 0,void 0,function*(){let o=Object.assign(Object.assign({},u(this,en,"f")),{code:e,grant_type:Ai.GRANT_TYPE});try{let r=yield(yield u(this,Me,"f").http.fetch_function(new URL("/o/oauth2/token",_e.YT_BASE),{body:JSON.stringify(o),method:"POST",headers:{"Content-Type":"application/json"}})).json();if(r.error){switch(r.error){case"access_denied":u(this,Me,"f").emit("auth-error",new ui("Access was denied.",{status:"ACCESS_DENIED"}));break;case"expired_token":u(this,Me,"f").emit("auth-error",new ui("The device code has expired, restarting auth flow.",{status:"DEVICE_CODE_EXPIRED"})),clearInterval(i),u(this,Ei,"m",px).call(this);break;default:break}return}let c=new Date(new Date().getTime()+r.expires_in*1e3);S(this,Ee,{access_token:r.access_token,refresh_token:r.refresh_token,expires:c},"f"),u(this,Me,"f").emit("auth",{credentials:u(this,Ee,"f"),status:"SUCCESS"}),clearInterval(i)}catch(s){return clearInterval(i),u(this,Me,"f").emit("auth-error",new ui("Could not obtain user code.",{status:"FAILED",error:s}))}}),u(this,k0,"f")*1e3)},"_OAuth_startPolling"),S1=n(function(){return x(this,void 0,void 0,function*(){if(!u(this,Ee,"f"))return;S(this,en,yield u(this,Ei,"m",dx).call(this),"f");let e=Object.assign(Object.assign({},u(this,en,"f")),{refresh_token:u(this,Ee,"f").refresh_token,grant_type:"refresh_token"}),o=yield(yield u(this,Me,"f").http.fetch_function(new URL("/o/oauth2/token",_e.YT_BASE),{body:JSON.stringify(e),method:"POST",headers:{"Content-Type":"application/json"}})).json(),s=new Date(new Date().getTime()+o.expires_in*1e3);S(this,Ee,{access_token:o.access_token,refresh_token:o.refresh_token||u(this,Ee,"f").refresh_token,expires:s},"f"),u(this,Me,"f").emit("update-credentials",{credentials:u(this,Ee,"f"),status:"SUCCESS"})})},"_OAuth_refreshAccessToken"),dx=n(function(){var e;return x(this,void 0,void 0,function*(){let o=yield(yield u(this,Me,"f").http.fetch_function(new URL("/tv",_e.YT_BASE),{headers:Ai.HEADERS})).text(),s=(e=Ai.REGEX.AUTH_SCRIPT.exec(o))===null||e===void 0?void 0:e[1];if(!s)throw new ui("Could not obtain script url.",{status:"FAILED"});let c=(yield(yield u(this,Me,"f").http.fetch(s,{baseURL:_e.YT_BASE})).text()).replace(/\n/g,"").match(Ai.REGEX.CLIENT_IDENTITY),p=c==null?void 0:c.groups;if(!p)throw new ui("Could not obtain client identity.",{status:"FAILED"});return p})},"_OAuth_getClientIdentity");var fx=C0;var hx,E0,P0,tn,N0,A0,I1,k1,mx;(function(t){t.WEB="WEB",t.KIDS="WEB_KIDS",t.MUSIC="WEB_REMIX",t.ANDROID="ANDROID",t.ANDROID_MUSIC="ANDROID_MUSIC",t.ANDROID_CREATOR="ANDROID_CREATOR",t.TV_EMBEDDED="TVHTML5_SIMPLY_EMBEDDED_PLAYER"})(mx||(mx={}));var ro=class extends Lf{constructor(e,i,o,s,r,c,p,f){super(),E0.set(this,void 0),P0.set(this,void 0),tn.set(this,void 0),N0.set(this,void 0),A0.set(this,void 0),S(this,tn,e,"f"),S(this,N0,s,"f"),S(this,P0,i,"f"),S(this,E0,o,"f"),S(this,A0,r,"f"),this.http=new cx(this,c,p),this.actions=new ax(this),this.oauth=new fx(this),this.logged_in=!!c,this.cache=f}on(e,i){super.on(e,i)}once(e,i){super.once(e,i)}static create(e={}){return x(this,void 0,void 0,function*(){let{context:i,api_key:o,api_version:s,account_index:r}=yield ro.getSessionData(e.lang,e.location,e.account_index,e.visitor_data,e.enable_safety_mode,e.generate_session_locally,e.device_category,e.client_type,e.timezone,e.fetch);return new ro(i,o,s,r,e.retrieve_player===!1?void 0:yield ux.create(e.cache,e.fetch),e.cookie,e.fetch,e.cache)})}static getSessionData(e="",i="",o=0,s="",r=!1,c=!1,p="desktop",f=mx.WEB,m=Intl.DateTimeFormat().resolvedOptions().timeZone,_=B.shim.fetch){return x(this,void 0,void 0,function*(){let b;return c?b=u(this,hx,"m",k1).call(this,{lang:e,location:i,time_zone:m,device_category:p,client_name:f,enable_safety_mode:r,visitor_data:s}):b=yield u(this,hx,"m",I1).call(this,{lang:e,location:i,time_zone:m,device_category:p,client_name:f,enable_safety_mode:r,visitor_data:s},_),Object.assign(Object.assign({},b),{account_index:o})})}signIn(e){return x(this,void 0,void 0,function*(){return new Promise((i,o)=>x(this,void 0,void 0,function*(){let s=n(r=>o(r),"error_handler");this.once("auth",r=>{this.off("auth-error",s),r.status==="SUCCESS"&&(this.logged_in=!0,i()),o(r)}),this.once("auth-error",s);try{yield this.oauth.init(e),this.oauth.validateCredentials()&&(yield this.oauth.refreshIfRequired(),this.logged_in=!0,i())}catch(r){o(r)}}))})}signOut(){return x(this,void 0,void 0,function*(){if(!this.logged_in)throw new g("You must be signed in to perform this operation.");let e=yield this.oauth.revokeCredentials();return this.logged_in=!1,e})}get key(){return u(this,P0,"f")}get api_version(){return u(this,E0,"f")}get client_version(){return u(this,tn,"f").client.clientVersion}get client_name(){return u(this,tn,"f").client.clientName}get account_index(){return u(this,N0,"f")}get context(){return u(this,tn,"f")}get player(){return u(this,A0,"f")}get lang(){return u(this,tn,"f").client.hl}};n(ro,"Session");hx=ro,E0=new WeakMap,P0=new WeakMap,tn=new WeakMap,N0=new WeakMap,A0=new WeakMap,I1=n(function(e,i=B.shim.fetch){return x(this,void 0,void 0,function*(){let o=new URL("/sw.js_data",_e.YT_BASE),s=It(11);e.visitor_data&&(s=Se.decodeVisitorData(e.visitor_data).id);let r=yield i(o,{headers:{"accept-language":e.lang||"en-US","user-agent":qo("desktop"),accept:"*/*",referer:"https://www.youtube.com/sw.js",cookie:`PREF=tz=${e.time_zone.replace("/",".")};VISITOR_INFO1_LIVE=${s};`}});if(!r.ok)throw new Ps(`Failed to retrieve session data: ${r.status}`);let c=yield r.text(),f=JSON.parse(c.replace(/^\)\]\}'/,""))[0][2],m=`v${f[0][0][6]}`,[[_],b]=f;return{context:{client:{hl:_[0],gl:e.location||_[2],remoteHost:_[3],screenDensityFloat:1,screenHeightPoints:1080,screenPixelDensity:1,screenWidthPoints:1920,visitorData:_[13],clientName:e.client_name,clientVersion:_[16],osName:_[17],osVersion:_[18],platform:e.device_category.toUpperCase(),clientFormFactor:"UNKNOWN_FORM_FACTOR",userInterfaceTheme:"USER_INTERFACE_THEME_LIGHT",timeZone:_[79]||e.time_zone,browserName:_[86],browserVersion:_[87],originalUrl:_e.YT_BASE,deviceMake:_[11],deviceModel:_[12],utcOffsetMinutes:-new Date().getTimezoneOffset()},user:{enableSafetyMode:e.enable_safety_mode,lockedSafetyMode:!1}},api_key:b,api_version:m}})},"_Session_retrieveSessionData"),k1=n(function(e){let i=It(11);return e.visitor_data&&(i=Se.decodeVisitorData(e.visitor_data).id),{context:{client:{hl:e.lang||"en",gl:e.location||"US",screenDensityFloat:1,screenHeightPoints:1080,screenPixelDensity:1,screenWidthPoints:1920,visitorData:Se.encodeVisitorData(i,Math.floor(Date.now()/1e3)),clientName:e.client_name,clientVersion:Q.WEB.VERSION,osName:"Windows",osVersion:"10.0",platform:e.device_category.toUpperCase(),clientFormFactor:"UNKNOWN_FORM_FACTOR",userInterfaceTheme:"USER_INTERFACE_THEME_LIGHT",timeZone:e.time_zone,originalUrl:_e.YT_BASE,deviceMake:"",deviceModel:"",utcOffsetMinutes:-new Date().getTimezoneOffset()},user:{enableSafetyMode:e.enable_safety_mode,lockedSafetyMode:!1}},api_key:Q.WEB.API_KEY,api_version:Q.WEB.API_VERSION}},"_Session_generateSessionData");var _x=ro;var gx={};U(gx,{Kids:()=>H0,Music:()=>z0,Studio:()=>$0});var vx={};U(vx,{Account:()=>sn,Browse:()=>M0,BrowseEndpoint:()=>j,Channel:()=>Pi,Comment:()=>D0,GetNotificationMenuEndpoint:()=>on,GuideEndpoint:()=>gr,Like:()=>B0,Music:()=>L0,NextEndpoint:()=>Pe,Notification:()=>F0,PlayerEndpoint:()=>et,Playlist:()=>Y0,ResolveURLEndpoint:()=>nn,SearchEndpoint:()=>xt,Subscription:()=>j0,Upload:()=>U0});var j={};U(j,{PATH:()=>KS,build:()=>$S});var KS="/browse";function $S(t){return Object.assign({browseId:t.browse_id,params:t.params,continuation:t.continuation,client:t.client})}n($S,"build");var on={};U(on,{PATH:()=>qS,build:()=>XS});var qS="/notification/get_notification_menu";function XS(t){return Object.assign({notificationsMenuRequestType:t.notifications_menu_request_type})}n(XS,"build");var gr={};U(gr,{PATH:()=>QS});var QS="/guide";var Pe={};U(Pe,{PATH:()=>ZS,build:()=>eI});var ZS="/next";function eI(t){return Object.assign({videoId:t.video_id,playlistId:t.playlist_id,params:t.params,playlistIndex:t.playlist_index,client:t.client,continuation:t.continuation})}n(eI,"build");var et={};U(et,{PATH:()=>tI,build:()=>iI});var tI="/player";function iI(t){let e=t.client==="ANDROID"||t.client==="YTMUSIC_ANDROID"||t.client==="YTSTUDIO_ANDROID";return Object.assign({playbackContext:{contentPlaybackContext:Object.assign({vis:0,splay:!1,referer:t.playlist_id?`https://www.youtube.com/watch?v=${t.video_id}&list=${t.playlist_id}`:`https://www.youtube.com/watch?v=${t.video_id}`,currentUrl:t.playlist_id?`/watch?v=${t.video_id}&list=${t.playlist_id}`:`/watch?v=${t.video_id}`,autonavState:"STATE_ON",autoCaptionsDefaultOn:!1,html5Preference:"HTML5_PREF_WANTS",lactMilliseconds:"-1"},{signatureTimestamp:t.sts})},attestationRequest:{omitBotguardData:!0},racyCheckOk:!0,contentCheckOk:!0,videoId:t.video_id},{client:t.client,playlistId:t.playlist_id,params:e?"2AMBCgIQBg":t.params})}n(iI,"build");var nn={};U(nn,{PATH:()=>oI,build:()=>nI});var oI="/navigation/resolve_url";function nI(t){return Object.assign({url:t.url})}n(nI,"build");var xt={};U(xt,{PATH:()=>sI,build:()=>rI});var sI="/search";function rI(t){return Object.assign({query:t.query,params:t.params,continuation:t.continuation,client:t.client})}n(rI,"build");var sn={};U(sn,{AccountListEndpoint:()=>R0});var R0={};U(R0,{PATH:()=>aI,build:()=>uI});var aI="/account/accounts_list";function uI(){return{client:"ANDROID"}}n(uI,"build");var M0={};U(M0,{EditPlaylistEndpoint:()=>Wt});var Wt={};U(Wt,{PATH:()=>lI,build:()=>cI});var lI="/browse/edit_playlist";function cI(t){return{playlistId:t.playlist_id,actions:t.actions.map(e=>Object.assign({action:e.action},{addedVideoId:e.added_video_id,setVideoId:e.set_video_id,movedSetVideoIdPredecessor:e.moved_set_video_id_predecessor}))}}n(cI,"build");var Pi={};U(Pi,{EditDescriptionEndpoint:()=>O0,EditNameEndpoint:()=>V0});var V0={};U(V0,{PATH:()=>dI,build:()=>pI});var dI="/channel/edit_name";function pI(t){return{givenName:t.given_name,client:"ANDROID"}}n(pI,"build");var O0={};U(O0,{PATH:()=>fI,build:()=>hI});var fI="/channel/edit_description";function hI(t){return{givenDescription:t.given_description,client:"ANDROID"}}n(hI,"build");var D0={};U(D0,{CreateCommentEndpoint:()=>an,PerformCommentActionEndpoint:()=>rn});var rn={};U(rn,{PATH:()=>mI,build:()=>_I});var mI="/comment/perform_comment_action";function _I(t){return Object.assign({actions:t.actions},{client:t.client})}n(_I,"build");var an={};U(an,{PATH:()=>vI,build:()=>gI});var vI="/comment/create_comment";function gI(t){return Object.assign({commentText:t.comment_text,createCommentParams:t.create_comment_params},{client:t.client})}n(gI,"build");var B0={};U(B0,{DislikeEndpoint:()=>ln,LikeEndpoint:()=>un,RemoveLikeEndpoint:()=>cn});var un={};U(un,{PATH:()=>xI,build:()=>bI});var xI="/like/like";function bI(t){return Object.assign({target:{videoId:t.target.video_id}},{client:t.client})}n(bI,"build");var ln={};U(ln,{PATH:()=>yI,build:()=>wI});var yI="/like/dislike";function wI(t){return Object.assign({target:{videoId:t.target.video_id}},{client:t.client})}n(wI,"build");var cn={};U(cn,{PATH:()=>TI,build:()=>SI});var TI="/like/removelike";function SI(t){return Object.assign({target:{videoId:t.target.video_id}},{client:t.client})}n(SI,"build");var L0={};U(L0,{GetSearchSuggestionsEndpoint:()=>dn});var dn={};U(dn,{PATH:()=>II,build:()=>kI});var II="/music/get_search_suggestions";function kI(t){return{input:t.input,client:"YTMUSIC"}}n(kI,"build");var F0={};U(F0,{GetUnseenCountEndpoint:()=>xr,ModifyChannelPreferenceEndpoint:()=>pn});var xr={};U(xr,{PATH:()=>CI});var CI="/notification/get_unseen_count";var pn={};U(pn,{PATH:()=>EI,build:()=>PI});var EI="/notification/modify_channel_preference";function PI(t){return Object.assign({params:t.params},{client:t.client})}n(PI,"build");var Y0={};U(Y0,{CreateEndpoint:()=>fn,DeleteEndpoint:()=>hn});var fn={};U(fn,{PATH:()=>NI,build:()=>AI});var NI="/playlist/create";function AI(t){return{title:t.title,ids:t.ids}}n(AI,"build");var hn={};U(hn,{PATH:()=>RI,build:()=>MI});var RI="/playlist/delete";function MI(t){return{playlistId:t.playlist_id}}n(MI,"build");var j0={};U(j0,{SubscribeEndpoint:()=>mn,UnsubscribeEndpoint:()=>_n});var mn={};U(mn,{PATH:()=>VI,build:()=>OI});var VI="/subscription/subscribe";function OI(t){return Object.assign({channelIds:t.channel_ids},{client:t.client,params:t.params})}n(OI,"build");var _n={};U(_n,{PATH:()=>DI,build:()=>BI});var DI="/subscription/unsubscribe";function BI(t){return Object.assign({channelIds:t.channel_ids},{client:t.client,params:t.params})}n(BI,"build");var U0={};U(U0,{CreateVideoEndpoint:()=>vn});var vn={};U(vn,{PATH:()=>LI,build:()=>FI});var LI="/upload/createvideo";function FI(t){return Object.assign({resourceId:{scottyResourceId:{id:t.resource_id.scotty_resource_id.id}},frontendUploadId:t.frontend_upload_id,initialMetadata:{title:{newTitle:t.initial_metadata.title.new_title},description:{newDescription:t.initial_metadata.description.new_description,shouldSegment:t.initial_metadata.description.should_segment},privacy:{newPrivacy:t.initial_metadata.privacy.new_privacy},draftState:{isDraft:!!t.initial_metadata.draft_state.is_draft}}},{client:t.client})}n(FI,"build");var bt,W0=class{constructor(e){bt.set(this,void 0),S(this,bt,e,"f")}search(e){return x(this,void 0,void 0,function*(){let i=yield u(this,bt,"f").actions.execute(xt.PATH,xt.build({client:"YTKIDS",query:e}));return new a0(u(this,bt,"f").actions,i)})}getInfo(e){var i;return x(this,void 0,void 0,function*(){let o=et.build({sts:(i=u(this,bt,"f").player)===null||i===void 0?void 0:i.sts,client:"YTKIDS",video_id:e}),s=Pe.build({video_id:e,client:"YTKIDS"}),r=u(this,bt,"f").actions.execute(et.PATH,o),c=u(this,bt,"f").actions.execute(Pe.PATH,s),p=yield Promise.all([r,c]),f=It(16);return new l0(p,u(this,bt,"f").actions,f)})}getChannel(e){return x(this,void 0,void 0,function*(){let i=yield u(this,bt,"f").actions.execute(j.PATH,j.build({browse_id:e,client:"YTKIDS"}));return new n0(u(this,bt,"f").actions,i)})}getHomeFeed(){return x(this,void 0,void 0,function*(){let e=yield u(this,bt,"f").actions.execute(j.PATH,j.build({browse_id:"FEkids_home",client:"YTKIDS"}));return new s0(u(this,bt,"f").actions,e)})}};n(W0,"Kids");bt=new WeakMap;var H0=W0;var J0,ph,fe,C1,E1,G0=class{constructor(e){J0.add(this),ph.set(this,void 0),fe.set(this,void 0),S(this,ph,e,"f"),S(this,fe,e.actions,"f")}getInfo(e){if(e instanceof Hn)return u(this,J0,"m",E1).call(this,e);if(typeof e=="string")return u(this,J0,"m",C1).call(this,e);throw new g("Invalid target, expected either a video id or a valid MusicTwoRowItem",e)}search(e,i={}){return x(this,void 0,void 0,function*(){re({query:e});let o=yield u(this,fe,"f").execute(xt.PATH,xt.build({query:e,client:"YTMUSIC",params:i.type&&i.type!=="all"?Se.encodeMusicSearchFilters(i):void 0}));return new i0(o,u(this,fe,"f"),Reflect.has(i,"type")&&i.type!=="all")})}getHomeFeed(){return x(this,void 0,void 0,function*(){let e=yield u(this,fe,"f").execute(j.PATH,j.build({browse_id:"FEmusic_home",client:"YTMUSIC"}));return new Qv(e,u(this,fe,"f"))})}getExplore(){return x(this,void 0,void 0,function*(){let e=yield u(this,fe,"f").execute(j.PATH,j.build({client:"YTMUSIC",browse_id:"FEmusic_explore"}));return new Xv(e)})}getLibrary(){return x(this,void 0,void 0,function*(){let e=yield u(this,fe,"f").execute(j.PATH,j.build({client:"YTMUSIC",browse_id:"FEmusic_library_landing"}));return new Zv(e,u(this,fe,"f"))})}getArtist(e){return x(this,void 0,void 0,function*(){if(re({artist_id:e}),!e.startsWith("UC")&&!e.startsWith("FEmusic_library_privately_owned_artist"))throw new g("Invalid artist id",e);let i=yield u(this,fe,"f").execute(j.PATH,j.build({client:"YTMUSIC",browse_id:e}));return new $v(i,u(this,fe,"f"))})}getAlbum(e){return x(this,void 0,void 0,function*(){if(re({album_id:e}),!e.startsWith("MPR")&&!e.startsWith("FEmusic_library_privately_owned_release"))throw new g("Invalid album id",e);let i=yield u(this,fe,"f").execute(j.PATH,j.build({client:"YTMUSIC",browse_id:e}));return new Gv(i)})}getPlaylist(e){return x(this,void 0,void 0,function*(){re({playlist_id:e}),e.startsWith("VL")||(e=`VL${e}`);let i=yield u(this,fe,"f").execute(j.PATH,j.build({client:"YTMUSIC",browse_id:e}));return new Ts(i,u(this,fe,"f"))})}getUpNext(e,i=!0){var o,s,r;return x(this,void 0,void 0,function*(){re({video_id:e});let p=(o=(yield u(this,fe,"f").execute(Pe.PATH,Object.assign(Object.assign({},Pe.build({video_id:e,client:"YTMUSIC"})),{parse:!0}))).contents_memo)===null||o===void 0?void 0:o.getType(we),f=p==null?void 0:p.first();if(!f)throw new g("Could not find target tab.");let m=(s=f.content)===null||s===void 0?void 0:s.as(Jn);if(!m||!m.content)throw new g("Music queue was empty, the given id is probably invalid.",m);let _=m.content.as(ii);if(!_.playlist_id&&i){let b=_.contents.firstOfType(Di);if(!b)throw new g("Automix item not found");let w=yield(r=b.playlist_video)===null||r===void 0?void 0:r.endpoint.call(u(this,fe,"f"),{videoId:e,client:"YTMUSIC",parse:!0});if(!w||!w.contents_memo)throw new g("Could not fetch automix");return w.contents_memo.getType(ii).first()}return _})}getRelated(e){var i;return x(this,void 0,void 0,function*(){re({video_id:e});let s=(i=(yield u(this,fe,"f").execute(Pe.PATH,Object.assign(Object.assign({},Pe.build({video_id:e,client:"YTMUSIC"})),{parse:!0}))).contents_memo)===null||i===void 0?void 0:i.getType(we),r=s==null?void 0:s.matchCondition(f=>{var m,_;return((_=(m=f.endpoint.payload.browseEndpointContextSupportedConfigs)===null||m===void 0?void 0:m.browseEndpointContextMusicConfig)===null||_===void 0?void 0:_.pageType)==="MUSIC_PAGE_TYPE_TRACK_RELATED"});if(!r)throw new g("Could not find target tab.");let c=yield r.endpoint.call(u(this,fe,"f"),{client:"YTMUSIC",parse:!0});if(!c.contents)throw new g("Unexpected response",c);return c.contents.item().as(oe).contents.as(Re,yo)})}getLyrics(e){var i;return x(this,void 0,void 0,function*(){re({video_id:e});let s=(i=(yield u(this,fe,"f").execute(Pe.PATH,Object.assign(Object.assign({},Pe.build({video_id:e,client:"YTMUSIC"})),{parse:!0}))).contents_memo)===null||i===void 0?void 0:i.getType(we),r=s==null?void 0:s.matchCondition(f=>{var m,_;return((_=(m=f.endpoint.payload.browseEndpointContextSupportedConfigs)===null||m===void 0?void 0:m.browseEndpointContextMusicConfig)===null||_===void 0?void 0:_.pageType)==="MUSIC_PAGE_TYPE_TRACK_LYRICS"});if(!r)throw new g("Could not find target tab.");let c=yield r.endpoint.call(u(this,fe,"f"),{client:"YTMUSIC",parse:!0});if(!c.contents)throw new g("Unexpected response",c);if(c.contents.item().key("type").string()==="Message")throw new g(c.contents.item().as(Je).text.toString(),e);return c.contents.item().as(oe).contents.firstOfType(yo)})}getRecap(){return x(this,void 0,void 0,function*(){let e=yield u(this,fe,"f").execute(j.PATH,j.build({client:"YTMUSIC_ANDROID",browse_id:"FEmusic_listening_review"}));return new t0(e,u(this,fe,"f"))})}getSearchSuggestions(e){return x(this,void 0,void 0,function*(){let i=yield u(this,fe,"f").execute(dn.PATH,Object.assign(Object.assign({},dn.build({input:e})),{parse:!0}));if(!i.contents_memo)throw new g("Unexpected response",i);return i.contents_memo.getType(q_).first().contents})}};n(G0,"Music");ph=new WeakMap,fe=new WeakMap,J0=new WeakSet,C1=n(function(e){var i;return x(this,void 0,void 0,function*(){let o=et.build({video_id:e,sts:(i=u(this,ph,"f").player)===null||i===void 0?void 0:i.sts,client:"YTMUSIC"}),s=Pe.build({video_id:e,client:"YTMUSIC"}),r=u(this,fe,"f").execute(et.PATH,o),c=u(this,fe,"f").execute(Pe.PATH,s),p=yield Promise.all([r,c]),f=It(16);return new Zf(p,u(this,fe,"f"),f)})},"_Music_fetchInfoFromVideoId"),E1=n(function(e){var i;return x(this,void 0,void 0,function*(){if(!e)throw new g("List item cannot be undefined");if(!e.endpoint)throw new Error("This item does not have an endpoint.");let o=e.endpoint.call(u(this,fe,"f"),{client:"YTMUSIC",playbackContext:{contentPlaybackContext:Object.assign({signatureTimestamp:(i=u(this,ph,"f").player)===null||i===void 0?void 0:i.sts})}}),s=e.endpoint.call(u(this,fe,"f"),{client:"YTMUSIC",enablePersistentPlaylistPanel:!0,override_endpoint:"/next"}),r=It(16),c=yield Promise.all([o,s]);return new Zf(c,u(this,fe,"f"),r)})},"_Music_fetchInfoFromListItem");var z0=G0;var fh,Ht,P1,N1,A1,K0=class{constructor(e){fh.add(this),Ht.set(this,void 0),S(this,Ht,e,"f")}setThumbnail(e,i){return x(this,void 0,void 0,function*(){if(!u(this,Ht,"f").logged_in)throw new g("You must be signed in to perform this operation.");if(!e||!i)throw new $o("One or more parameters are missing.");let o=Se.encodeCustomThumbnailPayload(e,i);return yield u(this,Ht,"f").actions.execute("/video_manager/metadata_update",{protobuf:!0,serialized_data:o})})}updateVideoMetadata(e,i){return x(this,void 0,void 0,function*(){if(!u(this,Ht,"f").logged_in)throw new g("You must be signed in to perform this operation.");let o=Se.encodeVideoMetadataPayload(e,i);return yield u(this,Ht,"f").actions.execute("/video_manager/metadata_update",{protobuf:!0,serialized_data:o})})}upload(e,i={}){return x(this,void 0,void 0,function*(){if(!u(this,Ht,"f").logged_in)throw new g("You must be signed in to perform this operation.");let o=yield u(this,fh,"m",P1).call(this),s=yield u(this,fh,"m",N1).call(this,o.upload_url,e);if(s.status!=="STATUS_SUCCESS")throw new g("Could not process video.");return yield u(this,fh,"m",A1).call(this,o,s,i)})}};n(K0,"Studio");Ht=new WeakMap,fh=new WeakSet,P1=n(function(){return x(this,void 0,void 0,function*(){let e=`innertube_android:${B.shim.uuidv4()}:0:v=3,api=1,cf=3`,i={frontendUploadId:e,deviceDisplayName:"Pixel 6 Pro",fileId:`goog-edited-video://generated?videoFileUri=content://media/external/video/media/${B.shim.uuidv4()}`,mp4MoovAtomRelocationStatus:"UNSUPPORTED",transcodeResult:"DISABLED",connectionType:"WIFI"},o=yield u(this,Ht,"f").http.fetch("/upload/youtubei",{baseURL:_e.YT_UPLOAD,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","x-goog-upload-command":"start","x-goog-upload-protocol":"resumable"},body:JSON.stringify(i)});if(!o.ok)throw new g("Could not get initial upload data");return{frontend_upload_id:e,upload_id:o.headers.get("x-guploader-uploadid"),upload_url:o.headers.get("x-goog-upload-url"),scotty_resource_id:o.headers.get("x-goog-upload-header-scotty-resource-id"),chunk_granularity:o.headers.get("x-goog-upload-chunk-granularity")}})},"_Studio_getInitialUploadData"),N1=n(function(e,i){return x(this,void 0,void 0,function*(){let o=yield u(this,Ht,"f").http.fetch_function(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","x-goog-upload-command":"upload, finalize","x-goog-upload-file-name":`file-${Date.now()}`,"x-goog-upload-offset":"0"},body:i});if(!o.ok)throw new g("Could not upload video");return yield o.json()})},"_Studio_uploadVideo"),A1=n(function(e,i,o){return x(this,void 0,void 0,function*(){return yield u(this,Ht,"f").actions.execute(vn.PATH,vn.build({resource_id:{scotty_resource_id:{id:i.scottyResourceId}},frontend_upload_id:e.frontend_upload_id,initial_metadata:{title:{new_title:o.title||new Date().toDateString()},description:{new_description:o.description||"",should_segment:!0},privacy:{new_privacy:o.privacy||"PRIVATE"},draft_state:{is_draft:o.is_draft}},client:"ANDROID"}))})},"_Studio_setVideoMetadata");var $0=K0;var xx={};U(xx,{AccountManager:()=>X0,InteractionManager:()=>tg,PlaylistManager:()=>Z0});var yt,q0=class{constructor(e){yt.set(this,void 0),S(this,yt,e,"f"),this.channel={editName:i=>{if(!u(this,yt,"f").session.logged_in)throw new g("You must be signed in to perform this operation.");return u(this,yt,"f").execute(Pi.EditNameEndpoint.PATH,Pi.EditNameEndpoint.build({given_name:i}))},editDescription:i=>{if(!u(this,yt,"f").session.logged_in)throw new g("You must be signed in to perform this operation.");return u(this,yt,"f").execute(Pi.EditDescriptionEndpoint.PATH,Pi.EditDescriptionEndpoint.build({given_description:i}))},getBasicAnalytics:()=>this.getAnalytics()}}getInfo(){return x(this,void 0,void 0,function*(){if(!u(this,yt,"f").session.logged_in)throw new g("You must be signed in to perform this operation.");let e=yield u(this,yt,"f").execute(sn.AccountListEndpoint.PATH,sn.AccountListEndpoint.build());return new _v(e)})}getTimeWatched(){return x(this,void 0,void 0,function*(){let e=yield u(this,yt,"f").execute(j.PATH,j.build({browse_id:"SPtime_watched",client:"ANDROID"}));return new Uv(e)})}getSettings(){return x(this,void 0,void 0,function*(){let e=yield u(this,yt,"f").execute(j.PATH,j.build({browse_id:"SPaccount_overview"}));return new Yv(u(this,yt,"f"),e)})}getAnalytics(){var e;return x(this,void 0,void 0,function*(){let i=yield this.getInfo(),o=yield u(this,yt,"f").execute(j.PATH,j.build({browse_id:"FEanalytics_screen",params:Se.encodeChannelAnalyticsParams((e=i.footers)===null||e===void 0?void 0:e.endpoint.payload.browseId),client:"ANDROID"}));return new gv(o)})}};n(q0,"AccountManager");yt=new WeakMap;var X0=q0;var We,Q0=class{constructor(e){We.set(this,void 0),S(this,We,e,"f")}create(e,i){return x(this,void 0,void 0,function*(){if(re({title:e,video_ids:i}),!u(this,We,"f").session.logged_in)throw new g("You must be signed in to perform this operation.");let o=yield u(this,We,"f").execute(fn.PATH,fn.build({ids:i,title:e}));return{success:o.success,status_code:o.status_code,playlist_id:o.data.playlistId,data:o.data}})}delete(e){return x(this,void 0,void 0,function*(){if(re({playlist_id:e}),!u(this,We,"f").session.logged_in)throw new g("You must be signed in to perform this operation.");let i=yield u(this,We,"f").execute(hn.PATH,hn.build({playlist_id:e}));return{playlist_id:e,success:i.success,status_code:i.status_code,data:i.data}})}addVideos(e,i){return x(this,void 0,void 0,function*(){if(re({playlist_id:e,video_ids:i}),!u(this,We,"f").session.logged_in)throw new g("You must be signed in to perform this operation.");let o=yield u(this,We,"f").execute(Wt.PATH,Wt.build({actions:i.map(s=>({action:"ACTION_ADD_VIDEO",added_video_id:s})),playlist_id:e}));return{playlist_id:e,action_result:o.data.actions}})}removeVideos(e,i){return x(this,void 0,void 0,function*(){if(re({playlist_id:e,video_ids:i}),!u(this,We,"f").session.logged_in)throw new g("You must be signed in to perform this operation.");let o=yield u(this,We,"f").execute(j.PATH,Object.assign(Object.assign({},j.build({browse_id:`VL${e}`})),{parse:!0})),s=new xi(u(this,We,"f"),o,!0);if(!s.info.is_editable)throw new g("This playlist cannot be edited.",e);let r={playlist_id:e,actions:[]},c=n(f=>x(this,void 0,void 0,function*(){if(f.videos.filter(_=>i.includes(_.key("id").string())).forEach(_=>r.actions.push({action:"ACTION_REMOVE_VIDEO",set_video_id:_.key("set_video_id").string()})),r.actions.length<i.length){let _=yield f.getContinuation();return c(_)}}),"getSetVideoIds");if(yield c(s),!r.actions.length)throw new g("Given video ids were not found in this playlist.",i);let p=yield u(this,We,"f").execute(Wt.PATH,Wt.build(r));return{playlist_id:e,action_result:p.data.actions}})}moveVideo(e,i,o){return x(this,void 0,void 0,function*(){if(re({playlist_id:e,moved_video_id:i,predecessor_video_id:o}),!u(this,We,"f").session.logged_in)throw new g("You must be signed in to perform this operation.");let s=yield u(this,We,"f").execute(j.PATH,Object.assign(Object.assign({},j.build({browse_id:`VL${e}`})),{parse:!0})),r=new xi(u(this,We,"f"),s,!0);if(!r.info.is_editable)throw new g("This playlist cannot be edited.",e);let c={playlist_id:e,actions:[]},p,f,m=n(b=>x(this,void 0,void 0,function*(){let w=b.videos.find(I=>i===I.key("id").string()),T=b.videos.find(I=>o===I.key("id").string());if(p=p||(w==null?void 0:w.key("set_video_id").string()),f=f||(T==null?void 0:T.key("set_video_id").string()),!p||!f){let I=yield b.getContinuation();return m(I)}}),"getSetVideoIds");yield m(r),c.actions.push({action:"ACTION_MOVE_VIDEO_AFTER",set_video_id:p,moved_set_video_id_predecessor:f});let _=yield u(this,We,"f").execute(Wt.PATH,Wt.build(c));return{playlist_id:e,action_result:_.data.actions}})}};n(Q0,"PlaylistManager");We=new WeakMap;var Z0=Q0;var je,eg=class{constructor(e){je.set(this,void 0),S(this,je,e,"f")}like(e){return x(this,void 0,void 0,function*(){if(re({video_id:e}),!u(this,je,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");return yield u(this,je,"f").execute(un.PATH,un.build({client:"ANDROID",target:{video_id:e}}))})}dislike(e){return x(this,void 0,void 0,function*(){if(re({video_id:e}),!u(this,je,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");return yield u(this,je,"f").execute(ln.PATH,ln.build({client:"ANDROID",target:{video_id:e}}))})}removeRating(e){return x(this,void 0,void 0,function*(){if(re({video_id:e}),!u(this,je,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");return yield u(this,je,"f").execute(cn.PATH,cn.build({client:"ANDROID",target:{video_id:e}}))})}subscribe(e){return x(this,void 0,void 0,function*(){if(re({channel_id:e}),!u(this,je,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");return yield u(this,je,"f").execute(mn.PATH,mn.build({client:"ANDROID",channel_ids:[e],params:"EgIIAhgA"}))})}unsubscribe(e){return x(this,void 0,void 0,function*(){if(re({channel_id:e}),!u(this,je,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");return yield u(this,je,"f").execute(_n.PATH,_n.build({client:"ANDROID",channel_ids:[e],params:"CgIIAhgA"}))})}comment(e,i){return x(this,void 0,void 0,function*(){if(re({video_id:e,text:i}),!u(this,je,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");return yield u(this,je,"f").execute(an.PATH,an.build({comment_text:i,create_comment_params:Se.encodeCommentParams(e),client:"ANDROID"}))})}translate(e,i,o={}){return x(this,void 0,void 0,function*(){re({text:e,target_language:i});let s=Se.encodeCommentActionParams(22,Object.assign({text:e,target_language:i},o)),r=yield u(this,je,"f").execute(rn.PATH,rn.build({client:"ANDROID",actions:[s]})),c=r.data.frameworkUpdates.entityBatchUpdate.mutations[0].payload.commentEntityPayload;return{success:r.success,status_code:r.status_code,translated_content:c.translatedContent.content,data:r.data}})}setNotificationPreferences(e,i){return x(this,void 0,void 0,function*(){if(re({channel_id:e,type:i}),!u(this,je,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");let o={PERSONALIZED:1,ALL:2,NONE:3};if(!Object.keys(o).includes(i.toUpperCase()))throw new Error(`Invalid notification preference type: ${i}`);return yield u(this,je,"f").execute(pn.PATH,pn.build({client:"WEB",params:Se.encodeNotificationPref(e,o[i.toUpperCase()])}))})}};n(eg,"InteractionManager");je=new WeakMap;var tg=eg;var qe,br=class{constructor(e){qe.set(this,void 0),S(this,qe,e,"f")}static create(e={}){return x(this,void 0,void 0,function*(){return new br(yield _x.create(e))})}getInfo(e,i){var o,s,r,c,p;return x(this,void 0,void 0,function*(){re({target:e});let f;if(e instanceof v)f=Pe.build({video_id:(o=e.payload)===null||o===void 0?void 0:o.videoId,playlist_id:(s=e.payload)===null||s===void 0?void 0:s.playlistId,params:(r=e.payload)===null||r===void 0?void 0:r.params,playlist_index:(c=e.payload)===null||c===void 0?void 0:c.index});else if(typeof e=="string")f=Pe.build({video_id:e});else throw new g("Invalid target, expected either a video id or a valid NavigationEndpoint",e);if(!f.videoId)throw new g("Video id cannot be empty",f);let m=et.build({video_id:f.videoId,playlist_id:f==null?void 0:f.playlistId,client:i,sts:(p=u(this,qe,"f").player)===null||p===void 0?void 0:p.sts}),_=this.actions.execute(et.PATH,m),b=this.actions.execute(Pe.PATH,f),w=yield Promise.all([_,b]),T=It(16);return new zf(w,this.actions,T)})}getBasicInfo(e,i){var o;return x(this,void 0,void 0,function*(){re({video_id:e});let s=yield this.actions.execute(et.PATH,et.build({video_id:e,client:i,sts:(o=u(this,qe,"f").player)===null||o===void 0?void 0:o.sts})),r=It(16);return new zf([s],this.actions,r)})}search(e,i={}){return x(this,void 0,void 0,function*(){re({query:e});let o=yield this.actions.execute(xt.PATH,xt.build({query:e,params:i?Se.encodeSearchFilters(i):void 0}));return new Fv(this.actions,o)})}getSearchSuggestions(e){return x(this,void 0,void 0,function*(){re({query:e});let i=new URL(`${_e.YT_SUGGESTIONS}search`);i.searchParams.set("q",e),i.searchParams.set("hl",u(this,qe,"f").context.client.hl),i.searchParams.set("gl",u(this,qe,"f").context.client.gl),i.searchParams.set("ds","yt"),i.searchParams.set("client","youtube"),i.searchParams.set("xssi","t"),i.searchParams.set("oe","UTF");let s=yield(yield u(this,qe,"f").http.fetch(i)).text();return JSON.parse(s.replace(")]}'",""))[1].map(p=>p[0])})}getComments(e,i){return x(this,void 0,void 0,function*(){re({video_id:e});let o=yield this.actions.execute(Pe.PATH,Pe.build({continuation:Se.encodeCommentsSectionParams(e,{sort_by:i||"TOP_COMMENTS"})}));return new bv(this.actions,o.data)})}getHomeFeed(){return x(this,void 0,void 0,function*(){let e=yield this.actions.execute(j.PATH,j.build({browse_id:"FEwhat_to_watch"}));return new Lt(this.actions,e)})}getGuide(){return x(this,void 0,void 0,function*(){let e=yield this.actions.execute(gr.PATH);return new wv(e.data)})}getLibrary(){return x(this,void 0,void 0,function*(){let e=yield this.actions.execute(j.PATH,j.build({browse_id:"FElibrary"}));return new Pv(this.actions,e)})}getHistory(){return x(this,void 0,void 0,function*(){let e=yield this.actions.execute(j.PATH,j.build({browse_id:"FEhistory"}));return new us(this.actions,e)})}getTrending(){return x(this,void 0,void 0,function*(){let e=yield this.actions.execute(j.PATH,Object.assign(Object.assign({},j.build({browse_id:"FEtrending"})),{parse:!0}));return new is(this.actions,e)})}getSubscriptionsFeed(){return x(this,void 0,void 0,function*(){let e=yield this.actions.execute(j.PATH,Object.assign(Object.assign({},j.build({browse_id:"FEsubscriptions"})),{parse:!0}));return new xe(this.actions,e)})}getChannel(e){return x(this,void 0,void 0,function*(){re({id:e});let i=yield this.actions.execute(j.PATH,j.build({browse_id:e}));return new Ae(this.actions,i)})}getNotifications(){return x(this,void 0,void 0,function*(){let e=yield this.actions.execute(on.PATH,on.build({notifications_menu_request_type:"NOTIFICATIONS_MENU_REQUEST_TYPE_INBOX"}));return new Lv(this.actions,e)})}getUnseenNotificationsCount(){var e,i,o,s;return x(this,void 0,void 0,function*(){let r=yield this.actions.execute(xr.PATH);return((e=r.data)===null||e===void 0?void 0:e.unseenCount)||((s=(o=(i=r.data)===null||i===void 0?void 0:i.actions)===null||o===void 0?void 0:o[0].updateNotificationsUnseenCountAction)===null||s===void 0?void 0:s.unseenCount)||0})}getPlaylist(e){return x(this,void 0,void 0,function*(){re({id:e}),e.startsWith("VL")||(e=`VL${e}`);let i=yield this.actions.execute(j.PATH,j.build({browse_id:e}));return new xi(this.actions,i)})}getHashtag(e){return x(this,void 0,void 0,function*(){re({hashtag:e});let i=yield this.actions.execute(j.PATH,j.build({browse_id:"FEhashtag",params:Se.encodeHashtag(e)}));return new si(this.actions,i)})}getStreamingData(e,i={}){return x(this,void 0,void 0,function*(){return(yield this.getBasicInfo(e)).chooseFormat(i)})}download(e,i){return x(this,void 0,void 0,function*(){return(yield this.getBasicInfo(e,i==null?void 0:i.client)).download(i)})}resolveURL(e){return x(this,void 0,void 0,function*(){return(yield this.actions.execute(nn.PATH,Object.assign(Object.assign({},nn.build({url:e})),{parse:!0}))).endpoint})}call(e,i){return e.call(this.actions,i)}get music(){return new z0(u(this,qe,"f"))}get studio(){return new $0(u(this,qe,"f"))}get kids(){return new H0(u(this,qe,"f"))}get account(){return new X0(u(this,qe,"f").actions)}get playlist(){return new Z0(u(this,qe,"f").actions)}get interact(){return new tg(u(this,qe,"f").actions)}get actions(){return u(this,qe,"f").actions}get session(){return u(this,qe,"f")}};n(br,"Innertube");qe=new WeakMap;var bx=br;var R1={};var gn,ig=class{constructor(e,i){gn.set(this,void 0),S(this,gn,new B.shim.Cache(e,i),"f")}get cache_dir(){return u(this,gn,"f").cache_dir}get(e){return u(this,gn,"f").get(e)}set(e,i){return u(this,gn,"f").set(e,i)}remove(e){return u(this,gn,"f").remove(e)}};n(ig,"UniversalCache");gn=new WeakMap;var YI=ig;var M1=bx;var hh,og,ng,sg,rg=class{constructor(e=!1,i){hh.add(this),og.set(this,void 0),ng.set(this,void 0),S(this,og,i||"","f"),S(this,ng,e,"f")}get cache_dir(){return u(this,ng,"f")?u(this,og,"f"):""}get(e){return x(this,void 0,void 0,function*(){let i=yield u(this,hh,"m",sg).call(this);if(!!i)return new Promise((o,s)=>{let r=i.transaction("kv-store","readonly").objectStore("kv-store").get(e);r.onerror=s,r.onsuccess=function(){var c;let p=(c=this.result)===null||c===void 0?void 0:c.v;o(p?p.buffer:void 0)}})})}set(e,i){return x(this,void 0,void 0,function*(){let o=yield u(this,hh,"m",sg).call(this);if(!!o)return new Promise((s,r)=>{let c=o.transaction("kv-store","readwrite").objectStore("kv-store").put({k:e,v:i});c.onerror=r,c.onsuccess=()=>s()})})}remove(e){return x(this,void 0,void 0,function*(){let i=yield u(this,hh,"m",sg).call(this);if(!!i)return new Promise((o,s)=>{let r=i.transaction("kv-store","readwrite").objectStore("kv-store").delete(e);r.onerror=s,r.onsuccess=()=>o()})})}};n(rg,"Cache");og=new WeakMap,ng=new WeakMap,hh=new WeakSet,sg=n(function(){let e=Reflect.get(globalThis,"indexedDB")||Reflect.get(globalThis,"webkitIndexedDB")||Reflect.get(globalThis,"mozIndexedDB")||Reflect.get(globalThis,"msIndexedDB");return e?new Promise((i,o)=>{let s=e.open("youtubei.js",1);s.onsuccess=function(){i(this.result)},s.onerror=function(r){o("indexedDB request error"),console.error(r)},s.onupgradeneeded=function(){let r=this.result.createObjectStore("kv-store",{keyPath:"k"});r.transaction.oncomplete=function(){i(this.db)}}}):console.log("IndexedDB is not supported. No cache will be used.")},"_Cache_getBrowserDB");B.load({runtime:"browser",server:!1,info:{version:f0.version,bugs_url:f0.bugs.url,repo_url:f0.homepage.split("#")[0]},Cache:rg,sha1Hash:jg,uuidv4(){var t;return!((t=globalThis.crypto)===null||t===void 0)&&t.randomUUID()?globalThis.crypto.randomUUID():"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>{let i=parseInt(e);return(i^window.crypto.getRandomValues(new Uint8Array(1))[0]&15>>i/4).toString(16)})},eval:rx,DOMParser:globalThis.DOMParser,serializeDOM(t){return new XMLSerializer().serializeToString(t)},fetch:globalThis.fetch,Request:globalThis.Request,Response:globalThis.Response,Headers:globalThis.Headers,FormData:globalThis.FormData,File:globalThis.File,ReadableStream:globalThis.ReadableStream,CustomEvent:globalThis.CustomEvent});var qge=M1;export{ax as Actions,Af as AppendContinuationItemsAction,mx as ClientType,gx as Clients,ft as Constants,es as Continuation,vx as Endpoints,Lf as EventEmitter,Jf as FormatUtils,bg as Generator,Po as GridContinuation,cx as HTTPClient,ug as Helpers,bx as Innertube,Io as ItemSectionContinuation,No as LiveChatContinuation,xx as Managers,Bg as Misc,Rg as Mixins,Eo as MusicPlaylistShelfContinuation,gi as MusicShelfContinuation,ko as NavigateAction,fx as OAuth,d as Parser,B as Platform,ux as Player,Rf as PlaylistPanelContinuation,Se as Proto,Co as ReloadContinuationItemsCommand,mt as SectionListContinuation,_x as Session,Nf as ShowMiniplayerCommand,R1 as Types,YI as UniversalCache,Yg as Utils,Mg as YT,Dg as YTKids,Og as YTMusic,Pf as YTNodes,qge as default};
//# sourceMappingURL=browser.min.js.map
